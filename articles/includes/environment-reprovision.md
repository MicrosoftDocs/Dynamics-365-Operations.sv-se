<span data-ttu-id="ad949-101">När du kopierar en databas mellan olika miljöer måste du köra miljöetableringsverktyget igen innan den kopierade databasen fungerar helt och hållet och alla Commerce-komponenter är uppdaterade.</span><span class="sxs-lookup"><span data-stu-id="ad949-101">When copying a database between environments, you will need to run the environment re-provisioning tool before the copied database is fully functional, to ensure that all Commerce components are up-to-date.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="ad949-102">Vi rekommenderar att du kör den här proceduren oavsett om du använder Commerce-komponenter eller inte, eftersom Commerce-funktionerna ingår i alla miljöer.</span><span class="sxs-lookup"><span data-stu-id="ad949-102">We recommend that you run this procedure whether you are using Commerce components or not, because Commerce functionality is included in all environments.</span></span> 

<span data-ttu-id="ad949-103">Innan du fortsätter måste du se till att följande förutsättningar är uppfyllda:</span><span class="sxs-lookup"><span data-stu-id="ad949-103">Before you continue, you must make sure that the following prerequisites are met:</span></span>
1. <span data-ttu-id="ad949-104">Om du uppgraderar till juliversionen 2017 (även kallad 7.2) 7.2.11792.56024 installerar du följande X++-snabbkorrigeringar för appar i målmiljön innan du kör datauppgraderingen i den miljön.</span><span class="sxs-lookup"><span data-stu-id="ad949-104">If you are upgrading to the July 2017 release (also known as 7.2) 7.2.11792.56024, apply the following application X++ hotfixes in the destination environment before running the data upgrade in that environment.</span></span> <span data-ttu-id="ad949-105">Detta förhindrar att olika fel uppstår under datauppgraderingen:</span><span class="sxs-lookup"><span data-stu-id="ad949-105">These will prevent various errors occurring during the data upgrade:</span></span>

    - <span data-ttu-id="ad949-106">KB 4036156 - Mindre versionsuppgradering för Retail - Ingen variantnummerserie har ställts in.</span><span class="sxs-lookup"><span data-stu-id="ad949-106">KB 4036156 - Retail minor version upgrade - 'Variant number sequence is not set.'</span></span> <span data-ttu-id="ad949-107">I detta korrigeringspaket ingår även KB 4035399 och KB 4035751.</span><span class="sxs-lookup"><span data-stu-id="ad949-107">This fix package also includes KB 4035399 and KB 4035751.</span></span> <span data-ttu-id="ad949-108">Observera att du måste ha minst Platform Update 9 för att kunna använda det här paketet.</span><span class="sxs-lookup"><span data-stu-id="ad949-108">Note that you must have a minimum of Platform Update 9 to use this package.</span></span> <span data-ttu-id="ad949-109">Installera de senaste binärfilerna om du är osäker.</span><span class="sxs-lookup"><span data-stu-id="ad949-109">If you are unsure, install the latest binaries.</span></span>
    
2. <span data-ttu-id="ad949-110">Om du uppgraderar från Microsoft Dynamics AX 2012 installerar du följande X++-snabbkorrigeringar för appar i målmiljön innan du kör datauppgraderingen:</span><span class="sxs-lookup"><span data-stu-id="ad949-110">If you are upgrading from Microsoft Dynamics AX 2012, install the following application X++ fixes in the destination environment before you run the data upgrade:</span></span>
    - <span data-ttu-id="ad949-111">KB 4033183 - Uppgradering av Dynamics AX 2012 R2 eller Dynamics AX 2012 R3 Pre-CU8 som inte berör butik misslyckas med "Objektet hittades" inte för dbo.RETAILTILLLAYOUTZONE.</span><span class="sxs-lookup"><span data-stu-id="ad949-111">KB 4033183 - Dynamics AX 2012 R2 or Dynamics AX 2012 R3 Pre-CU8 non-retail upgrade fails with Object not found for dbo.RETAILTILLLAYOUTZONE.</span></span>
    - <span data-ttu-id="ad949-112">KB 4040692 - Uppgraderingen av Dynamics AX 2012 R3 till Microsoft Dynamics 365 for Operations 7.2 misslyckas vid dupliceringsindex RetailSalesLine vid SalesLineIdx.</span><span class="sxs-lookup"><span data-stu-id="ad949-112">KB 4040692 - Dynamics AX 2012 R3 to Microsoft Dynamics 365 for Operations 7.2 upgrade fails on RetailSalesLine duplicate index on SalesLineIdx.</span></span>
    - <span data-ttu-id="ad949-113">KB 4035490 - Prestandaproblem med fältuppgraderingsskriptet för GeneralJournalAccountEntry MainAccount.</span><span class="sxs-lookup"><span data-stu-id="ad949-113">KB 4035490 - Performance issue with GeneralJournalAccountEntry MainAccount field upgrade script.</span></span>


<span data-ttu-id="ad949-114">Följ dessa steg när du kör verktyget för omreservering av miljön.</span><span class="sxs-lookup"><span data-stu-id="ad949-114">Follow these steps to run the Environment reprovisioning tool.</span></span>

1. <span data-ttu-id="ad949-115">Välj **Distribuerbart programpaket** i biblioteket med gemensamma tillgångar.</span><span class="sxs-lookup"><span data-stu-id="ad949-115">In the Shared asset library, select **Software deployable package**.</span></span>
2. <span data-ttu-id="ad949-116">Hämta verktyget för omreservering av miljön.</span><span class="sxs-lookup"><span data-stu-id="ad949-116">Download the Environment reprovisioning tool.</span></span>
3. <span data-ttu-id="ad949-117">Välj **Distribuerbart programpaket** i tillgångsbiblioteket för ditt projekt.</span><span class="sxs-lookup"><span data-stu-id="ad949-117">In the asset library for your project, select **Software deployable package**.</span></span>
4. <span data-ttu-id="ad949-118">Skapa ett nytt paket genom att välja **Nytt**.</span><span class="sxs-lookup"><span data-stu-id="ad949-118">Select **New** to create a new package.</span></span>
5. <span data-ttu-id="ad949-119">Ange ett namn och en beskrivning för paketet.</span><span class="sxs-lookup"><span data-stu-id="ad949-119">Enter a name and description for the package.</span></span> <span data-ttu-id="ad949-120">Du kan använda **Verktyget för omreservering av miljön** som paketnamn.</span><span class="sxs-lookup"><span data-stu-id="ad949-120">You can use **Environment reprovisioning tool** as the package name.</span></span>
6. <span data-ttu-id="ad949-121">Ladda upp paketet som du hämtade tidigare.</span><span class="sxs-lookup"><span data-stu-id="ad949-121">Upload the package that you downloaded earlier.</span></span>
7. <span data-ttu-id="ad949-122">På sidan **Miljöinformation** för målmiljön väljer du **Underhåll** > **Tillämpa uppdateringar.**</span><span class="sxs-lookup"><span data-stu-id="ad949-122">On the **Environment details** page for your target environment, select **Maintain** > **Apply updates**.</span></span>
8. <span data-ttu-id="ad949-123">Välj det verktyg för omreservering av miljön som du laddade upp tidigare och välj **Tillämpa** för att installera paketet.</span><span class="sxs-lookup"><span data-stu-id="ad949-123">Select the Environment reprovisioning tool that you uploaded earlier, and then select **Apply** to apply the package.</span></span>
9. <span data-ttu-id="ad949-124">Övervaka paketdistributionens förlopp.</span><span class="sxs-lookup"><span data-stu-id="ad949-124">Monitor the progress of the package deployment.</span></span> 

<span data-ttu-id="ad949-125">Mer information om hur du installerar ett distribuerbart paket finns i [Tillämpa ett distribuerbart paket](../deployment/create-apply-deployable-package.md).</span><span class="sxs-lookup"><span data-stu-id="ad949-125">For more information about how to apply a deployable package, see [Apply a deployable package](../deployment/create-apply-deployable-package.md).</span></span> <span data-ttu-id="ad949-126">Mer information om hur du installerar ett distribuerbart paket manuellt finns i [Installera ett distribuerbart paket](../deployment/install-deployable-package.md).</span><span class="sxs-lookup"><span data-stu-id="ad949-126">For more information about how to manually apply a deployable package, see [Install a deployable package](../deployment/install-deployable-package.md).</span></span>

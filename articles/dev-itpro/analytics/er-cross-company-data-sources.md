---
title: Företagsövergripande datakällor i elektronisk rapportering (ER)
description: Det här avsnittet beskriver hur du kan använda datakällor mellan företag i elektronisk rapportering (ER).
author: NickSelin
manager: AnnBe
ms.date: 05/25/2018
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-platform
ms.technology: ''
audience: Application User, Developer, IT Pro
ms.reviewer: kfend
ms.search.scope: Core, Operations
ms.custom: 220314
ms.assetid: 2685df16-5ec8-4fd7-9495-c0f653e82567
ms.search.region: Global
ms.author: nselin
ms.search.validFrom: 2018-04-01
ms.dyn365.ops.version: Release 8.0
ms.openlocfilehash: 3ff94c49eed378d92e995782e73d76d669b44292
ms.sourcegitcommit: 9d4c7edd0ae2053c37c7d81cdd180b16bf3a9d3b
ms.translationtype: HT
ms.contentlocale: sv-SE
ms.lasthandoff: 05/15/2019
ms.locfileid: "1552774"
---
# <a name="cross-company-data-sources-in-electronic-reporting-er"></a><span data-ttu-id="4092a-103">Företagsövergripande datakällor i elektronisk rapportering (ER)</span><span class="sxs-lookup"><span data-stu-id="4092a-103">Cross-company data sources in Electronic reporting (ER)</span></span>

[!include[banner](../includes/banner.md)]

<span data-ttu-id="4092a-104">Du kan utforma elektronisk rapportering (ER)-format som skapar utgående dokument i olika format.</span><span class="sxs-lookup"><span data-stu-id="4092a-104">You can design Electronic reporting (ER) formats to generate outgoing documents in various formats.</span></span> <span data-ttu-id="4092a-105">När ett dokument skapas anropar ett ER-format datakällor som har konfigurerats i en motsvarande ER-modellmappning.</span><span class="sxs-lookup"><span data-stu-id="4092a-105">When a document is generated, an ER format calls data sources that were configured in a corresponding ER model mapping.</span></span> <span data-ttu-id="4092a-106">Om du vill konfigurera åtkomst till programregister för att hämta poster kan du använda ER-datakällor av typen **Registerposter**.</span><span class="sxs-lookup"><span data-stu-id="4092a-106">To configure access to application tables for record retrieval, you can use ER data sources of the **Table records** type.</span></span> <span data-ttu-id="4092a-107">När åtkomst till registret är ett delat register (det vill säga ett register där data sparas utan företags-ID), returnerar denna datakälla alla poster.</span><span class="sxs-lookup"><span data-stu-id="4092a-107">When the accessing table is a shared table (that is, a table where data is saved without a company identifier), this data source returns all records.</span></span> <span data-ttu-id="4092a-108">När åtkomst till registret är ett företagsberoende register (det vill säga en tabell där data sparas per företag) returnerar denna data enbart de poster som har sparats för det aktuella företaget (det vill säga företagssammanhanget som ER-formatet körs under).</span><span class="sxs-lookup"><span data-stu-id="4092a-108">When the accessing table is a company-dependent table (that is, a table where data is saved per company), this data source returns only the records that have been saved for the current company (that is, the company context that the ER format is running under).</span></span>

<span data-ttu-id="4092a-109">Varje datakälla av typen **Registerposter** i en modellmappning kan nu markeras som ett korsföretags datakälla.</span><span class="sxs-lookup"><span data-stu-id="4092a-109">Every data source of the **Table records** type in a model mapping can be now marked as a cross-company data source.</span></span> <span data-ttu-id="4092a-110">Därför kan du använda datakällor av typen **Registerposter** för att få tillgång till data mellan företag i programregistren.</span><span class="sxs-lookup"><span data-stu-id="4092a-110">Therefore, you can use data sources of the **Table records** type to access cross-company data in application tables.</span></span>

<span data-ttu-id="4092a-111">Om du markerar en datakälla som mellan företag händer följande:</span><span class="sxs-lookup"><span data-stu-id="4092a-111">If you mark a data source as cross-company, the following behavior occurs:</span></span>

- <span data-ttu-id="4092a-112">För en datakälla som refererar till alla delade register utom CompanyInfo returnerar datakällan alla poster som finns i den hänvisade tabellen.</span><span class="sxs-lookup"><span data-stu-id="4092a-112">For a data source that refers to any shared table except CompanyInfo, the data source returns all records that exist in the referenced table.</span></span> 
- <span data-ttu-id="4092a-113">För en datakälla som hänvisar till registret CompanyInfo, även om CompanyInfo är ett delat register returnerar datakällan poster som innehåller ID för ett företag från det definierade området.</span><span class="sxs-lookup"><span data-stu-id="4092a-113">For a data source that refers to the CompanyInfo table, even though CompanyInfo is a shared table, the data source returns the records that contain the identifier of a company from the defined scope.</span></span>
- <span data-ttu-id="4092a-114">För alla företagsberoende register returnerar datakällan poster av den hänvisade tabellen med ID för ett företag från det definierade området.</span><span class="sxs-lookup"><span data-stu-id="4092a-114">For any company-dependent table, the data source returns the records of the referenced table that contain the identifier of a company from the defined scope.</span></span>

<span data-ttu-id="4092a-115">I dialogrutan systemfråga när alternativet **Fråga efter fråga** aktiveras för alla datakällor som har markerats som mellan företag kan du manuellt välja ett eller flera företag som ska inkluderas i fliken **Företagsintervall**.</span><span class="sxs-lookup"><span data-stu-id="4092a-115">In the system query dialog box, when the **Ask for query** option is turned on for any data source that is marked as cross-company, you can manually select one or more companies to include on the **Company range** tab.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="4092a-116">Precis som andra filter sparas företagsfiltret som senast använda värde för frågor när du kör ett ER-format.</span><span class="sxs-lookup"><span data-stu-id="4092a-116">Like other filters, the company filter is persisted as a last-used value for queries when you run an ER format.</span></span> <span data-ttu-id="4092a-117">Filtret ändras inte automatiskt om du ändrar värdet för en datakälla mellan företag.</span><span class="sxs-lookup"><span data-stu-id="4092a-117">The filter isn't automatically changed if you change the cross-company value for a data source.</span></span> <span data-ttu-id="4092a-118">Ta bort motsvarande användarspecifika val om du vill använda ett annat värde mellan företag på en annan datakälla.</span><span class="sxs-lookup"><span data-stu-id="4092a-118">To use a different cross-company value for another data source, delete the corresponding user-specific selection.</span></span>

<span data-ttu-id="4092a-119">Du kan välja de poster som är markerade som mellan företa för varje datakälla genom att använda funktionerna **FILTER** och **WHERE** i ER uttryck.</span><span class="sxs-lookup"><span data-stu-id="4092a-119">For every data source that is marked as cross-company, you can select the records that you want by using the **FILTER** and **WHERE** functions in ER expressions.</span></span> <span data-ttu-id="4092a-120">Fältet **dataAreaID** kan också användas som en företagsidentifierare.</span><span class="sxs-lookup"><span data-stu-id="4092a-120">The **dataAreaID** field can also be used as a company identifier.</span></span> <span data-ttu-id="4092a-121">För närvarande är fältet **dataAreaID** begränsat till följande typer av villkor när funktionen **FILTER** används:</span><span class="sxs-lookup"><span data-stu-id="4092a-121">Currently, the **dataAreaID** field is limited to the following types of conditions when the **FILTER** function is used:</span></span>

- <span data-ttu-id="4092a-122">Endast villkor som har en enda fältjämförelse för **dataAreaID** stöds.</span><span class="sxs-lookup"><span data-stu-id="4092a-122">Only conditions that have a single **dataAreaID** field comparison are supported.</span></span>
- <span data-ttu-id="4092a-123">Endast jämförelser som innehåller uttryck som inte beror på postlisteartiklar tillåts.</span><span class="sxs-lookup"><span data-stu-id="4092a-123">Only comparisons that have expressions that don't depend on records list items are allowed.</span></span>

<span data-ttu-id="4092a-124">Därför är följande uttryck giltiga.</span><span class="sxs-lookup"><span data-stu-id="4092a-124">Therefore, the following expression is valid.</span></span>

```
FILTER (MyTable, MyTable.dataAreaID = $StringUserInputParameter)
While shown below expressions will not pass the validation:
FILTER (MyTable, MyTable.dataAreaID = MyTable2RecordsList.MyField)
FILTER (MyTable, 
    OR(
        MyTable.dataAreaID = $StringUserInputParameter1,
        MyTable.dataAreaID = $StringUserInputParameter2
    )
)
```

<span data-ttu-id="4092a-125">Området inkluderar som standard alla företag i det aktuella programmet.</span><span class="sxs-lookup"><span data-stu-id="4092a-125">By default, the scope includes all companies of the current application.</span></span> <span data-ttu-id="4092a-126">Detta kan dock begränsas.</span><span class="sxs-lookup"><span data-stu-id="4092a-126">However, it can be restricted.</span></span> <span data-ttu-id="4092a-127">Om du vill begränsa omfattningen av dataåtkomst mellan företag för ett enda ER-format, tilldela en viss organisationshierarki till formatet.</span><span class="sxs-lookup"><span data-stu-id="4092a-127">To restrict the scope of cross-company data access for a single ER format, assign a specific organization hierarchy to the format.</span></span> <span data-ttu-id="4092a-128">När en hierarki definierats för ett ER-format, endast poster för juridiska personer som presenteras i den tilldelade hierarkin returneras, även om formatet anropar datakällor mellan företag.</span><span class="sxs-lookup"><span data-stu-id="4092a-128">When a hierarchy is defined for an ER format, only records for legal entities that are presented in the assigned hierarchy are returned, even though the format calls cross-company data sources.</span></span> <span data-ttu-id="4092a-129">När en referens till en hierarki som inte längre existerar definieras för ett ER-format tillämpas standardomfånget och formatet anropar datakällor mellan företag.</span><span class="sxs-lookup"><span data-stu-id="4092a-129">When a reference to a hierarchy that no longer exists is defined for an ER format, the default scope is applied, and the format calls cross-company data sources.</span></span> <span data-ttu-id="4092a-130">I denna situation returneras poster för alla programföretag.</span><span class="sxs-lookup"><span data-stu-id="4092a-130">In this situation, records for all application companies are returned.</span></span>

<span data-ttu-id="4092a-131">Observera att om alternativet **använd utkast** aktiveras för den som tilldelats till en organisationshierarki med ett enda ER-format kommer juridiska personer från hierarkins utkastversion att användas för att identifiera omfattningen för datakällor mellan företag.</span><span class="sxs-lookup"><span data-stu-id="4092a-131">Note that when the **Use draft** option is turned on for the assigned to a single ER format organization hierarchy, the legal entities from the draft version of this hierarchy will be used to identify the scope for cross-company data sources.</span></span> <span data-ttu-id="4092a-132">Om utkastsversionen inte existerar används juridiska personer från den senast publicerade versionen av det här organisationshierarkin för detta.</span><span class="sxs-lookup"><span data-stu-id="4092a-132">If the draft version does not exist, the legal entities from the last published version of this organization hierarchy will be used for this.</span></span>

<span data-ttu-id="4092a-133">Observera att om alternativet **använd utkast** avaktiveras för den som tilldelats till en organisationshierarki med ett enda ER-format kommer juridiska personer från organisationshierarkins senast publicerade version att användas för att identifiera omfattningen för datakällor mellan företag.</span><span class="sxs-lookup"><span data-stu-id="4092a-133">Note that when the **Use draft** option is turned off for the assigned to a single ER format organization hierarchy, the legal entities from the last published version of this organization hierarchy will be used to identify the scope for cross-company data sources.</span></span> <span data-ttu-id="4092a-134">Datumeffektivitet för organisationshierarkier stöds inte ännu i ER-ramverket.</span><span class="sxs-lookup"><span data-stu-id="4092a-134">Date effectiveness of organization hierarchies is not supported yet in the ER framework.</span></span>

<span data-ttu-id="4092a-135">Hierarkin kan tilldelas ett format på en viss sida som kan nås från ER-arbetsytan eller med hjälp av menyalternativen **Organisationsadministration \> Elektronisk rapportering \> Filter för juridisk person för format**.</span><span class="sxs-lookup"><span data-stu-id="4092a-135">The hierarchy can be assigned to a format in a specific page that can be accessed from the ER workspace or by using the **Organization administration \> Electronic reporting \> Legal entity filter for formats** menu item.</span></span> <span data-ttu-id="4092a-136">För åtkomst till sidan måste behörigheten **Hantera filter för juridisk person för format** (ERMaintainFormatMappingLegalEntityFilters) tilldelas en användare.</span><span class="sxs-lookup"><span data-stu-id="4092a-136">To access the page, the **Maintain legal entity filters for format** privilege (ERMaintainFormatMappingLegalEntityFilters) must be granted to a user.</span></span> <span data-ttu-id="4092a-137">Begränsning av omfattningen för hierarkibaserade jurdiska personer för formatet används tillsammans med begränsningen att användaren kan ange manuellt i dialogrutan systemfråga.</span><span class="sxs-lookup"><span data-stu-id="4092a-137">The scope restriction of hierarchy-based legal entities for the format is applied in addition to the restriction that the user can manually specify in the system query dialog box.</span></span> <span data-ttu-id="4092a-138">Skärningspunkten mellan dessa begränsningar används när formatet körs.</span><span class="sxs-lookup"><span data-stu-id="4092a-138">The intersection of these restrictions is used when the format is run.</span></span>

<span data-ttu-id="4092a-139">Om du vill veta mer om den här funktionen spelar du upp arbetsguiden **ER-åtkomstregistreringar av företagsberoende tabeller i läget mellan företag**, som är en del av affärsprocessen 7.5.4.3 Skaffa/utveckla komponenter för IT-tjänster eller IT-lösningar (10677) och kan hämtas från [Microsoft Download Center](https://go.microsoft.com/fwlink/?linkid=874684).</span><span class="sxs-lookup"><span data-stu-id="4092a-139">To learn more about this feature, play the task guide, **ER Access records of company dependent tables in cross-company mode**, which is part of the 7.5.4.3 Acquire/Develop IT service/solution components (10677) business process, and can be downloaded from the [Microsoft Download Center](https://go.microsoft.com/fwlink/?linkid=874684).</span></span> <span data-ttu-id="4092a-140">Den här uppgiftsguiden guidar dig genom processen att konfigurera en ER-modellmappning och ER-format för att komma åt programregister i läget mellan företag.</span><span class="sxs-lookup"><span data-stu-id="4092a-140">This task guide walks you through the process of configuring an ER model mapping and ER format to access application tables in cross-company mode.</span></span>

<span data-ttu-id="4092a-141">Hämta följande filer för att slutföra uppgiftsguiden:</span><span class="sxs-lookup"><span data-stu-id="4092a-141">Download the following files to complete the task guide:</span></span>

- [<span data-ttu-id="4092a-142">Konfiguration av ER-datamodell - CrossCompanyDataAccessModel.xml</span><span class="sxs-lookup"><span data-stu-id="4092a-142">ER model configuration - CrossCompanyDataAccessModel.xml</span></span>](https://go.microsoft.com/fwlink/?linkid=874111)
- [<span data-ttu-id="4092a-143">ER-formatkonfiguration - CrossCompanyDataAccessFormat.xml</span><span class="sxs-lookup"><span data-stu-id="4092a-143">ER format configuration - CrossCompanyDataAccessFormat.xml</span></span>](https://go.microsoft.com/fwlink/?linkid=874111)

---
title: Säkerhetslagring av ER-mallar
description: Det här avsnittet innehåller information om hur du använder säkerhetslagring för elektroniska rapporter (ER) för återställning av mallar.
author: NickSelin
manager: AnnBe
ms.date: 04/29/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-platform
ms.technology: ''
ms.search.form: ERWorkspace, ERSolutionTable
audience: Application User, Developer, IT Pro
ms.reviewer: kfend
ms.custom: 27621
ms.assetid: ''
ms.search.region: Global
ms.author: nselin
ms.search.validFrom: 2019-08-13
ms.dyn365.ops.version: 10.0.5
ms.openlocfilehash: 136a81e661590d7af879e816c1142de85fb72e06
ms.sourcegitcommit: 659375c4cc7f5524cbf91cf6160f6a410960ac16
ms.translationtype: HT
ms.contentlocale: sv-SE
ms.lasthandoff: 12/05/2020
ms.locfileid: "4681410"
---
# <a name="backup-storage-of-er-templates"></a><span data-ttu-id="63c63-103">Säkerhetslagring av ER-mallar</span><span class="sxs-lookup"><span data-stu-id="63c63-103">Backup storage of ER templates</span></span>

[!include [banner](../includes/banner.md)]

<span data-ttu-id="63c63-104">[Elektronisk rapportering (ER) - översikt](general-electronic-reporting.md) gör att affärsanvändare kan konfigurera format för utgående dokument i enlighet med lagkraven för olika länder/regioner.</span><span class="sxs-lookup"><span data-stu-id="63c63-104">The [Electronic reporting (ER) overview](general-electronic-reporting.md) lets business users configure formats for outbound documents according to the legal requirements of various countries and regions.</span></span> <span data-ttu-id="63c63-105">Konfigurerade ER-format kan använda fördefinierade mallar för att skapa utgående dokument i olika format, t.ex. Microsoft Excel arbetsböcker, Microsoft Word dokument eller PDF-dokument.</span><span class="sxs-lookup"><span data-stu-id="63c63-105">Configured ER formats can use predefined templates to generate outbound documents in various formats, such as Microsoft Excel workbooks, Microsoft Word documents, or PDF documents.</span></span> <span data-ttu-id="63c63-106">Mallarna fylls i med data som det konfigurerade dataflöde för genererade dokument kräver.</span><span class="sxs-lookup"><span data-stu-id="63c63-106">The templates are filled with data that the configured dataflow for generated documents requires.</span></span>

<span data-ttu-id="63c63-107">Varje konfigurerat format kan publiceras som en del av en ER-lösning.</span><span class="sxs-lookup"><span data-stu-id="63c63-107">Each configured format can be published as part of an ER solution.</span></span> <span data-ttu-id="63c63-108">Alla ER-lösningar kan exporteras från en instans av Finance and Operations och importeras till annan instans.</span><span class="sxs-lookup"><span data-stu-id="63c63-108">Each ER solution can be exported from one instance of Finance and Operations and imported into another instance.</span></span>

<span data-ttu-id="63c63-109">ER-ramverket använder [Konfigurera dokumenthantering](../../fin-ops/organization-administration/configure-document-management.md) för att behålla de mallar som krävs för den aktuella Finance and Operations-instansen.</span><span class="sxs-lookup"><span data-stu-id="63c63-109">The ER framework uses the [Configure document management](../../fin-ops/organization-administration/configure-document-management.md) to keep the required templates for the current Finance and Operations instance.</span></span> <span data-ttu-id="63c63-110">Beroende på inställningarna för ER-ramverk kan du välja Microsoft Azure blob-lagring eller en Microsoft SharePoint-mapp som den fysiska primära lagringsplatsen för mallar.</span><span class="sxs-lookup"><span data-stu-id="63c63-110">Depending on the settings of the ER framework, Microsoft Azure Blob storage or a Microsoft SharePoint folder can be selected as the physical primary storage location for templates.</span></span> <span data-ttu-id="63c63-111">(Mer information finns i [konfigurera om ER-ramverket (Elektronisk rapportering)](electronic-reporting-er-configure-parameters.md).) DocuValue-registret innehåller en enskild post för varje mall.</span><span class="sxs-lookup"><span data-stu-id="63c63-111">(For more information, see [Configure the Electronic reporting (ER) framework](electronic-reporting-er-configure-parameters.md).) The DocuValue table holds an individual record for each template.</span></span> <span data-ttu-id="63c63-112">I varje post lagrar fältet **AccessInformation** sökvägen till mallfilen som finns på den konfigurerade lagringsplatsen.</span><span class="sxs-lookup"><span data-stu-id="63c63-112">In each record, the **AccessInformation** field stores the path of a template file that is located in the configured storage location.</span></span>

<span data-ttu-id="63c63-113">När du hanterar dina Finance and Operations-instanser kanske du bestämmer dig för att flytta aktuell instans till en annan plats.</span><span class="sxs-lookup"><span data-stu-id="63c63-113">When you manage your Finance and Operations instances, you might decide to migrate the current instance to another location.</span></span> <span data-ttu-id="63c63-114">Du kan till exempel migrera produktionsinstansen till en ny miljö för begränsat läge.</span><span class="sxs-lookup"><span data-stu-id="63c63-114">For example, you might migrate your production instance to a new sandbox environment.</span></span> <span data-ttu-id="63c63-115">Om du konfigurerade ER-ramverket för att lagra mallar i blob-lagring, refererar DocuValue-registret i den nya miljön för begränsat läge till instansen av blob-lagring i produktionsmiljön.</span><span class="sxs-lookup"><span data-stu-id="63c63-115">If you configured the ER framework to store templates in Blob storage, the DocuValue table in the new sandbox environment refers to the instance of Blob storage in the production environment.</span></span> <span data-ttu-id="63c63-116">Den här instansen kan dock inte nås från miljön för begränsat läge eftersom migreringsprocessen inte stöder migrering av artefakter i blob-lagring.</span><span class="sxs-lookup"><span data-stu-id="63c63-116">However, this instance can't be accessed from the sandbox environment, because the migration process doesn't support the migration of artifacts in Blob storage.</span></span> <span data-ttu-id="63c63-117">Om du försöker köra ett ER-format som använder en mall för att generera affärsdokument, uppstår ett undantag och du meddelas om den saknade mallen.</span><span class="sxs-lookup"><span data-stu-id="63c63-117">Therefore, if you try to run an ER format that uses a template to generate business documents, an exception occurs, and you're notified about the missing template.</span></span> <span data-ttu-id="63c63-118">Du kan också använda återställningsverktyget för att ta bort och sedan åter importera konfigurationen för ER-format som innehåller mallen.</span><span class="sxs-lookup"><span data-stu-id="63c63-118">You're also guided to use the ER cleanup tool to delete and then re-import the ER format configuration that contains the template.</span></span> <span data-ttu-id="63c63-119">Eftersom det kan finnas flera ER-format-konfigurationer, kan den här processen ta lång tid.</span><span class="sxs-lookup"><span data-stu-id="63c63-119">Because you might have several ER format configurations, this process can be time consuming.</span></span>

<span data-ttu-id="63c63-120">Lagrings utrymmet för funktionen ER-mallar i säkerhetskopian kan hjälpa dig att göra mallarna så att de alltid är tillgängliga för generering av affärsdokument.</span><span class="sxs-lookup"><span data-stu-id="63c63-120">The Backup storage of ER templates feature can help you make your templates so that they are always available to generate business documents.</span></span>

> [!NOTE]
> <span data-ttu-id="63c63-121">Den här funktionen kan bara användas när ett blob-lagringsutrymme har valts som lagringsplats för ER-mallar.</span><span class="sxs-lookup"><span data-stu-id="63c63-121">This feature can be used only when Blob storage has been selected as the physical storage location for ER templates.</span></span>

## <a name="automated-recovery-and-notification"></a><span data-ttu-id="63c63-122">Automatisk återställning och meddelanden</span><span class="sxs-lookup"><span data-stu-id="63c63-122">Automated recovery and notification</span></span>

<span data-ttu-id="63c63-123">För den här funktionen sparas alla mallar i en ny ER-formatkonfiguration i den aktuella miljön automatiskt på säkerhetskopieringsplatsen för mallar (ERDocuDatabaseStorage databasregister) när följande händelser inträffar:</span><span class="sxs-lookup"><span data-stu-id="63c63-123">For this feature, every template of a new ER format configuration in the current environment is automatically saved to the backup storage location for templates (the ERDocuDatabaseStorage database table) when the following events occur:</span></span>

- <span data-ttu-id="63c63-124">Du importerar en ny konfiguration för ER-format som innehåller en mall.</span><span class="sxs-lookup"><span data-stu-id="63c63-124">You import a new ER format configuration that contains a template.</span></span>
- <span data-ttu-id="63c63-125">Du fyller i utkastversionen av en ER-formatskonfiguration som innehåller en mall.</span><span class="sxs-lookup"><span data-stu-id="63c63-125">You complete the draft version of an ER format configuration that contains a template.</span></span>

<span data-ttu-id="63c63-126">Säkerhetskopior av mallar flyttas till en ny instans av Finance and Operations som en del av programdatabasen.</span><span class="sxs-lookup"><span data-stu-id="63c63-126">Backup copies of templates are migrated to a new instance of Finance and Operations as part of the application database.</span></span>

<span data-ttu-id="63c63-127">Om en mall i ett ER-format krävs för att generera utgående dokument, ska du bearbeta leverantörsbetalningar inklusive genereringen av betalningsavi och kontrollrapporter, till exempel att den obligatoriska mallen inte finns på den primära lagringsplatsen, följande händelser inträffar:</span><span class="sxs-lookup"><span data-stu-id="63c63-127">If a template of an ER format is required for generation of outbound documents, to process vendor payments including generation of payment advice and control reports, for example, but the required template isn't found in the primary storage location, the following events occur:</span></span>

- <span data-ttu-id="63c63-128">Om mallen är tillgänglig på lagringsplatsen för säkerhetskopiorna tas den automatiskt från lagringsplatsen för säkerhetskopian, återställs till den primära lagringsplatsen och används för den aktuella körningen.</span><span class="sxs-lookup"><span data-stu-id="63c63-128">If the template is available in the backup storage location, it is automatically taken from the backup storage location, restored to the primary storage location, and used for the current execution.</span></span>
- <span data-ttu-id="63c63-129">Alla användare som tilldelats rollen **Utvecklare för elektronisk rapportering** eller **Systemadministratör** meddelas om det saknade problemet i åtgärdscentret.</span><span class="sxs-lookup"><span data-stu-id="63c63-129">Every user who is assigned to the **Electronic reporting developer** or **System administrator** role is notified about the missing template issue through the Action center.</span></span> <span data-ttu-id="63c63-130">Meddelandet som visas beror på värdet i parametern **Kör automatiskt procedur för att återställa de brutna mallarna i batch**:</span><span class="sxs-lookup"><span data-stu-id="63c63-130">The message that appears depends on the value of the **Automatically run the procedure of restoring the broken templates in batch** parameter:</span></span>

    - <span data-ttu-id="63c63-131">Om den här parametern har värdet **av** rekommenderar meddelandet att du startar batchprocessen så att liknande problem korrigeras automatiskt för andra konfigurationsmallar för ER-format.</span><span class="sxs-lookup"><span data-stu-id="63c63-131">If this parameter is set to **Off**, the message recommends that you start the batch process to automatically fix similar issues for other ER format configuration templates.</span></span> <span data-ttu-id="63c63-132">Meddelandet innehåller en länk som du kan använda för att starta batchprocessen.</span><span class="sxs-lookup"><span data-stu-id="63c63-132">The message includes a link that you can use to start the batch process.</span></span>
    - <span data-ttu-id="63c63-133">Om den här parametern anges till **På** visas ett meddelande om ett problem med ärende som saknas har upptäckts och att en ny batchprocess **återställa de brutna mallarna från intern säkerhetskopia av databas** har planerats automatiskt.</span><span class="sxs-lookup"><span data-stu-id="63c63-133">If this parameter is set to **On**, the message notifies you that a missing templates issue has been discovered, and that a new batch process, **Restore broken templates from internal database backup**, has been automatically scheduled.</span></span> <span data-ttu-id="63c63-134">Den här batchprocessen korrigerar automatiskt liknande problem för andra mallar.</span><span class="sxs-lookup"><span data-stu-id="63c63-134">This batch process will automatically fix similar issues for other templates.</span></span>

<span data-ttu-id="63c63-135">För att konfigurera parametern **Kör automatiskt procedur för att återställa de brutna mallarna i batch** slutför du följande steg:</span><span class="sxs-lookup"><span data-stu-id="63c63-135">To set up the **Automatically run the procedure of restoring the broken templates in batch** parameter, complete the following steps:</span></span>

1. <span data-ttu-id="63c63-136">I Finance and Operations öppnar du sidan **Organisationsadministration \> Elektronisk rapportering \> Konfigurationer**.</span><span class="sxs-lookup"><span data-stu-id="63c63-136">In Finance and Operations, open the **Organization administration \> Electronic reporting \> Configurations page**.</span></span>
2. <span data-ttu-id="63c63-137">På sidan **Konfigurationer** i åtgärdsfönstret, på fliken **Konfigurationer** i gruppen **Avancerad inställningar** markerar du **Använd parametrar**.</span><span class="sxs-lookup"><span data-stu-id="63c63-137">On the **Configurations** page, on the Action Pane, on the **Configurations** tab, in the **Advanced settings** group, select **User parameters**.</span></span>
3. <span data-ttu-id="63c63-138">I dialogrutan **användarparametrar** anger du det obligatoriska värdet för parametern **Kör automatiskt procedur för att återställa de brutna mallarna i batch**.</span><span class="sxs-lookup"><span data-stu-id="63c63-138">In the **User parameters** dialog box, set the required value for the **Automatically run the procedure of restoring the broken templates in batch** parameter.</span></span>

> [!NOTE]
> <span data-ttu-id="63c63-139">Den här parametern definieras som programanvändare och protokollförda företag.</span><span class="sxs-lookup"><span data-stu-id="63c63-139">This parameter is defined as application user and logged company specific.</span></span>

![Sidan ER-konfigurationer](./media/GER-BackupTemplates-1.png)

<span data-ttu-id="63c63-141">I bilden nedan visas ett exempel på det meddelande som visas när parametern **Kör automatiskt procedur för att återställa de brutna mallarna i batch** anges till **på.**</span><span class="sxs-lookup"><span data-stu-id="63c63-141">The following illustration shows an example of the message that appears when the **Automatically run the procedure of restoring the broken templates in batch** parameter is set to **On**.</span></span>

![Sida för leverantörsbetalningsjournal](./media/GER-BackupTemplates-2.png)

<span data-ttu-id="63c63-143">Bilden nedan visar hur du batchprocessen **Återställ brutna mallar från intern säkerhetskopia av databas** på sidan **Batch-jobb**.</span><span class="sxs-lookup"><span data-stu-id="63c63-143">The following illustration shows the **Restore broken templates from internal database backup** batch process on the **Batch job** page.</span></span>

![Sidan Batchjobb](./media/GER-BackupTemplates-3.png)

<span data-ttu-id="63c63-145">Körningsloggen för slutförd batch-process **Återställ brutna mallar från intern säkerhetskopia av databas** omfattar information om mallarna som har återställts från säkerhetskopians lagringsplats till den primära lagringsplatsen.</span><span class="sxs-lookup"><span data-stu-id="63c63-145">The execution log of the completed **Restore broken templates from internal database backup** batch process includes information about the templates that have been restored from the backup storage location to the primary storage location.</span></span>

![Sidan för historik över batchjobb](./media/GER-BackupTemplates-4.png)

<span data-ttu-id="63c63-147">Som standard är processen för automatisk generering av säkerhetskopior av mallar i inställningar för ER-format aktiverad.</span><span class="sxs-lookup"><span data-stu-id="63c63-147">By default, the process of automatically creating backup copies of templates that reside in ER format configurations is turned on.</span></span> <span data-ttu-id="63c63-148">Om du vill sluta göra säkerhetskopior av mallar anger du alternativet **Sluta skapa säkerhetskopior av mall** till **Ja** på fliken **bifogade filer** på sidan **parametrar för elektronisk rapportering**.</span><span class="sxs-lookup"><span data-stu-id="63c63-148">To stop making backup copies of templates, set the **Stop making backup copies of template** option to **Yes** on the **Attachments** tab of the **Electronic reporting parameters** page.</span></span> <span data-ttu-id="63c63-149">Du kan öppna den här sidan från arbetsytan **elektronisk rapportering**.</span><span class="sxs-lookup"><span data-stu-id="63c63-149">You can open this page from the **Electronic reporting** workspace.</span></span>

<span data-ttu-id="63c63-150">Om du ställer in alternativet **sluta skapa säkerhets kopior av mallar** till **ja** och inte vill behålla de säkerhets kopior som tidigare gjorts för mallar väljer du **rensa säkerhets kopierings lagring** på sidan **parametrar för elektronisk rapportering**.</span><span class="sxs-lookup"><span data-stu-id="63c63-150">If you set the **Stop making backup copies of templates** option to **Yes** and don't want to keep the backup copies that were previously made of templates, select **Clean up backup storage** on the **Electronic reporting parameters** page.</span></span>

<span data-ttu-id="63c63-151">Om du uppgraderade miljön till Finance and Operations version 10.0.5 (oktober 2019) och vill migrera till en ny miljö som innehåller körbara ER-formatkonfigurationer, väljer du **Fyll i säkerhetslagring** på sidan **Parametrar för elektronisk rapportering** innan migreringen sker.</span><span class="sxs-lookup"><span data-stu-id="63c63-151">If you upgraded your environment to Finance and Operations version 10.0.5 (October 2019) and want to migrate to a new environment that includes ER format configurations that can be run, select **Fill in backup storage** on the **Electronic reporting parameters** page before the migration occurs.</span></span> <span data-ttu-id="63c63-152">Med den här knappen börjar du skapa säkerhetskopior av alla tillgängliga mallar, så att de kan lagras i lagringsplatsen för ER-säkerhetskopiering för mallar.</span><span class="sxs-lookup"><span data-stu-id="63c63-152">This button starts the process of making backup copies of all available templates, so that they can be stored in the ER backup storage location for templates.</span></span>

![Sida för parametrar för elektronisk rapportering](./media/GER-BackupTemplates-5.png)

## <a name="manual-recovery"></a><span data-ttu-id="63c63-154">Manuell återställning</span><span class="sxs-lookup"><span data-stu-id="63c63-154">Manual recovery</span></span>

<span data-ttu-id="63c63-155">Gå till **Organisationsadministration** \> **Elektronisk rapportering** \> **Återställ skadade mallar** för att manuellt initiera processen att återställa ER-mallar från säkerhetskopians lagringsplats till den primära lagringsplatsen.</span><span class="sxs-lookup"><span data-stu-id="63c63-155">Go to **Organization administration** \> **Electronic reporting** \> **Restore broken templates** to manually initiate the process of restoring ER templates from the backup storage location to the primary storage location.</span></span> <span data-ttu-id="63c63-156">Innan du startar den här processen kan du på sidan **Återställ skadade mallar** ange om den ska utföras interaktivt, eller om du vill att batchprocessen ska schemaläggas för detta.</span><span class="sxs-lookup"><span data-stu-id="63c63-156">Before you start this process, on the **Restore broken templates** page you can specify whether it will be performed interactively, or the batch process will be scheduled for this.</span></span>

## <a name="supported-deployments"></a><span data-ttu-id="63c63-157">Distributioner som stöds</span><span class="sxs-lookup"><span data-stu-id="63c63-157">Supported deployments</span></span>

<span data-ttu-id="63c63-158">I Finance and Operations version 10.0.5 är säkerhetslagring av funktionen ER-mallar endast tillgänglig i molndistributioner.</span><span class="sxs-lookup"><span data-stu-id="63c63-158">In Finance and Operations version 10.0.5, the Backup storage of ER templates feature is available only in cloud deployments.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="63c63-159">Ytterligare resurser</span><span class="sxs-lookup"><span data-stu-id="63c63-159">Additional resources</span></span>

[<span data-ttu-id="63c63-160">Översikt över elektronisk rapportering (ER)</span><span class="sxs-lookup"><span data-stu-id="63c63-160">Electronic reporting (ER) overview</span></span>](general-electronic-reporting.md)

[<span data-ttu-id="63c63-161">Konfigurera ramverket för elektronisk rapportering (ER)</span><span class="sxs-lookup"><span data-stu-id="63c63-161">Configure the Electronic reporting (ER) framework</span></span>](electronic-reporting-er-configure-parameters.md)

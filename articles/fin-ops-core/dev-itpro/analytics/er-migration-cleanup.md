---
title: Rensning av ER-migrering
description: I det här avsnittet beskrivs hur du kan använda funktionen för rensning av ER-migrering för att lösa problem med ER-mallar.
author: NickSelin
manager: AnnBe
ms.date: 04/29/2020
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: ERSolutionTable, ERWorkspace, ERParameters, ERMigrationCleanup
audience: Application User, Developer, IT Pro
ms.reviewer: kfend
ms.custom: ''
ms.assetid: ''
ms.search.region: Global
ms.author: nselin
ms.search.validFrom: 2018-01-01
ms.dyn365.ops.version: AX 8.0.0
ms.openlocfilehash: b09afc30c401e2dccfc4114261dc5e713c8c470c
ms.sourcegitcommit: 6cb174d1ec8b55946dca4db03d6a3c3f4c6fa2df
ms.translationtype: HT
ms.contentlocale: sv-SE
ms.lasthandoff: 03/09/2021
ms.locfileid: "5565525"
---
# <a name="er-migration-cleanup"></a><span data-ttu-id="b1ec2-103">Rensning av ER-migrering</span><span class="sxs-lookup"><span data-stu-id="b1ec2-103">ER migration cleanup</span></span> 

[!include[banner](../includes/banner.md)]

<span data-ttu-id="b1ec2-104">När du hanterar dina ekonomiinstanser kanske du bestämmer dig för att flytta din aktuella instans till en annan plats.</span><span class="sxs-lookup"><span data-stu-id="b1ec2-104">When you manage your Finance instances, you might decide to migrate your current instance to another location.</span></span> <span data-ttu-id="b1ec2-105">Du kan till exempel migrera produktionsinstansen till en ny miljö för begränsat läge.</span><span class="sxs-lookup"><span data-stu-id="b1ec2-105">For example, you might migrate your production instance to a new sandbox environment.</span></span> <span data-ttu-id="b1ec2-106">Om du konfigurerade ER-ramverket för att lagra mallar i Microsoft Azure blob-lagring, refererar **DocuValue**-registret i den nya miljön för begränsat läge till instansen av blob-lagring i produktionsmiljön.</span><span class="sxs-lookup"><span data-stu-id="b1ec2-106">If you configured the Electronic reporting (ER) framework to store templates in Microsoft Azure Blob storage, the **DocuValue** table in the new sandbox environment refers to the instance of Blob storage in the production environment.</span></span> <span data-ttu-id="b1ec2-107">Den här instansen kan dock inte nås från miljön för begränsat läge, eftersom migreringsprocessen inte stöder migrering av artefakter i blob-lagring.</span><span class="sxs-lookup"><span data-stu-id="b1ec2-107">However, this instance can't be accessed from the sandbox environment because the migration process doesn't support the migration of artifacts in Blob storage.</span></span> <span data-ttu-id="b1ec2-108">I stället förväntas att du i den nya miljön för begränsat läge refererar till blob-lagringsplatsen i miljön för begränsat läge som ännu inte har tillgång till ER-mallar.</span><span class="sxs-lookup"><span data-stu-id="b1ec2-108">Rather, it's expected that in the new sandbox environment, you refer to the instance of Blob storage in the sandbox environment that does not yet obtain the ER templates.</span></span>

<span data-ttu-id="b1ec2-109">Om du försöker köra ett ER-format som använder en mall för att generera affärsdokument, uppstår ett undantag och du meddelas om den saknade mallen.</span><span class="sxs-lookup"><span data-stu-id="b1ec2-109">If you try to run an ER format that uses a template to generate business documents, an exception occurs, and you're notified about the missing template.</span></span> <span data-ttu-id="b1ec2-110">Du kan också använda alternativet för rensning av ER-migrering för att radera och sedan åter importera konfigurationen för ER-format som innehåller mallen.</span><span class="sxs-lookup"><span data-stu-id="b1ec2-110">You're also guided to use the ER migration cleanup option to delete and then re-import the ER format configuration that contains the template.</span></span>

<span data-ttu-id="b1ec2-111">[![Köra ett ER-format](./media/er-migration-cleanup-run.png)](./media/er-migration-cleanup-run.png)</span><span class="sxs-lookup"><span data-stu-id="b1ec2-111">[![Running an ER format](./media/er-migration-cleanup-run.png)](./media/er-migration-cleanup-run.png)</span></span>

<span data-ttu-id="b1ec2-112">Du får ett liknande felmeddelande om du navigerar till sidan **Konfigurationer** (**Organisationsadministration** \> **Elektronisk rapportering** \> **Konfigurationer**) och i konfigurationsträdet försöker radera en ER-formatskonfiguration som använder en mall.</span><span class="sxs-lookup"><span data-stu-id="b1ec2-112">You will receive a similar error if you navigate to the **Configurations** page (**Organization administration** \> **Electronic reporting** \> **Configurations**) and in the configurations tree, try to delete an ER format configuration that uses a template.</span></span>

<span data-ttu-id="b1ec2-113">[![Radera ett ER-format](./media/er-migration-cleanup-delete.png)](./media/er-migration-cleanup-delete.png)</span><span class="sxs-lookup"><span data-stu-id="b1ec2-113">[![Deletion an ER format](./media/er-migration-cleanup-delete.png)](./media/er-migration-cleanup-delete.png)</span></span>

<span data-ttu-id="b1ec2-114">Gör på följande sätt för att lösa problem med ER-mallar som du inte kan komma åt.</span><span class="sxs-lookup"><span data-stu-id="b1ec2-114">Complete the following steps to resolve issues with ER templates that you are unable to access.</span></span>

1.  <span data-ttu-id="b1ec2-115">Gå till sidan **Organisationsadminitration** \> **Periodisk** \> **Rensning av migrering**.</span><span class="sxs-lookup"><span data-stu-id="b1ec2-115">Go to **Organization administration** \> **Periodic** \> **Migration cleanup** page.</span></span>
2.  <span data-ttu-id="b1ec2-116">Välj en ER-formatskonfiguration som inte går att köra eller ta bort.</span><span class="sxs-lookup"><span data-stu-id="b1ec2-116">Select an ER format configuration that can’t be executed or deleted.</span></span>
3.  <span data-ttu-id="b1ec2-117">Välj **Ta bort**.</span><span class="sxs-lookup"><span data-stu-id="b1ec2-117">Select **Delete**.</span></span>
4.  <span data-ttu-id="b1ec2-118">Bekräfta radering av den valda ER-formatkonfigurationen.</span><span class="sxs-lookup"><span data-stu-id="b1ec2-118">Confirm the deletion of the selected ER format configuration.</span></span>
5.  <span data-ttu-id="b1ec2-119">[Importera](download-electronic-reporting-configuration-lcs.md) den raderade ER-formatkonfigurationen till den aktuella ekonomiinstansen.</span><span class="sxs-lookup"><span data-stu-id="b1ec2-119">[Import](download-electronic-reporting-configuration-lcs.md) the deleted ER format configuration to the current Finance instance.</span></span>

## <a name="applicability"></a><span data-ttu-id="b1ec2-120">Tillämplighet</span><span class="sxs-lookup"><span data-stu-id="b1ec2-120">Applicability</span></span>

> <span data-ttu-id="b1ec2-121">[Viktigt] Alternativet **Rensning av migrering** är endast avsett för ER-formatkonfigurationer som innehåller icke-tillgängliga ER-mallar.</span><span class="sxs-lookup"><span data-stu-id="b1ec2-121">[Important] The **Migration cleanup** option is targeted only for ER format configurations that contain non-accessible ER templates.</span></span> <span data-ttu-id="b1ec2-122">När du tar bort en ER-formatkonfiguration med alternativet **Rensning av migrering**, raderar ER de mallar som är relaterade till konfigurationsartefakterna i den enda programdatabasen.</span><span class="sxs-lookup"><span data-stu-id="b1ec2-122">When you delete an ER format configuration by using the **Migration cleanup** option, ER deletes the templates that are related to the configuration artifacts in the only application database.</span></span> <span data-ttu-id="b1ec2-123">Det går inte att verifiera att lämpliga fysiska filer finns i blob-lagring.</span><span class="sxs-lookup"><span data-stu-id="b1ec2-123">The existence of the appropriate physical files in Blob storage are not validated.</span></span> <span data-ttu-id="b1ec2-124">I stället förutsätts det att det inte finns några.</span><span class="sxs-lookup"><span data-stu-id="b1ec2-124">Instead, it is assumed that there are none.</span></span> <span data-ttu-id="b1ec2-125">Därför bör du inte använda alternativet **Rensning av migrering** i stället för alternativet för radering av ER-konfiguration på sidan **Konfigurationer**.</span><span class="sxs-lookup"><span data-stu-id="b1ec2-125">Therefore, do not use the **Migration cleanup** option as an alternative to the ER configuration deletion option on the **Configurations** page.</span></span> <span data-ttu-id="b1ec2-126">Använd alternativet **Rensning av migrering** enbart när alternativet för radering av ER-konfiguration på sidan **Konfigurationer** inte fungerar.</span><span class="sxs-lookup"><span data-stu-id="b1ec2-126">Use the **Migration cleanup** option only when the ER configuration deletion option on the **Configurations** page failed.</span></span>
>
> <span data-ttu-id="b1ec2-127">Om du raderar en ER-formatkonfiguration med alternativet **Rensning av migrering** när den refererade mallen finns i blob-lagring så raderar du enbart konfigurationsartefakterna i programdatabasen.</span><span class="sxs-lookup"><span data-stu-id="b1ec2-127">If you use the **Migration cleanup** option to delete an ER format configuration when the referred template is available in the Blob storage, you only delete related configuration artifacts in the application database.</span></span> <span data-ttu-id="b1ec2-128">Den fysiska filen för mallen i blob-lagringen finns kvar.</span><span class="sxs-lookup"><span data-stu-id="b1ec2-128">The physical file of the template in the Blob storage remains.</span></span> <span data-ttu-id="b1ec2-129">Filöverskrivning i blob-lagring är inte längre tillåten.</span><span class="sxs-lookup"><span data-stu-id="b1ec2-129">File overwriting in Blob storage is no longer allowed.</span></span> <span data-ttu-id="b1ec2-130">Mer information finns i [KB4557217](https://fix.lcs.dynamics.com/Issue/Details?kb=4557217).</span><span class="sxs-lookup"><span data-stu-id="b1ec2-130">For more information, see [KB4557217](https://fix.lcs.dynamics.com/Issue/Details?kb=4557217).</span></span> <span data-ttu-id="b1ec2-131">Dessutom kan du inte längre återimportera konfigurationerna som raderats med hjälp av rensning av migrering i den här miljön.</span><span class="sxs-lookup"><span data-stu-id="b1ec2-131">Additionally, you will no longer be able to re-import the configurations deleted by using the Migration cleanup in this environment.</span></span> <span data-ttu-id="b1ec2-132">För att lösa det här problemet måste du hitta motsvarande fil i blob-lagring och manuellt radera den.</span><span class="sxs-lookup"><span data-stu-id="b1ec2-132">To resolve this issue, you need to find the corresponding file in Blob storage and manually delete it.</span></span>

<span data-ttu-id="b1ec2-133">[![Importera ett ER-format](./media/er-migration-cleanup-import.png)](./media/er-migration-cleanup-import.png)</span><span class="sxs-lookup"><span data-stu-id="b1ec2-133">[![Importing an ER format](./media/er-migration-cleanup-import.png)](./media/er-migration-cleanup-import.png)</span></span>

<span data-ttu-id="b1ec2-134">Ett liknande problem kan uppstå om du migrerar programinstansen till en annan plats som har använts som migreringsmål mer än en gång och för vilken blob-lagring redan innehåller ER-mallfiler.</span><span class="sxs-lookup"><span data-stu-id="b1ec2-134">A similar issue may occur if you migrate your application instance to another location that has been used as a migration target more than once and for which the Blob storage already contains ER template files.</span></span>

<span data-ttu-id="b1ec2-135">Eftersom du kan ha flera ER-formatkonfigurationer, kan den här processen ta lång tid.</span><span class="sxs-lookup"><span data-stu-id="b1ec2-135">Because you can have several ER format configurations, this process can be time consuming.</span></span> <span data-ttu-id="b1ec2-136">Därför rekommenderas du att använda funktionen [Säkerhetslagring av ER-mallar](er-backup-storage-templates.md) för att automatiskt återställa mallar med brutna referenser.</span><span class="sxs-lookup"><span data-stu-id="b1ec2-136">Therefore, using the [Backup storage of ER templates](er-backup-storage-templates.md) feature to automatically recover templates with broken references is preferred.</span></span>


[!INCLUDE[footer-include](../../../includes/footer-banner.md)]
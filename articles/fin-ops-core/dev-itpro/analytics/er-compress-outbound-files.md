---
title: Komprimera stora dokument som genereras i elektronisk rapportering
description: Det här avsnittet innehåller information om hur du komprimerar stora dokument som genereras av ett format för elektronisk rapportering (ER).
author: NickSelin
manager: kfend
ms.date: 09/11/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-platform
ms.technology: ''
ms.search.form: EROperationDesigner, ERFormatDestinationTable
audience: Application User, IT Pro
ms.reviewer: kfend
ms.search.scope: Core, Operations
ms.custom: 58771
ms.assetid: ''
ms.search.region: Global
ms.author: nselin
ms.search.validFrom: 2020-01-01
ms.dyn365.ops.version: AX 10.0.9
ms.openlocfilehash: ef024185c4654804f6f260a43c1bf294b33c10e2
ms.sourcegitcommit: 6e290b0d3aeedd0e234ac4f1df92b1b9afd6fccc
ms.translationtype: HT
ms.contentlocale: sv-SE
ms.lasthandoff: 09/22/2020
ms.locfileid: "3829689"
---
# <a name="compress-large-documents-that-are-generated-in-electronic-reporting"></a><span data-ttu-id="e9482-103">Komprimera stora dokument som genereras i elektronisk rapportering</span><span class="sxs-lookup"><span data-stu-id="e9482-103">Compress large documents that are generated in Electronic reporting</span></span> 

[!include [banner](../includes/banner.md)]

<span data-ttu-id="e9482-104">Du kan använda det [ramverket för elektronisk rapportering (ER)](general-electronic-reporting.md) för att konfigurera en lösning som hämtar transaktionsdata för att generera ett utgående dokument.</span><span class="sxs-lookup"><span data-stu-id="e9482-104">You can use the [Electronic reporting (ER) framework](general-electronic-reporting.md) to configure a solution that fetches transactional data to generate an outbound document.</span></span> <span data-ttu-id="e9482-105">Det genererade dokumentet kan vara ganska stort.</span><span class="sxs-lookup"><span data-stu-id="e9482-105">This generated document might be quite large.</span></span> <span data-ttu-id="e9482-106">När den här typen av dokument genereras [används AOS-minnet (programobjektservern)](https://docs.microsoft.com/dynamics365/fin-ops-core/dev-itpro/dev-tools/access-instances#location-of-packages-source-code-and-other-aos-configurations) för att förvara det.</span><span class="sxs-lookup"><span data-stu-id="e9482-106">When this type of document is generated, the [Application Object Server (AOS)](https://docs.microsoft.com/dynamics365/fin-ops-core/dev-itpro/dev-tools/access-instances#location-of-packages-source-code-and-other-aos-configurations) memory is used to hold it.</span></span> <span data-ttu-id="e9482-107">Vid något tillfälle måste dokumentet hämtas från din Microsoft Dynamics 365 Finance-app.</span><span class="sxs-lookup"><span data-stu-id="e9482-107">At some point, the document must then be downloaded from your Microsoft Dynamics 365 Finance application.</span></span> <span data-ttu-id="e9482-108">För närvarande är den maximala storleken för ett enstaka dokument som genereras i ER till 2 gigabyte (GB).</span><span class="sxs-lookup"><span data-stu-id="e9482-108">Currently, the maximum size of a single document that is generated in ER is limited to 2 gigabytes (GB).</span></span> <span data-ttu-id="e9482-109">Dessutom [begränsar](https://fix.lcs.dynamics.com/Issue/Details?bugId=489291) Finance för närvarande storleken på en hämtad fil till 1 GB.</span><span class="sxs-lookup"><span data-stu-id="e9482-109">Additionally, Finance currently [limits](https://fix.lcs.dynamics.com/Issue/Details?bugId=489291) the size of a downloaded file to 1 GB.</span></span> <span data-ttu-id="e9482-110">Därför måste du konfigurera en ER-lösning som minskar sannolikheten för att dessa begränsningar överskrids och att du får undantaget **Strömmen var för lång**, eller som **Överfyllnad eller underfyllnad i den aritmetiska operationen**.</span><span class="sxs-lookup"><span data-stu-id="e9482-110">Therefore, you must configure an ER solution that reduces the likelihood that these limitations will be exceeded, and that you will receive a **Stream was too long** or **Overflow or underflow in the arithmetic operation** exception.</span></span>

<span data-ttu-id="e9482-111">När du konfigurerar en lösning kan du justera ditt ER-format i operationsdesigner genom att lägga till ett rotelement i typen **Mapp** för att komprimera innehållet som genereras av något av dess kapslade element.</span><span class="sxs-lookup"><span data-stu-id="e9482-111">When you configure a solution, you can adjust your ER format in the Operations designer by adding a root element of the **Folder** type to compress the content that is generated by any of its nested elements.</span></span> <span data-ttu-id="e9482-112">Komprimeringen fungerar "i rätt tid", så att högsta minnesanvändning och storleken på den fil som ska hämtas kan minskas.</span><span class="sxs-lookup"><span data-stu-id="e9482-112">Compression works "just in time," so that peak memory usage and the size of the file that will be downloaded can be reduced.</span></span>

> [!NOTE]
> <span data-ttu-id="e9482-113">Filkomprimering tar ytterligare en andel CPU-användning.</span><span class="sxs-lookup"><span data-stu-id="e9482-113">File compression takes an additional percentage of CPU usage.</span></span>

<span data-ttu-id="e9482-114">Om du vill veta mer om den här metoden slutför du exemplet i det här avsnittet.</span><span class="sxs-lookup"><span data-stu-id="e9482-114">For more information about this approach, complete the example in this topic.</span></span>

## <a name="example-compress-an-outbound-document"></a><span data-ttu-id="e9482-115">Exempel: komprimera ett utgående dokument</span><span class="sxs-lookup"><span data-stu-id="e9482-115">Example: Compress an outbound document</span></span>

<span data-ttu-id="e9482-116">I det här exemplet visas hur en användare som tilldelats rollen **Systemadministratör** eller **Konsult för funktionen för elektronisk rapportering** kan konfigurera ett ER-format för att komprimera ett genererat dokument.</span><span class="sxs-lookup"><span data-stu-id="e9482-116">This example shows how a user who is assigned to the **System administrator** or **Electronic reporting functional consultant** role can configure an ER format to compress a generated document.</span></span>

### <a name="prerequisites"></a><span data-ttu-id="e9482-117">Förutsättningar</span><span class="sxs-lookup"><span data-stu-id="e9482-117">Prerequisites</span></span>

<span data-ttu-id="e9482-118">Innan du slutför procedurerna i detta ämne måste följande steg vara slutförda.</span><span class="sxs-lookup"><span data-stu-id="e9482-118">Before you complete the procedures in this topic, the following steps must be completed.</span></span>

1. <span data-ttu-id="e9482-119">[Aktivera en konfigurationsprovider](er-defer-xml-element.md#activate-a-configuration-provider).</span><span class="sxs-lookup"><span data-stu-id="e9482-119">[Activate a configuration provider](er-defer-xml-element.md#activate-a-configuration-provider).</span></span>
2. <span data-ttu-id="e9482-120">[Importera ER-exempelkonfigurationer](er-defer-xml-element.md#import-the-sample-er-configurations).</span><span class="sxs-lookup"><span data-stu-id="e9482-120">[Import the sample ER configurations](er-defer-xml-element.md#import-the-sample-er-configurations).</span></span>
3. <span data-ttu-id="e9482-121">[Granska det importerade formatet](er-defer-xml-element.md#review-the-imported-format).</span><span class="sxs-lookup"><span data-stu-id="e9482-121">[Review the imported format](er-defer-xml-element.md#review-the-imported-format).</span></span>

> [!NOTE]
> <span data-ttu-id="e9482-122">För närvarande startar formatstrukturen från elementet **rapport** för typen **Fil** och innehåller XML-element.</span><span class="sxs-lookup"><span data-stu-id="e9482-122">Currently, the format structure starts from the **Report** element of the **File** type and contains XML elements.</span></span> <span data-ttu-id="e9482-123">Därför kommer ett utgående dokument att genereras i XML-format och ingen komprimering används.</span><span class="sxs-lookup"><span data-stu-id="e9482-123">Therefore, an outbound document will be generated in XML format, and no compression will be used.</span></span>

### <a name="generate-an-er-format-to-get-an-uncompressed-document"></a><span data-ttu-id="e9482-124">Generera ett ER-format för att hämta ett okomprimerat dokument</span><span class="sxs-lookup"><span data-stu-id="e9482-124">Generate an ER format to get an uncompressed document</span></span>

1. <span data-ttu-id="e9482-125">[Kör det importerade formatet](er-defer-xml-element.md#run-the-imported-format).</span><span class="sxs-lookup"><span data-stu-id="e9482-125">[Run the imported format](er-defer-xml-element.md#run-the-imported-format).</span></span>
2. <span data-ttu-id="e9482-126">Observera att storleken på det genererade dokumentet i XML-format är 3 kilobyte (KB).</span><span class="sxs-lookup"><span data-stu-id="e9482-126">Notice that the size of the generated document in XML format is 3 kilobytes (KB).</span></span>

    ![Förhandsversion av det okomprimerade utgående dokumentet](./media/er-compress-outbound-files1.png)

### <a name="modify-the-format-to-compress-the-generated-output"></a><span data-ttu-id="e9482-128">Ändra formatet för att komprimera genererade utdata</span><span class="sxs-lookup"><span data-stu-id="e9482-128">Modify the format to compress the generated output</span></span>

1. <span data-ttu-id="e9482-129">Gå till **Organisationsadministration** \> **Elektronisk rapportering** \> **Konfigurationer**.</span><span class="sxs-lookup"><span data-stu-id="e9482-129">Go to **Organization administration** \> **Electronic reporting** \> **Configurations**.</span></span>
2. <span data-ttu-id="e9482-130">På sidan **konfigurationer** i konfigurationsträdet väljer du artikeln **Modell för att lära dig uppskjutna element**.</span><span class="sxs-lookup"><span data-stu-id="e9482-130">On the **Configurations** page, in the configuration tree, expand **Model to learn deferred elements**.</span></span>
3. <span data-ttu-id="e9482-131">Välj konfigurationen av **Format för att lära dig uppskjutna XML-element**.</span><span class="sxs-lookup"><span data-stu-id="e9482-131">Select the **Format to learn deferred XML elements** configuration.</span></span>
4. <span data-ttu-id="e9482-132">Välj **Designer** för att ändra formatstrukturen.</span><span class="sxs-lookup"><span data-stu-id="e9482-132">Select **Designer** to modify the format structure.</span></span>
5. <span data-ttu-id="e9482-133">På sidan **Formatdesigner** på fliken **Format**, välj **Lägg till rot** för att lägga till rotformatelement.</span><span class="sxs-lookup"><span data-stu-id="e9482-133">On the **Format designer** page, on the **Format** tab, select **Add root** to add a root format element.</span></span>
6. <span data-ttu-id="e9482-134">I dialogrutan **Lägg till** välj **Gemensam\\Mapp**.</span><span class="sxs-lookup"><span data-stu-id="e9482-134">In the **Add** dialog box, select **Common\\Folder**.</span></span>
7. <span data-ttu-id="e9482-135">Klicka på **OK** för att bekräfta att det nya rotelementet ska läggas till.</span><span class="sxs-lookup"><span data-stu-id="e9482-135">Select **OK** to confirm the addition of the new root element.</span></span>
8. <span data-ttu-id="e9482-136">Välj **Spara**.</span><span class="sxs-lookup"><span data-stu-id="e9482-136">Select **Save**.</span></span>

> [!NOTE]
> <span data-ttu-id="e9482-137">Formatstrukturen börjar med element av typen **Mapp**.</span><span class="sxs-lookup"><span data-stu-id="e9482-137">The format structure starts from the element of the **Folder** type.</span></span> <span data-ttu-id="e9482-138">Det här elementet genererar utdata som en komprimerad fil (zip).</span><span class="sxs-lookup"><span data-stu-id="e9482-138">This element will generate output as a compressed (zip) file.</span></span> <span data-ttu-id="e9482-139">När ett dokument som genereras av elementet **rapport** placeras i en utgående zip-fil, komprimeras dess innehåll för att minska storleken på den utgående filen.</span><span class="sxs-lookup"><span data-stu-id="e9482-139">When a document that is generated by the **Report** element is put in an outbound zip file, its content will be compressed to reduce the size of the outbound file.</span></span>

### <a name="generate-an-er-format-to-get-a-compressed-document"></a><span data-ttu-id="e9482-140">Generera ett ER-format för att hämta ett komprimerat dokument</span><span class="sxs-lookup"><span data-stu-id="e9482-140">Generate an ER format to get a compressed document</span></span>

1. <span data-ttu-id="e9482-141">Välj **Formatdesigner** på sidan **Kör**.</span><span class="sxs-lookup"><span data-stu-id="e9482-141">On the **Format designer** page, select **Run**.</span></span>
2. <span data-ttu-id="e9482-142">Hämta zip-filen som webbläsaren erbjuder och öppna den för granskning.</span><span class="sxs-lookup"><span data-stu-id="e9482-142">Download the zip file that the web browser offers, and open it for review.</span></span>
3. <span data-ttu-id="e9482-143">Observera att storleken på det genererade dokumentet i ZIP-format är 1 KB.</span><span class="sxs-lookup"><span data-stu-id="e9482-143">Notice that the size of the generated document in ZIP format is 1 KB.</span></span>

    > [!NOTE] 
    > <span data-ttu-id="e9482-144">Komprimeringsförhållandet för XML-filen som den här zip-filen innehåller är 87 procent.</span><span class="sxs-lookup"><span data-stu-id="e9482-144">The compression ratio of the XML file that this zip file holds is 87 percent.</span></span> <span data-ttu-id="e9482-145">Komprimeringsförhållandet beror på vilka data som komprimeras.</span><span class="sxs-lookup"><span data-stu-id="e9482-145">The compression ratio depends on the data that is being compressed.</span></span>

    ![Förhandsversion av det komprimerade utgående dokumentet](./media/er-compress-outbound-files2.png)

> [!NOTE]
> <span data-ttu-id="e9482-147">Om ER [destinationen](electronic-reporting-destinations.md) har konfigurerats för det formatelement som genererar utdata (elementet **rapport** i det här exemplet), kommer komprimeringen av utdata att kringgås.</span><span class="sxs-lookup"><span data-stu-id="e9482-147">If the ER [destination](electronic-reporting-destinations.md) is configured for the format element that generates output (the **Report** element in this example), compression of the output will be bypassed.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="e9482-148">Ytterligare resurser</span><span class="sxs-lookup"><span data-stu-id="e9482-148">Additional resources</span></span>

[<span data-ttu-id="e9482-149">Översikt över elektronisk rapportering (ER)</span><span class="sxs-lookup"><span data-stu-id="e9482-149">Electronic reporting (ER) overview</span></span>](general-electronic-reporting.md)

[<span data-ttu-id="e9482-150">Destinationer för elektronisk rapportering (ER)</span><span class="sxs-lookup"><span data-stu-id="e9482-150">Electronic reporting (ER) destinations</span></span>](electronic-reporting-destinations.md)

[<span data-ttu-id="e9482-151">Skjuta upp körningen av XML-element i ER-format</span><span class="sxs-lookup"><span data-stu-id="e9482-151">Defer the execution of XML elements in ER formats</span></span>](er-defer-xml-element.md)

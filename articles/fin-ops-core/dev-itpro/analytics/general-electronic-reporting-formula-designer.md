---
title: Formeldesigner i elektronisk rapportering (ER)
description: Det här avsnittet innehåller information om hur du använder formeldesignern i elektronisk rapportering (ER).
author: NickSelin
ms.date: 12/05/2019
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: ERDataModelDesigner, ERExpressionDesignerFormula, ERMappedFormatDesigner, ERModelMappingDesigner
audience: Application User, IT Pro
ms.reviewer: kfend
ms.custom: 58771
ms.assetid: 24223e13-727a-4be6-a22d-4d427f504ac9
ms.search.region: Global
ms.author: nselin
ms.search.validFrom: 2016-02-28
ms.dyn365.ops.version: AX 7.0.0
ms.openlocfilehash: 2dcede0818630329a5608c2d294c9c9f4f749f13
ms.sourcegitcommit: 074b6e212d19dd5d84881d1cdd096611a18c207f
ms.translationtype: HT
ms.contentlocale: sv-SE
ms.lasthandoff: 03/31/2021
ms.locfileid: "5750142"
---
# <a name="formula-designer-in-electronic-reporting-er"></a><span data-ttu-id="9bee8-103">Formeldesigner i elektronisk rapportering (ER)</span><span class="sxs-lookup"><span data-stu-id="9bee8-103">Formula designer in Electronic reporting (ER)</span></span>

[!include [banner](../includes/banner.md)]

<span data-ttu-id="9bee8-104">Detta avsnitt avslutar hur du använder formeldesignern inom Elektronisk rapportering (ER).</span><span class="sxs-lookup"><span data-stu-id="9bee8-104">This topic explains how to use the formula designer in Electronic reporting (ER).</span></span> <span data-ttu-id="9bee8-105">Om du utformar ett format för ett visst elektroniskt dokument i ER kan du använda formler för datatransformering för att uppfylla kraven för dokumentets uppfyllelse och formatering.</span><span class="sxs-lookup"><span data-stu-id="9bee8-105">When you design a format for a specific electronic document in ER, you can use formulas to transform data so that it meets the requirements for the document's fulfillment and formatting.</span></span> <span data-ttu-id="9bee8-106">Dessa formler liknar formler i Microsoft Excel.</span><span class="sxs-lookup"><span data-stu-id="9bee8-106">These formulas resemble formulas in Microsoft Excel.</span></span> <span data-ttu-id="9bee8-107">Formulären ger stöd åt olika typer av funktioner: text, datum och tid, matematik, logik, information, funktioner för datatypskonvertering och andra (företagsdomänspecifika funktioner).</span><span class="sxs-lookup"><span data-stu-id="9bee8-107">Various types of functions are supported in the formulas: text, date and time, mathematical, logical, information, and data type conversion functions, and also other, business domain–specific functions.</span></span>

## <a name="formula-designer-overview"></a><span data-ttu-id="9bee8-108">Formel designer översikt</span><span class="sxs-lookup"><span data-stu-id="9bee8-108">Formula designer overview</span></span>

<span data-ttu-id="9bee8-109">ER stöder formeldesignern.</span><span class="sxs-lookup"><span data-stu-id="9bee8-109">ER supports the formula designer.</span></span> <span data-ttu-id="9bee8-110">Därför kan du vid designtillfället konfigurera uttryck som kan användas för följande uppgifter under körning:</span><span class="sxs-lookup"><span data-stu-id="9bee8-110">Therefore, at design time, you can configure expressions that can be used for the following tasks at runtime:</span></span>

- <span data-ttu-id="9bee8-111">Omvandla data som tas emot från en appdatabas och som anges i en ER-datamodell som fungerar som datakälla för ER-format.</span><span class="sxs-lookup"><span data-stu-id="9bee8-111">Transform data that is received from an application database and that should be entered in an ER data model that is designed to be a data source for ER formats.</span></span> <span data-ttu-id="9bee8-112">(Till exempel kan dessa omvandlingar omfatta konvertering, filtrering och gruppering av datatyp.)</span><span class="sxs-lookup"><span data-stu-id="9bee8-112">(For example, these transformations might include filtering, grouping, and data type conversion.)</span></span>
- <span data-ttu-id="9bee8-113">Formatera data som ska skickas till ett skapande elektroniskt dokument i enlighet med layout och villkor för ett specifikt ER-format.</span><span class="sxs-lookup"><span data-stu-id="9bee8-113">Format data that must be sent to a generating electronic document in accordance with the layout and conditions of a specific ER format.</span></span> <span data-ttu-id="9bee8-114">(Till exempel kan formateringen göras i enlighet med det begärda språket eller kulturen, eller i enlighet med kodning).</span><span class="sxs-lookup"><span data-stu-id="9bee8-114">(For example, the formatting might be done in accordance with the requested language or culture, or the encoding).</span></span>
- <span data-ttu-id="9bee8-115">Kontrollera processen för generering av elektroniska dokument.</span><span class="sxs-lookup"><span data-stu-id="9bee8-115">Control the process of creating electronic documents.</span></span> <span data-ttu-id="9bee8-116">(Till exempel kan uttryck aktivera eller inaktivera utdata från specifika element av formatet, beroende på bearbetade data.</span><span class="sxs-lookup"><span data-stu-id="9bee8-116">(For example, the expressions can enable or disable the output of specific elements of the format, depending on processing data.</span></span> <span data-ttu-id="9bee8-117">De kan också avbryta processen att skapa dokument eller skicka meddelanden till användare.)</span><span class="sxs-lookup"><span data-stu-id="9bee8-117">They can also interrupt the document creation process or throw messages to users.)</span></span>

<span data-ttu-id="9bee8-118">Du kan öppna sidan **Formula designer** när du utför någon av följande åtgärder:</span><span class="sxs-lookup"><span data-stu-id="9bee8-118">You can open the **Formula designer** page when you perform any of the following actions:</span></span>

- <span data-ttu-id="9bee8-119">Binda datakällsartiklar till datamodellkomponenter.</span><span class="sxs-lookup"><span data-stu-id="9bee8-119">Bind data source items to data model components.</span></span>
- <span data-ttu-id="9bee8-120">Binda datakällsartiklar till formatkomponenter</span><span class="sxs-lookup"><span data-stu-id="9bee8-120">Bind data source items to format components.</span></span>
- <span data-ttu-id="9bee8-121">Slutför underhåll av beräknade fält som är en del av datakällor.</span><span class="sxs-lookup"><span data-stu-id="9bee8-121">Complete maintenance of calculated fields that are part of data sources.</span></span>
- <span data-ttu-id="9bee8-122">Definiera synlighetvillkoren för användarnas indataparametrar.</span><span class="sxs-lookup"><span data-stu-id="9bee8-122">Define the visibility conditions for user input parameters.</span></span>
- <span data-ttu-id="9bee8-123">Utforma transformeringar för ett format.</span><span class="sxs-lookup"><span data-stu-id="9bee8-123">Design a format's transformations.</span></span>
- <span data-ttu-id="9bee8-124">Definiera aktiveringsvillkoren för formatets komponenter.</span><span class="sxs-lookup"><span data-stu-id="9bee8-124">Define the enabling conditions for the format's components.</span></span>
- <span data-ttu-id="9bee8-125">Definiera filnamnen för formatets FIL-komponenter.</span><span class="sxs-lookup"><span data-stu-id="9bee8-125">Define the file names for the format's FILE components.</span></span>
- <span data-ttu-id="9bee8-126">Definiera villkoren för processtyrningsvalideringarna.</span><span class="sxs-lookup"><span data-stu-id="9bee8-126">Define the conditions for process control validations.</span></span>
- <span data-ttu-id="9bee8-127">Definiera meddelandetexten för processtyrningsvalideringar.</span><span class="sxs-lookup"><span data-stu-id="9bee8-127">Define the message text for process control validations.</span></span>

## <a name="data-binding"></a><a name="Binding"></a><span data-ttu-id="9bee8-128">Data bindande</span><span class="sxs-lookup"><span data-stu-id="9bee8-128">Data binding</span></span>

<span data-ttu-id="9bee8-129">ER-formeldesignern kan användas för att definiera ett uttryck som transformerar data som tagits emot från datakällor så att dessa data kan anges i datakonsumenten vid körning på följande sätt:</span><span class="sxs-lookup"><span data-stu-id="9bee8-129">The ER formula designer can be used to define an expression that transforms data that is received from data sources, so that the data can be entered in the data consumer in the following ways at runtime:</span></span>

- <span data-ttu-id="9bee8-130">Från appdatakällor och körtidsparametrar till en ER-datamodell</span><span class="sxs-lookup"><span data-stu-id="9bee8-130">From application data sources and runtime parameters to an ER data model</span></span>
- <span data-ttu-id="9bee8-131">Från en ER-datamodell till ett ER-format</span><span class="sxs-lookup"><span data-stu-id="9bee8-131">From an ER data model to an ER format</span></span>
- <span data-ttu-id="9bee8-132">Från appdatakällor och körtidsparametrar till en ER-format</span><span class="sxs-lookup"><span data-stu-id="9bee8-132">From application data sources and runtime parameters to an ER format</span></span>

<span data-ttu-id="9bee8-133">Bilden visar hur ett uttryck av den här typen skapas.</span><span class="sxs-lookup"><span data-stu-id="9bee8-133">The following illustration shows the design of an expression of this type.</span></span> <span data-ttu-id="9bee8-134">I det här exemplet avrundar uttrycket värdet i fältet **Intrastat.AmountMST** i tabellen Intrastat till två decimaler och returnerar det avrundade värdet.</span><span class="sxs-lookup"><span data-stu-id="9bee8-134">In this example, the expression rounds the value of the **Intrastat.AmountMST** field in the Intrastat table to two decimal places and then returns the rounded value.</span></span>

<span data-ttu-id="9bee8-135">[![Databindning för uttryck](./media/picture-expression-binding.jpg)](./media/picture-expression-binding.jpg)</span><span class="sxs-lookup"><span data-stu-id="9bee8-135">[![Data binding expression](./media/picture-expression-binding.jpg)](./media/picture-expression-binding.jpg)</span></span>

<span data-ttu-id="9bee8-136">Bilden nedan visar hur ett uttryck av den här typen kan användas.</span><span class="sxs-lookup"><span data-stu-id="9bee8-136">The following illustration shows how an expression of this type can be used.</span></span> <span data-ttu-id="9bee8-137">I det här exemplet anges resultatet av det utformade uttrycket i komponenten **Transaction.InvoicedAmount** i datamodellen **Tax reporting model**.</span><span class="sxs-lookup"><span data-stu-id="9bee8-137">In this example, the result of the designed expression is entered in the **Transaction.InvoicedAmount** component of the **Tax reporting model** data model.</span></span>

<span data-ttu-id="9bee8-138">[![Databindning för uttryck används](./media/picture-expression-binding2.jpg)](./media/picture-expression-binding2.jpg)</span><span class="sxs-lookup"><span data-stu-id="9bee8-138">[![Data binding expression being used](./media/picture-expression-binding2.jpg)](./media/picture-expression-binding2.jpg)</span></span>

<span data-ttu-id="9bee8-139">Vid körning avrundar den designade formeln `ROUND (Intrastat.AmountMST, 2)` värdet av fältet **AmountMST** för varje post i tabellen Intrastat till två decimaler.</span><span class="sxs-lookup"><span data-stu-id="9bee8-139">At runtime, the designed formula, `ROUND (Intrastat.AmountMST, 2)`, rounds the value of the **AmountMST** field for each record in the Intrastat table to two decimal places.</span></span> <span data-ttu-id="9bee8-140">Därefter skrivs det avrundade värdet in i komponenten **Transaction.InvoicedAmount** i datamodellen **Tax reporting**.</span><span class="sxs-lookup"><span data-stu-id="9bee8-140">It then enters the rounded value in the **Transaction.InvoicedAmount** component of the **Tax reporting** data model.</span></span>

## <a name="data-formatting"></a><a name="Transformation"></a><span data-ttu-id="9bee8-141">Data formatering</span><span class="sxs-lookup"><span data-stu-id="9bee8-141">Data formatting</span></span>

<span data-ttu-id="9bee8-142">ER-formeldesignern kan användas för att definiera uttryck som formaterar data som tagits emot från datakällor, så att dessa data kan skickas som en del av det skapade elektroniska dokumentet.</span><span class="sxs-lookup"><span data-stu-id="9bee8-142">The ER formula designer can be used to define an expression that formats data that is received from data sources, so that the data can be sent as part of the generating electronic document.</span></span> <span data-ttu-id="9bee8-143">Du har kanske en formatering som måste användas som en typisk regel och som ska återanvändas för ett format.</span><span class="sxs-lookup"><span data-stu-id="9bee8-143">You might have formatting that must be applied as a typical rule that should be reused for a format.</span></span> <span data-ttu-id="9bee8-144">Då kan du ange den formateringen en gång för alla i formatkonfigurationen, som en namngiven omvandling som innehåller ett uttryck med formatering.</span><span class="sxs-lookup"><span data-stu-id="9bee8-144">In this case, you can introduce that formatting one time in the format configuration, as a named transformation that has a formatting expression.</span></span> <span data-ttu-id="9bee8-145">Den namngivna transformeringen kan sedan länkas till flera formatkomponenter, där utdata måste vara formaterade enligt det uttryck du skapade.</span><span class="sxs-lookup"><span data-stu-id="9bee8-145">This named transformation can then be linked to many format components where the output must be formatted according to the formatting expression that you created.</span></span>

<span data-ttu-id="9bee8-146">Bilden nedan visar hur du skapar en transformering av den här typen.</span><span class="sxs-lookup"><span data-stu-id="9bee8-146">The following illustration shows the design of a transformation of this type.</span></span> <span data-ttu-id="9bee8-147">I det här exemplet trunkerar **TrimmedString**-transformeringen inkommande data för datatypen *String* genom att ta bort inledande och avslutande blanksteg.</span><span class="sxs-lookup"><span data-stu-id="9bee8-147">In this example, the **TrimmedString** transformation truncates incoming data of the *String* data type by removing leading and trailing spaces.</span></span> <span data-ttu-id="9bee8-148">Därefter returneras det trunkerade strängvärdet.</span><span class="sxs-lookup"><span data-stu-id="9bee8-148">It then returns the truncated string value.</span></span>

<span data-ttu-id="9bee8-149">[![Transformering](./media/picture-transformation-design.jpg)](./media/picture-transformation-design.jpg)</span><span class="sxs-lookup"><span data-stu-id="9bee8-149">[![Transformation](./media/picture-transformation-design.jpg)](./media/picture-transformation-design.jpg)</span></span>

<span data-ttu-id="9bee8-150">Bilden nedan visar hur en transformering av den här typen kan användas.</span><span class="sxs-lookup"><span data-stu-id="9bee8-150">The following illustration shows how a transformation of this type can be used.</span></span> <span data-ttu-id="9bee8-151">I det här exemplet skickar flera formatkomponenter text som utdata till det skapande elektroniska dokumentet vid körning.</span><span class="sxs-lookup"><span data-stu-id="9bee8-151">In this example, several format components send text as output to the generating electronic document at runtime.</span></span> <span data-ttu-id="9bee8-152">Dessa formatkomponenter hänvisar till **TrimmedString**-transformationen med namn.</span><span class="sxs-lookup"><span data-stu-id="9bee8-152">All these format components refer to the **TrimmedString** transformation by name.</span></span>

<span data-ttu-id="9bee8-153">[![Transformering används](./media/picture-transformation-usage.jpg)](./media/picture-transformation-usage.jpg)</span><span class="sxs-lookup"><span data-stu-id="9bee8-153">[![Transformation being used](./media/picture-transformation-usage.jpg)](./media/picture-transformation-usage.jpg)</span></span>

<span data-ttu-id="9bee8-154">När formatkomponenter, såsom komponenten **partyName** i föregående illustration, hänvisar till transformeringen **TrimmedString** sänds text som utdata till det skapande elektroniska dokumentet.</span><span class="sxs-lookup"><span data-stu-id="9bee8-154">When format components, such as the **partyName** component in the preceding illustration, refer to the **TrimmedString** transformation, the transformation sends text as output to the generating electronic document.</span></span> <span data-ttu-id="9bee8-155">Denna text inkluderar inte inledande eller avslutande blanksteg.</span><span class="sxs-lookup"><span data-stu-id="9bee8-155">This text doesn't include leading and trailing spaces.</span></span>

<span data-ttu-id="9bee8-156">Om du har en formatering som måste tillämpas separat kan du införa den formateringen som ett individuellt uttryck för en bindning av en särskild formatkomponent.</span><span class="sxs-lookup"><span data-stu-id="9bee8-156">If you have formatting that must be applied individually, you can introduce that formatting as an individual expression of a binding of a specific format component.</span></span> <span data-ttu-id="9bee8-157">Bilden visar ett uttryck av den här typen.</span><span class="sxs-lookup"><span data-stu-id="9bee8-157">The following illustration shows an expression of this type.</span></span> <span data-ttu-id="9bee8-158">I det här exemplet är **partyType**-formatkomponenten bunden till datakällan via ett uttryck som omvandlar inkommande data från fältet **Model.Company.RegistrationType** i datakällan till versal text.</span><span class="sxs-lookup"><span data-stu-id="9bee8-158">In this example, the **partyType** format component is bound to the data source via an expression that converts incoming data from the **Model.Company.RegistrationType** field in the data source to uppercase text.</span></span> <span data-ttu-id="9bee8-159">Uttrycket skickar sedan texten som utdata till det elektroniska dokumentet.</span><span class="sxs-lookup"><span data-stu-id="9bee8-159">The expression then sends that text as output to the electronic document.</span></span>

<span data-ttu-id="9bee8-160">[![Att tillämpa formatering på en enskild komponent](./media/picture-binding-with-formula.jpg)](./media/picture-binding-with-formula.jpg)</span><span class="sxs-lookup"><span data-stu-id="9bee8-160">[![Applying formatting to an individual component](./media/picture-binding-with-formula.jpg)](./media/picture-binding-with-formula.jpg)</span></span>

## <a name="process-flow-control"></a><a name="Validation"></a><span data-ttu-id="9bee8-161">Processen flödeskontroll</span><span class="sxs-lookup"><span data-stu-id="9bee8-161">Process flow control</span></span>

<span data-ttu-id="9bee8-162">ER-formeldesignern kan användas för att definiera uttryck som styr processflödet för skapande elektroniska dokument.</span><span class="sxs-lookup"><span data-stu-id="9bee8-162">The ER formula designer can be used to define expressions that control the process flow of generating electronic documents.</span></span> <span data-ttu-id="9bee8-163">Du kan utföra följande uppgifter:</span><span class="sxs-lookup"><span data-stu-id="9bee8-163">You can perform the following tasks:</span></span>

- <span data-ttu-id="9bee8-164">Definiera villkor som fastställer när processen för att skapa ett dokument måste stoppas.</span><span class="sxs-lookup"><span data-stu-id="9bee8-164">Define conditions that determine when a document creation process must be stopped.</span></span>
- <span data-ttu-id="9bee8-165">Definiera uttryck som antingen skapar meddelanden till användaren om stoppade processer eller sänder körningsloggmeddelanden om den pågående processen att skapa en rapport.</span><span class="sxs-lookup"><span data-stu-id="9bee8-165">Specify expressions that either create messages for the user about stopped processes or throw execution log messages about the continuing process of report generation.</span></span>
- <span data-ttu-id="9bee8-166">Definiera filnamnen på de skapande elektroniska dokumenten och styr villkoren för hur de skapas.</span><span class="sxs-lookup"><span data-stu-id="9bee8-166">Specify the file names of generating electronic documents, and control the conditions of their creation.</span></span>

<span data-ttu-id="9bee8-167">Varje regel i processen flödeskontroll är utformad som en individuell validering.</span><span class="sxs-lookup"><span data-stu-id="9bee8-167">Each rule of the process flow control is designed as an individual validation.</span></span> <span data-ttu-id="9bee8-168">Bilden nedan visar en validering av den här typen.</span><span class="sxs-lookup"><span data-stu-id="9bee8-168">The following illustration shows a validation of this type.</span></span> <span data-ttu-id="9bee8-169">Här följer en förklaring av konfigureringen i det här exemplet:</span><span class="sxs-lookup"><span data-stu-id="9bee8-169">Here is an explanation of the configuration in this example:</span></span>

- <span data-ttu-id="9bee8-170">Valideringen utvärderas när **INSTAT**-noden skapas under generering av XML-filen.</span><span class="sxs-lookup"><span data-stu-id="9bee8-170">The validation is evaluated when the **INSTAT** node is created during generation of the XML file.</span></span>
- <span data-ttu-id="9bee8-171">Valideringen stoppar körningsprocessen och returnerar **FALSKT** om listan över transaktioner är tom.</span><span class="sxs-lookup"><span data-stu-id="9bee8-171">If the list of transactions is empty, the validation stops the execution process and returns **FALSE**.</span></span>
- <span data-ttu-id="9bee8-172">Valideringen returnerar ett felmeddelande som innehåller texten i etiketten SYS70894 på användarens valda språk.</span><span class="sxs-lookup"><span data-stu-id="9bee8-172">The validation returns an error message that includes the text of label SYS70894 in the user's preferred language.</span></span>

<span data-ttu-id="9bee8-173">[![Validering](./media/picture-validation.jpg)](./media/picture-validation.jpg)</span><span class="sxs-lookup"><span data-stu-id="9bee8-173">[![Validation](./media/picture-validation.jpg)](./media/picture-validation.jpg)</span></span>

<span data-ttu-id="9bee8-174">ER-formeldesignern kan även användas för att skapa ett filnamn för ett skapande elektroniskt dokument och styra processen för hur en fil skapas.</span><span class="sxs-lookup"><span data-stu-id="9bee8-174">The ER formula designer can also be used to generate a file name for a generating electronic document and to control the file creation process.</span></span> <span data-ttu-id="9bee8-175">Bilden nedan visar utformningen av en styrning av ett processflöde av den här typen.</span><span class="sxs-lookup"><span data-stu-id="9bee8-175">The following illustration shows the design of a process flow control of this type.</span></span> <span data-ttu-id="9bee8-176">Här följer en förklaring av konfigureringen i det här exemplet:</span><span class="sxs-lookup"><span data-stu-id="9bee8-176">Here is an explanation of the configuration in this example:</span></span>

- <span data-ttu-id="9bee8-177">Listan med poster från datakällan **modell. Intrastat-** är uppdelat i batchar.</span><span class="sxs-lookup"><span data-stu-id="9bee8-177">The list of records from the **model.Intrastat** data source is divided into batches.</span></span> <span data-ttu-id="9bee8-178">Varje batch innehåller upp till 1 000 poster.</span><span class="sxs-lookup"><span data-stu-id="9bee8-178">Each batch contains up to 1,000 records.</span></span>
- <span data-ttu-id="9bee8-179">Utdata skapar en zip-fil som innehåller en fil i XML-format för varje skapad batch.</span><span class="sxs-lookup"><span data-stu-id="9bee8-179">The output creates a zip file that contains one file in XML format for every batch that was created.</span></span>
- <span data-ttu-id="9bee8-180">Ett uttryck returnerar ett filnamn för skapande elektroniska dokument genom att konkatenera filnamnet och filnamnstillägget.</span><span class="sxs-lookup"><span data-stu-id="9bee8-180">An expression returns a file name for generating electronic documents by concatenating the file name and the file name extension.</span></span> <span data-ttu-id="9bee8-181">För den andra batchen och alla efterföljande batchar innehåller filnamnet batchens ID som ett suffix.</span><span class="sxs-lookup"><span data-stu-id="9bee8-181">For the second batch and all subsequent batches, the file name contains the batch ID as a suffix.</span></span>
- <span data-ttu-id="9bee8-182">Ett uttryck möjliggör (genom att returnera **TRUE**) processen för att skapa en fil för batchar som innehåller minst en post.</span><span class="sxs-lookup"><span data-stu-id="9bee8-182">An expression enables (by returning **TRUE**) the file creation process for batches that contain at least one record.</span></span>

<span data-ttu-id="9bee8-183">[![Processen flödeskontroll](./media/picture-file-control.jpg)](./media/picture-file-control.jpg)</span><span class="sxs-lookup"><span data-stu-id="9bee8-183">[![Process flow control](./media/picture-file-control.jpg)](./media/picture-file-control.jpg)</span></span>

## <a name="document-content-control"></a><a name="Enabled"></a><span data-ttu-id="9bee8-184">Kontroll av dokumentinnehåll</span><span class="sxs-lookup"><span data-stu-id="9bee8-184">Document content control</span></span>

<span data-ttu-id="9bee8-185">Du kan använda ER-formuldesigner för att konfigurera uttryck som styr vilka data som ska placeras i genererade elektroniska dokument vid körning.</span><span class="sxs-lookup"><span data-stu-id="9bee8-185">The ER formula designer can be used to configure expressions that control what data will be put into generated electronic documents at runtime.</span></span> <span data-ttu-id="9bee8-186">Till exempel kan uttryck aktivera eller inaktivera utdata från specifika element av formatet, beroende på bearbetade data och konfigurerad logik.</span><span class="sxs-lookup"><span data-stu-id="9bee8-186">The expressions can enable or disable the output of specific elements of the format, depending on processing data and configured logic.</span></span> <span data-ttu-id="9bee8-187">Uttrycken kan anges för ett enskilt formatelement i fältet **Aktiverad** på fliken **Mappning** på sidan **Operations designer**.</span><span class="sxs-lookup"><span data-stu-id="9bee8-187">These expressions can be entered for a single format element in the **Enabled** field on the **Mapping** tab of the **Operations designer** page.</span></span> <span data-ttu-id="9bee8-188">Du kan ange uttrycken som ett logiskt villkor som returnerar ett *booleskt* värde:</span><span class="sxs-lookup"><span data-stu-id="9bee8-188">You can enter the expressions as a logic condition that returns a *Boolean* value:</span></span>

- <span data-ttu-id="9bee8-189">Om villkoret returnerar **Sant** körs det aktuella formatelementet.</span><span class="sxs-lookup"><span data-stu-id="9bee8-189">If the condition returns **True**, the current format element is run.</span></span>
- <span data-ttu-id="9bee8-190">Om villkoret returnerar **Falskt** hoppas det aktuella formatelementet över.</span><span class="sxs-lookup"><span data-stu-id="9bee8-190">If the condition returns **False**, the current format element is skipped.</span></span>

<span data-ttu-id="9bee8-191">Bilden visar uttryck av den här typen.</span><span class="sxs-lookup"><span data-stu-id="9bee8-191">The following illustration shows expressions of this type.</span></span> <span data-ttu-id="9bee8-192">(Version 11.12.11 av **ISO20022 kreditöverföring (NO)** formatkonfiguration som tillhandahålls av Microsoft används som ett exempel.) **XMLHeader**-formatkomponenten är konfigurerad för att beskriva strukturen för kreditöverföringsmeddelandet enligt ISO 20022 XML-meddelandestandarderna.</span><span class="sxs-lookup"><span data-stu-id="9bee8-192">(Version 11.12.11 of the **ISO20022 Credit transfer (NO)** format configuration that is provided by Microsoft is used as an example.) The **XMLHeader** format component is configured to describe the structure of the credit transfer message according to the ISO 20022 XML message standards.</span></span> <span data-ttu-id="9bee8-193">Formatkomponenten **XMLHeader/dokument/CstmrCdtTrfInitn/PmtInf/CdtTrfTxInf/RmtInf/ Ustrd** är konfigurerad för att lägga till det genererade meddelandet, XML-elementet **Ustrd** och lägga remitteringsinformationen i en ostrukturerat format som text i följande XML-element:</span><span class="sxs-lookup"><span data-stu-id="9bee8-193">The **XMLHeader/Document/CstmrCdtTrfInitn/PmtInf/CdtTrfTxInf/RmtInf/Ustrd** format component is configured to add the **Ustrd** XML element to the generated message and to put the remittance information in an unstructured format as text of the following XML elements:</span></span>

- <span data-ttu-id="9bee8-194">**PaymentNotes**-komponenten används för att skapa texten i betalningsanteckningarna.</span><span class="sxs-lookup"><span data-stu-id="9bee8-194">The **PaymentNotes** component is used to generate the text of payment notes.</span></span>
- <span data-ttu-id="9bee8-195">**DelimitedSequence**-komponenten genererar kommaavgränsade fakturanummer som används för att kvitta den aktuella kreditöverföringen.</span><span class="sxs-lookup"><span data-stu-id="9bee8-195">The **DelimitedSequence** component generates comma-separated invoice numbers that are used to settle the current credit transfer.</span></span>

<span data-ttu-id="9bee8-196">[![Komponenter för PaymentNotes och DelimitedSequence](./media/GER-FormulaEditor-ControlContent-1.png)](./media/GER-FormulaEditor-ControlContent-1.png)</span><span class="sxs-lookup"><span data-stu-id="9bee8-196">[![PaymentNotes and DelimitedSequence components](./media/GER-FormulaEditor-ControlContent-1.png)](./media/GER-FormulaEditor-ControlContent-1.png)</span></span>

> [!NOTE]
> <span data-ttu-id="9bee8-197">**PaymentNotes**- och **DelimitedSequence**-komponenterna märks med hjälp av ett frågetecken.</span><span class="sxs-lookup"><span data-stu-id="9bee8-197">The **PaymentNotes** and **DelimitedSequence** components are labeled by using a question mark.</span></span> <span data-ttu-id="9bee8-198">Ett frågetecken indikerar att användningen av en komponent är villkorad.</span><span class="sxs-lookup"><span data-stu-id="9bee8-198">A question mark indicates that the use of a component is conditional.</span></span> <span data-ttu-id="9bee8-199">I det här fallet baseras användningen av komponenterna på följande kriterier:</span><span class="sxs-lookup"><span data-stu-id="9bee8-199">In this case, use of the components is based on the following criteria:</span></span>
>
> - <span data-ttu-id="9bee8-200">Uttrycket `@.PaymentsNotes <> ""` som definieras för komponenten **PaymentNotes** aktiverar (genom att returnera **SANT**) **Ustrd** XML-element att fyllas i med text av betalningsanteckningar om den texten inte är tom för den aktuella kreditöverföringen.</span><span class="sxs-lookup"><span data-stu-id="9bee8-200">The `@.PaymentsNotes <> ""` expression that is defined for the **PaymentNotes** component enables (by returning **TRUE**) the **Ustrd** XML element to be filled with the text of payment notes, if that text isn't blank for the current credit transfer.</span></span>
>
>    <span data-ttu-id="9bee8-201">[![Uttryck för komponenten PaymentNotes](./media/GER-FormulaEditor-ControlContent-2.png)](./media/GER-FormulaEditor-ControlContent-2.png)</span><span class="sxs-lookup"><span data-stu-id="9bee8-201">[![Expression for the PaymentNotes component](./media/GER-FormulaEditor-ControlContent-2.png)](./media/GER-FormulaEditor-ControlContent-2.png)</span></span>
>
> - <span data-ttu-id="9bee8-202">Uttrycket `@.PaymentsNotes = ""` som definieras för komponenten **DelimitedSequence** aktiverar (genom att returnera **SANT**) **Ustrd** XML-elementet att fyllas i med en kommaseparerad lista av de fakturanummer som används för att kvitta den aktuella kreditöverföringen när texten för betalningsnoteringar om kreditöverföringen är tom.</span><span class="sxs-lookup"><span data-stu-id="9bee8-202">The `@.PaymentsNotes = ""` expression that is defined for the **DelimitedSequence** component enables (by returning **TRUE**) the **Ustrd** XML element to be filled with a comma-separated list of the invoice numbers that are used to settle the current credit transfer, if the text of payment notes for that credit transfer is blank.</span></span>
>
>    <span data-ttu-id="9bee8-203">[![Uttryck för komponenten DelimitedSequence](./media/GER-FormulaEditor-ControlContent-3.png)](./media/GER-FormulaEditor-ControlContent-3.png)</span><span class="sxs-lookup"><span data-stu-id="9bee8-203">[![Expression for the DelimitedSequence component](./media/GER-FormulaEditor-ControlContent-3.png)](./media/GER-FormulaEditor-ControlContent-3.png)</span></span>
> 
> <span data-ttu-id="9bee8-204">Baserat på denna inställning, meddelandet som genereras för varje gäldenärsbetalning, **Ustrd** XML-element, som antingen innehåller texten på betalningsanteckningar eller om den texten är tom, en kommaseparerad lista av de fakturanummer som används för att kvitta betalningen.</span><span class="sxs-lookup"><span data-stu-id="9bee8-204">Based on this setup, the message that is generated for each debtor payment, the **Ustrd** XML element, will contain either the text of payment notes or, when that text is blank, a comma-separated list of the invoice numbers that are used to settle the payment.</span></span>

## <a name="validation-of-configured-formulas"></a><a name="TestFormula"></a><span data-ttu-id="9bee8-205">Validering av konfigurerade formler</span><span class="sxs-lookup"><span data-stu-id="9bee8-205">Validation of configured formulas</span></span>

<span data-ttu-id="9bee8-206">På sidan **formeldesignern** väljer du **test** för att validera hur den konfigurerade formeln fungerar.</span><span class="sxs-lookup"><span data-stu-id="9bee8-206">On the **Formula designer** page, select **Test** to validate how the configured formula works.</span></span>

<span data-ttu-id="9bee8-207">[![Välja test för att validera en formel](./media/ER-FormulaTest-Start.png)](./media/ER-FormulaTest-Start.png)</span><span class="sxs-lookup"><span data-stu-id="9bee8-207">[![Selecting Test to validate a forumula](./media/ER-FormulaTest-Start.png)](./media/ER-FormulaTest-Start.png)</span></span>

<span data-ttu-id="9bee8-208">När värdena för formelargument krävs kan du öppna dialogrutan **Testuttryck** från sidan **Formulärdesigner**.</span><span class="sxs-lookup"><span data-stu-id="9bee8-208">When the values of formula arguments are required, you can open the **Test expression** dialog box from the **Formula designer** page.</span></span> <span data-ttu-id="9bee8-209">I de flesta fall måste dessa argument definieras manuellt, eftersom de konfigurerade bindningarna inte körs vid designtillfället.</span><span class="sxs-lookup"><span data-stu-id="9bee8-209">In most cases, these arguments must be manually defined, because the configured bindings aren't run at design time.</span></span> <span data-ttu-id="9bee8-210">Fliken **testresultat** på sidan **formeldesigner** visar resultatet från körningen av den konfigurerade formeln.</span><span class="sxs-lookup"><span data-stu-id="9bee8-210">The **Test result** tab on the **Formula designer** page shows the result from execution of the configured formula.</span></span>

<span data-ttu-id="9bee8-211">I följande exempel visas hur du kan testa formeln som har konfigurerats för den utländska handels domänen att kontrollera att Intrastat-artikelkoden innehåller endast siffror.</span><span class="sxs-lookup"><span data-stu-id="9bee8-211">The following example shows how you can test the formula that is configured for the foreign trade domain to make sure that the Intrastat commodity code contains only digits.</span></span>

<span data-ttu-id="9bee8-212">När du testar den här formeln kan du använda dialogrutan **testuttryck** för att ange värdet för Intrastat-varukoden för testning.</span><span class="sxs-lookup"><span data-stu-id="9bee8-212">When you test this formula, you can use the **Test expression** dialog box to specify the value of the Intrastat commodity code for testing.</span></span>

<span data-ttu-id="9bee8-213">[![Ange Intrastat-varukoden för testning](./media/ER-FormulaTest-Start-EnterArguments.png)](./media/ER-FormulaTest-Start-EnterArguments.png)</span><span class="sxs-lookup"><span data-stu-id="9bee8-213">[![Specifying the Intrastat commodity code for testing](./media/ER-FormulaTest-Start-EnterArguments.png)](./media/ER-FormulaTest-Start-EnterArguments.png)</span></span>

<span data-ttu-id="9bee8-214">När du har angett Intrastat-artikelkoden och väljer **OK**, visar fliken **Testresultat** på sidan **Formeldesigner** resultatet av körningen av den konfigurerade formeln.</span><span class="sxs-lookup"><span data-stu-id="9bee8-214">After you specify the Intrastat commodity code and select **OK**, the **Test result** tab on the **Formula designer** page shows the result of execution of the configured formula.</span></span> <span data-ttu-id="9bee8-215">Du kan sedan utvärdera om resultatet är acceptabelt.</span><span class="sxs-lookup"><span data-stu-id="9bee8-215">You can then evaluate whether the result is acceptable.</span></span> <span data-ttu-id="9bee8-216">Om resultatet inte är acceptabelt kan du uppdatera formeln och testa den igen.</span><span class="sxs-lookup"><span data-stu-id="9bee8-216">If the result isn't acceptable, you can update the formula and test it again.</span></span>

<span data-ttu-id="9bee8-217">[![Testresultat](./media/ER-FormulaTest-Result.png)](./media/ER-FormulaTest-Result.png)</span><span class="sxs-lookup"><span data-stu-id="9bee8-217">[![Test result](./media/ER-FormulaTest-Result.png)](./media/ER-FormulaTest-Result.png)</span></span>

<span data-ttu-id="9bee8-218">Vissa formler kan inte testas vid designtillfället.</span><span class="sxs-lookup"><span data-stu-id="9bee8-218">Some formulas can't be tested at design time.</span></span> <span data-ttu-id="9bee8-219">En formel kan till exempel returnera ett resultat av en datatyp som inte kan visas på fliken **testresultat**. I det här fallet visas ett felmeddelande som säger att formeln inte kan testas.</span><span class="sxs-lookup"><span data-stu-id="9bee8-219">For example, a formula might return a result of a data type that can't be shown on the **Test result** tab. In this case, you receive an error message that states that the formula can't be tested.</span></span>

<span data-ttu-id="9bee8-220">[![Felmeddelande](./media/ER-FormulaTest-Error.png)](./media/ER-FormulaTest-Error.png)</span><span class="sxs-lookup"><span data-stu-id="9bee8-220">[![Error message](./media/ER-FormulaTest-Error.png)](./media/ER-FormulaTest-Error.png)</span></span>

## <a name="additional-resources"></a><span data-ttu-id="9bee8-221">Ytterligare resurser</span><span class="sxs-lookup"><span data-stu-id="9bee8-221">Additional resources</span></span>

- [<span data-ttu-id="9bee8-222">Översikt över elektronisk rapportering</span><span class="sxs-lookup"><span data-stu-id="9bee8-222">Electronic Reporting overview</span></span>](general-electronic-reporting.md)
- [<span data-ttu-id="9bee8-223">Formelspråk i elektronisk rapportering</span><span class="sxs-lookup"><span data-stu-id="9bee8-223">Electronic reporting formula language</span></span>](er-formula-language.md)


[!INCLUDE[footer-include](../../../includes/footer-banner.md)]
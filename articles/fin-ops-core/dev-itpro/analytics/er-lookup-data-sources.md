---
title: Konfigurera sökdatakällor att använda programspecifika parametrar för ER
description: I detta ämne beskrivs hur du kan konfigurera sökdatakällor i elektronisk rapportering (ER) att använda parametrar specifika för ER-program.
author: NickSelin
ms.date: 04/02/2021
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: ERSolutionTable, EROperationDesigner, ERLookupDesigner, ERComponentLookupStructureEditing
audience: Application User, Developer, IT Pro
ms.reviewer: kfend
ms.custom: ''
ms.assetid: ''
ms.search.region: Global
ms.author: nselin
ms.search.validFrom: 2019-01-01
ms.dyn365.ops.version: Release 8.1.3
ms.openlocfilehash: 131d14f1f1aa329bd71b1f8a4015192736bd8e44
ms.sourcegitcommit: 08ce2a9ca1f02064beabfb9b228717d39882164b
ms.translationtype: HT
ms.contentlocale: sv-SE
ms.lasthandoff: 05/11/2021
ms.locfileid: "6022585"
---
# <a name="configure-lookup-data-sources-to-use-er-application-specific-parameters"></a><span data-ttu-id="20a4b-103">Konfigurera sökdatakällor att använda programspecifika parametrar för ER</span><span class="sxs-lookup"><span data-stu-id="20a4b-103">Configure Lookup data sources to use ER application-specific parameters</span></span> 

[!include[banner](../includes/banner.md)]

<span data-ttu-id="20a4b-104">Med hjälp av programspecifika parametrar för [elektronisk rapportering (ER)](general-electronic-reporting.md) kan du konfigurera datafiltreringen i ett ER-format så att denna baseras på en uppsättning abstrakta regler.</span><span class="sxs-lookup"><span data-stu-id="20a4b-104">The [Electronic reporting (ER)](general-electronic-reporting.md) application-specific parameters feature lets you configure data filtering in an ER format so that it's based on a set of abstract rules.</span></span> <span data-ttu-id="20a4b-105">Denna uppsättning regler kan konfigureras till att använda datakällan av typen **Sökning** som finns i ett ER-format.</span><span class="sxs-lookup"><span data-stu-id="20a4b-105">This set of rules can be configured to use the data source of the **Lookup** type that is available in an ER format.</span></span> <span data-ttu-id="20a4b-106">Du kan sedan ange verkliga regler utanför ER-komponentverktygen med hjälp av det användargränssnitt (UI) som genereras automatiskt baserat på de inställningar för datakällan för **Sökning** för tillhörande ER-format och aktuella data för juridisk person.</span><span class="sxs-lookup"><span data-stu-id="20a4b-106">You can then specify real rules beyond the ER components designers by using the user interface (UI) that is automatically generated based on the settings of the **Lookup** data source of the corresponding ER format and the current legal entity data.</span></span> <span data-ttu-id="20a4b-107">Så småningom får du åtkomst till de angivna reglerna via ER-formatets **Sökning**-datakälla när detta ER-format körs.</span><span class="sxs-lookup"><span data-stu-id="20a4b-107">Eventually, the specified rules will be accessed by the ER format's **Lookup** data source when this ER format is executed.</span></span>

> [!NOTE]
> <span data-ttu-id="20a4b-108">Använd de konfigurerade datakällorna i det redigerbara ER-formatet för att ange vilka programdata som används för att konfigurera verkliga regler.</span><span class="sxs-lookup"><span data-stu-id="20a4b-108">Use the configured data sources of the editable ER format to specify what application data is used to configure real rules.</span></span>

<span data-ttu-id="20a4b-109">Använd [ER Operations-designern](general-electronic-reporting.md#building-a-format-that-uses-a-data-model-as-a-base) för att införa en datakälla av typen **Sökning** i ditt ER-format.</span><span class="sxs-lookup"><span data-stu-id="20a4b-109">Use the [ER Operations designer](general-electronic-reporting.md#building-a-format-that-uses-a-data-model-as-a-base) to bring a data source of the **Lookup** type in to your ER format.</span></span> <span data-ttu-id="20a4b-110">Datakällan måste konfigureras för att den ska kunna beskriva hur dina abstrakta regler ser ut, bland annat följande:</span><span class="sxs-lookup"><span data-stu-id="20a4b-110">The data source must be configured to describe how your abstract rules look, including the following:</span></span>

   - <span data-ttu-id="20a4b-111">Parameteruppsättningen för vissa datatyper vars värde anges för att ange en enda regel.</span><span class="sxs-lookup"><span data-stu-id="20a4b-111">The parameter set of certain data type whose value is provided to specify a single rule.</span></span>
   - <span data-ttu-id="20a4b-112">Värdetypen för vissa datatyper som returneras av en enda regel när den här regeln anses vara den lämpligaste bland andra.</span><span class="sxs-lookup"><span data-stu-id="20a4b-112">The value type of certain data type that is returned by a single rule when this rule is considered the most appropriate among others.</span></span>

<span data-ttu-id="20a4b-113">Du kan konfigurera följande typer av **Sökning**-datakällor beroende på vilken typ av värde som returneras av någon konfigurerad regel:</span><span class="sxs-lookup"><span data-stu-id="20a4b-113">You can configure the following types of **Lookup** data sources depending on the type of value that is returned by any configured rule:</span></span>

   - <span data-ttu-id="20a4b-114">Använd typen **Datamodell\Sökningstyp** när ett uppräkningsvärde för en modell måste returneras.</span><span class="sxs-lookup"><span data-stu-id="20a4b-114">Use the **Data model\Lookup** type when a model enumeration value must be returned.</span></span>
   - <span data-ttu-id="20a4b-115">Använd typen **Dynamics 365 Operations\sökning** när ett uppräkningsvärde för ett program eller ett programvärde [utökad datatyp](../extensibility/extensible-edts.md) måste returneras.</span><span class="sxs-lookup"><span data-stu-id="20a4b-115">Use the **Dynamics 365 Operations\Lookup** type when an application enumeration value or an application [extended data type](../extensibility/extensible-edts.md) value must be returned.</span></span>
   - <span data-ttu-id="20a4b-116">Använd typen **Formatuppräkning\Sökning** när ett uppräkningsvärde för format måste returneras.</span><span class="sxs-lookup"><span data-stu-id="20a4b-116">Use the **Format enumeration\Lookup** type when a format enumeration value must be returned.</span></span>

<span data-ttu-id="20a4b-117">I följande bild visas hur en uppräkning av format kan konfigureras i provformatet för ER.</span><span class="sxs-lookup"><span data-stu-id="20a4b-117">The following illustration shows how a format enumeration can be configured in the sample ER format.</span></span>

   ![Visar en formatuppräkning som bas för den konfigurerade sökdatakällan](./media/er-lookup-data-sources-img1.gif)

<span data-ttu-id="20a4b-119">I följande bild visas de formatkomponenter som konfigurerats för att rapportera olika typer av skatter i ett annat avsnitt i en genererad rapport.</span><span class="sxs-lookup"><span data-stu-id="20a4b-119">The following illustration shows the format components that were configured to report different type of taxes in a different section of a generated report.</span></span>

   ![Visar formatavsnitt för att separat rapportera olika typer av skatter](./media/er-lookup-data-sources-img2.png)

<span data-ttu-id="20a4b-121">I följande bild visas hur ER Operations-designern tillåter att en datakälla av typen **Formatuppräkning\Sökning** läggs till.</span><span class="sxs-lookup"><span data-stu-id="20a4b-121">The following illustration shows how the ER Operations designer allows the addition of a data source of the **Format enumeration\Lookup** type.</span></span>  <span data-ttu-id="20a4b-122">Den tillagda datakällan konfigureras som att ett värde för `List of taxation levels`-formaträkning returneras.</span><span class="sxs-lookup"><span data-stu-id="20a4b-122">The added data source is configured as returning a value of the `List of taxation levels` format enumeration.</span></span>

   ![Lägga till en ER-datakälla för uppräkningsformatet\Sökningstyp](./media/er-lookup-data-sources-img3.gif)

<span data-ttu-id="20a4b-124">I följande bild visas hur den tillagda datakällan är konfigurerad att använda fältet **Kod** i postlistan **Model.Data.tax** tillhörande datakällan **Modell** som en parameter som måste anges för varje enskild konfigurerad regel.</span><span class="sxs-lookup"><span data-stu-id="20a4b-124">The following illustration shows how the added data source is configured to use the **Code** field of the **Model.Data.Tax** record list of the **Model** data source as a parameter that must be specified for every configured rule.</span></span>

![Konfigurera parametrar för den tillagde datakällan för uppräkningsformat\Sökningstyp](./media/er-lookup-data-sources-img4.gif)

<span data-ttu-id="20a4b-126">Den tillagda `Model.Data.Tax`-datakällan konfigureras i syfte att ange en skattekod för varje konfigurerad regel, detta genom att få åtkomst till programtabellen **TaxTable**.</span><span class="sxs-lookup"><span data-stu-id="20a4b-126">The added `Model.Data.Tax` data source is configured to specify a tax code for every configured rule by accessing records of the **TaxTable** application table.</span></span>

   ![Granska sökdatakällan för enskilt företag tillhörande typen Formatuppräkning\Sökningstyp](./media/er-lookup-data-sources-img5.gif)

<span data-ttu-id="20a4b-128">Du kan ställa in sökningsregler för det valda ER-formatet genom att använda det användargränssnitt som automatiskt anpassas efter strukturen för den konfigurerade datakällan.</span><span class="sxs-lookup"><span data-stu-id="20a4b-128">You can set up the lookup rules for the selected ER format by using the UI that is automatically aligned with the structure of the configured data source.</span></span> <span data-ttu-id="20a4b-129">Detta användargränssnitt kräver för närvarande att du för varje regel anger det returnerade värdet som uppräkningsvärdet `List of taxation levels` för format, samt även skattekoden som en parameter.</span><span class="sxs-lookup"><span data-stu-id="20a4b-129">Currently, this UI requires that for each rule, you specify the returned value as the `List of taxation levels` format enumeration value as well as the tax code as a parameter.</span></span>

   ![Konfigurera regler för den konfigurerade datakällan](./media/er-lookup-data-sources-img6.gif)

<span data-ttu-id="20a4b-131">I följande bild visas hur datakällan `Model.Data.Summary.LevelByLookup` för typen **Beräknat fält** kan konfigureras att anropa den konfigurerade datakällan **Sökning** som tillhandahåller erforderliga parametrar.</span><span class="sxs-lookup"><span data-stu-id="20a4b-131">The following illustration shows how the `Model.Data.Summary.LevelByLookup` data source of the **Calculated field** type can be configured to call the configured **Lookup** data source providing the required parameters.</span></span> <span data-ttu-id="20a4b-132">För att bearbeta detta anrop vid körning går ER igenom listan med konfigurerade regler i den definierade sekvensen i syfte att hitta den första regel som uppfyller de angivna villkoren.</span><span class="sxs-lookup"><span data-stu-id="20a4b-132">To process this call at runtime, ER goes through the list of configured rules in the defined sequence to locate the first rule that satisfies the provided conditions.</span></span> <span data-ttu-id="20a4b-133">I detta exempel är det regeln som innehåller skattekoden som matchar den angivna.</span><span class="sxs-lookup"><span data-stu-id="20a4b-133">In this example, it's the rule that contains the tax code that matches the provided one.</span></span> <span data-ttu-id="20a4b-134">Det innebär att den lämpligaste regeln hittas och att uppräkningsvärdet som konfigureras för den hittade regeln returneras av denna datakälla.</span><span class="sxs-lookup"><span data-stu-id="20a4b-134">As the result, the most appropriate rule is found and the enumeration value that is configured for the found rule is returned by this data source.</span></span>

> [!NOTE]
> <span data-ttu-id="20a4b-135">Ett undantag utlöses när ingen tillämplig regel hittas.</span><span class="sxs-lookup"><span data-stu-id="20a4b-135">An exception is thrown when no applicable rule is found.</span></span> <span data-ttu-id="20a4b-136">Om du vill förhindra dessa undantag kan du konfigurera ytterligare regler i slutet av regellistan som hanterar fall där ett icke-konfigurerat värde eller inget värde anges.</span><span class="sxs-lookup"><span data-stu-id="20a4b-136">To prevent these exceptions, configure additional rules at the end of the rules list to handle cases when a non-configured value or no value is provided.</span></span> <span data-ttu-id="20a4b-137">Använd alternativen **\*Ej tom**\* och **\*Tom**\* i enlighet därmed.</span><span class="sxs-lookup"><span data-stu-id="20a4b-137">Use the **\*Not blank**\* and **\*Blank**\* options accordingly.</span></span>  
>
> ![Lägg till en datakälla för att anropa den konfigurerade sökdatakällan](./media/er-lookup-data-sources-img7.png)

<span data-ttu-id="20a4b-139">När du anger alternativet **Mellan företag** som **Ja** för den redigerbara sökdatakällan lägger du till en ny, erforderlig **Företag**-parameter i parameteruppsättningen i denna datakälla.</span><span class="sxs-lookup"><span data-stu-id="20a4b-139">When you set the **Cross-company** option to **Yes** for the editable lookup data source, you add a new required **Company** parameter to the set of parameters of this data source.</span></span> <span data-ttu-id="20a4b-140">Värdet för parametern **Företag** måste anges vid körning när sökdatakällan anropas.</span><span class="sxs-lookup"><span data-stu-id="20a4b-140">The value of the **Company** parameter must be specified at runtime when the lookup data source is called.</span></span> <span data-ttu-id="20a4b-141">När företagskoden anges vid körning används de regler som konfigurerats för detta företag för att hitta den lämpligaste regeln, och motsvarande värde returneras.</span><span class="sxs-lookup"><span data-stu-id="20a4b-141">When the company code is specified at runtime, the rules configured for this company are used to find the most appropriate rule, and the corresponding value is returned.</span></span> <span data-ttu-id="20a4b-142">I följande bild visas hur du kan göra detta och hur uppsättningen av parametrar för den redigerbara datakällan ändras.</span><span class="sxs-lookup"><span data-stu-id="20a4b-142">The following illustration shows how you can do this and how the set of parameters of the editable data source is changed.</span></span>

   ![Granska sökningsdatakällan mellan företag tillhörande typen Formatuppräkning\Sökningstyp](./media/er-lookup-data-sources-img8.gif)

> [!NOTE]
> <span data-ttu-id="20a4b-144">Välj alla företag separat för att konfigurera regeluppsättningen för denna sökdatakälla för det redigerbara ER-formatet.</span><span class="sxs-lookup"><span data-stu-id="20a4b-144">Select every company seperately to configure the set of rules for this lookup data source of the editable ER format.</span></span> <span data-ttu-id="20a4b-145">Ett undantag avslutas vid körning när sökning mellan företag anropas med koden för det företag för vilket sökinställningen inte kunde slutföras.</span><span class="sxs-lookup"><span data-stu-id="20a4b-145">An exception is thrown at runtime when the cross-company lookup is called with the code of the company for which the lookup setting was not completed.</span></span>
>
> <span data-ttu-id="20a4b-146">Se till att du beviljar behörigheter för en användare som kör ER-formatet med datakällan **Sökning** mellan företag, så att denne får åtkomst till data för samtliga företag som finns i denna datakällas definitionsområde.</span><span class="sxs-lookup"><span data-stu-id="20a4b-146">Make sure that you grant permissions for a user who runs the ER format with the cross-company **Lookup** data source to access the data of every company that is in scope of this data source.</span></span> <span data-ttu-id="20a4b-147">I annat fall körs ett undantag i samband med körning.</span><span class="sxs-lookup"><span data-stu-id="20a4b-147">Otherwise, an exception is thrown at runtime.</span></span>

<span data-ttu-id="20a4b-148">Med start i version 10.0.19 finns de utökade funktionerna för datakällor för **Sökning** tillgängliga.</span><span class="sxs-lookup"><span data-stu-id="20a4b-148">Starting in version 10.0.19, the extended capabilities of the **Lookup** data sources are available.</span></span> <span data-ttu-id="20a4b-149">När du anger alternativet **Utökat** som **Ja** för den redigerbara sökdatakällan omvandlas den konfigureras sökdatakällan till den strukturerade datakälla som ger ytterligare möjligheter att analysera den konfigurerade regeluppsättningen.</span><span class="sxs-lookup"><span data-stu-id="20a4b-149">When you set the **Extended** option to **Yes** for the editable lookup data source, the configured lookup data source is transformed to the structured data source that offers the additional capabilities to analyze the configured set of rules.</span></span> <span data-ttu-id="20a4b-150">Illustrationen nedan visar denna omvandling.</span><span class="sxs-lookup"><span data-stu-id="20a4b-150">The following illustration shows this transformation.</span></span>

   ![Granskning av strukturerad sökdatakälla för typen Formatuppräkning\Sökning](./media/er-lookup-data-sources-img9.gif)

- <span data-ttu-id="20a4b-152">Underartikeln **Sökning** har utformats som en funktion för att hitta den lämpligaste regeln från uppsättningen konfigurerbara regler baserat på den tillhandahållna uppsättningen parametrar.</span><span class="sxs-lookup"><span data-stu-id="20a4b-152">The **Lookup** sub-item is designed as a function to find the most appropriate rule from the set of configurable rules based on the provided set of parameters.</span></span>
- <span data-ttu-id="20a4b-153">Underartikeln **IsLookupResultSet** har utformats som en funktion för att acceptera det angivna värdet i datakällan för basräkning och returnera det *booleska* värdet **True** när uppsättningen regler innehåller minst en regel för vilken det angivna uppräkningsvärdet har konfigurerats som ett returnerat värde.</span><span class="sxs-lookup"><span data-stu-id="20a4b-153">The **IsLookupResultSet** sub-item is designed as a function to accept the provided value of the base enumeration data source and return the *Boolean* value of **True** when the set of rules contain at least one rule for which the provided enumeration value was configured as a returned value.</span></span> <span data-ttu-id="20a4b-154">Denna funktion returnerar det *booleska* värdet **False** när det inte finns några konfigurerade regler för att returnera det angivna uppräkningsvärdet.</span><span class="sxs-lookup"><span data-stu-id="20a4b-154">This function returns the *Boolean* value of **False** when there are no rules configured to return the provided enumeration value.</span></span>
- <span data-ttu-id="20a4b-155">Underartikeln **Inställning** har utformats som en funktion som returnerar uppsättningen konfigurerade regler som poster i en postlista.</span><span class="sxs-lookup"><span data-stu-id="20a4b-155">The **Setting** sub-item is designed as a function that returns the set of configured rules as records of a record list.</span></span> <span data-ttu-id="20a4b-156">Returnerade värden och uppsättningen parametrar för de konfigurerade reglerna visas i alla returnerade poster som fält för relevanta datatyper:</span><span class="sxs-lookup"><span data-stu-id="20a4b-156">The returned values and the set of parameters of the configured rules are presented in every returned record as fields of the relevant data types:</span></span>

    - <span data-ttu-id="20a4b-157">Det returnerade värdet visas som fältet **Sökningsresultat**.</span><span class="sxs-lookup"><span data-stu-id="20a4b-157">The returned value is presented as the **Lookup result** field.</span></span>
    - <span data-ttu-id="20a4b-158">De konfigurerade parametrarna presenteras som fält med namn på parametrar (fältet **Kod** i detta exempel).</span><span class="sxs-lookup"><span data-stu-id="20a4b-158">The configured parameters are presented as fields having names of parameters (**Code** field in this example).</span></span>

<span data-ttu-id="20a4b-159">Mer information om hur du konfigurerar datakällan för **Sökning** finns i [Konfigurera ER-format att använda parametrar som anges per juridisk person](er-app-specific-parameters-configure-format.md).</span><span class="sxs-lookup"><span data-stu-id="20a4b-159">For more information about to how configure the **Lookup** data source, see [Configure ER formats to use parameters that are specified per legal entity](er-app-specific-parameters-configure-format.md).</span></span> <span data-ttu-id="20a4b-160">Mer information om hur du ställer in sökningsreglerna finns i [Ställa in parametrar för ett ER-format per juridisk person](er-app-specific-parameters-set-up.md).</span><span class="sxs-lookup"><span data-stu-id="20a4b-160">To learn how to set the Lookup rules, see [Set up the parameters of an ER format per legal entity](er-app-specific-parameters-set-up.md).</span></span>

## <a name="additional-resources"></a><span data-ttu-id="20a4b-161">Ytterligare resurser</span><span class="sxs-lookup"><span data-stu-id="20a4b-161">Additional resources</span></span>

[<span data-ttu-id="20a4b-162">Konfigurera ER-format för användning av parametrar som anges per juridisk person</span><span class="sxs-lookup"><span data-stu-id="20a4b-162">Configure ER formats to use parameters that are specified per legal entity</span></span>](er-app-specific-parameters-configure-format.md)

[<span data-ttu-id="20a4b-163">Ställa in parametrarna för ett ER-format per juridisk person</span><span class="sxs-lookup"><span data-stu-id="20a4b-163">Set up the parameters of an ER format per legal entity</span></span>](er-app-specific-parameters-set-up.md)

---
title: Skapa ett Azure Storage-konto och ett nyckelvalv
description: I det här avsnittet beskrivs hur du skapar ett Azure Storage-konto och nyckelvalv.
author: gionoder
manager: AnnBe
ms.date: 09/22/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-platform
ms.technology: ''
ms.search.form: ''
audience: Application User
ms.reviewer: kfend
ms.search.scope: Core, Operations
ms.custom: 97423
ms.assetid: ''
ms.search.region: Global
ms.author: janeaug
ms.search.validFrom: 2020-07-08
ms.dyn365.ops.version: AX 10.0.12
ms.openlocfilehash: b8e39539f767cc2944a9a7fdda09121921c64763
ms.sourcegitcommit: 025561f6a21fe8705493daa290f3f6bfb9f1b962
ms.translationtype: HT
ms.contentlocale: sv-SE
ms.lasthandoff: 09/23/2020
ms.locfileid: "3836040"
---
# <a name="create-an-azure-storage-account-and-a-key-vault"></a><span data-ttu-id="3480d-103">Skapa ett Azure Storage-konto och ett nyckelvalv</span><span class="sxs-lookup"><span data-stu-id="3480d-103">Create an Azure storage account and a key vault</span></span>

[!include [banner](../includes/banner.md)]
[!include [banner](../includes/preview-banner.md)]


<span data-ttu-id="3480d-104">Tilläggstjänsten elektronisk fakturering tar ansvar för lagringen av alla dina affärsdata i de Microsoft Azure-resurser som företaget äger.</span><span class="sxs-lookup"><span data-stu-id="3480d-104">The Electronic invoicing add-on service takes responsibility for storing all your business data in the Microsoft Azure resources that are owned by your company.</span></span> <span data-ttu-id="3480d-105">Du måste skapa två huvudresurser för Azure om du vill säkerställa att tjänsten fungerar korrekt och att alla affärsdata som behövs för och genereras av tilläggstjänsten elektronisk fakturering endast används av tillägget.</span><span class="sxs-lookup"><span data-stu-id="3480d-105">To ensure that the service works correctly, and that all the business data that is needed for and generated by the Electronic invoicing add-on is accessed only by the add-on, you must create two main Azure resources:</span></span>

- <span data-ttu-id="3480d-106">Ett Azure Storage-konto (Blob Storage) för att lagra elektroniska fakturor</span><span class="sxs-lookup"><span data-stu-id="3480d-106">An Azure storage account (Blob storage) to store electronic invoices</span></span>
- <span data-ttu-id="3480d-107">Ett Azure Key-valv för lagring av certifikat och Uniform Resource Identifier (URI) för lagringskontot</span><span class="sxs-lookup"><span data-stu-id="3480d-107">An Azure key vault to store certificates and the Uniform Resource Identifier (URI) of the storage account</span></span>

> [!NOTE]
> <span data-ttu-id="3480d-108">En särskild nyckelvalvresurs och kundens Blob Storage måste allokeras specifikt för att användas med tillägget för elektronisk fakturering.</span><span class="sxs-lookup"><span data-stu-id="3480d-108">A dedicated key vault resource and customer Blob storage must be allocated specifically for use with the Electronic invoicing add-on.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="3480d-109">Förutsättningar</span><span class="sxs-lookup"><span data-stu-id="3480d-109">Prerequisites</span></span>

<span data-ttu-id="3480d-110">Innan du kan slutföra stegen i det här ämnet måste du se till att följande uppgifter har slutförts:</span><span class="sxs-lookup"><span data-stu-id="3480d-110">Before you can complete the steps in this topic, you must make sure that the following tasks have been completed:</span></span>

- <span data-ttu-id="3480d-111">Skapa en nyckelvalvresurs i Azure.</span><span class="sxs-lookup"><span data-stu-id="3480d-111">Create a key vault resource in Azure.</span></span> <span data-ttu-id="3480d-112">Mer information om mått finns i [Om Azure Key Vault](https://docs.microsoft.com/azure/key-vault/general/overview).</span><span class="sxs-lookup"><span data-stu-id="3480d-112">For more information, see [About Azure Key Vault](https://docs.microsoft.com/azure/key-vault/general/overview).</span></span>
- <span data-ttu-id="3480d-113">Skapa ett Azure Storage-konto (Blob Storage).</span><span class="sxs-lookup"><span data-stu-id="3480d-113">Create an Azure storage account (Blob storage).</span></span> <span data-ttu-id="3480d-114">Mer information finns i [Underhålla Azure Storage-kontot](https://docs.microsoft.com/azure/storage/blobs/).</span><span class="sxs-lookup"><span data-stu-id="3480d-114">For more information, see [Maintaining Azure Storage Account](https://docs.microsoft.com/azure/storage/blobs/).</span></span>

## <a name="overview"></a><span data-ttu-id="3480d-115">Översikt</span><span class="sxs-lookup"><span data-stu-id="3480d-115">Overview</span></span>

<span data-ttu-id="3480d-116">I det här avsnittet ska du utföra två huvudsteg:</span><span class="sxs-lookup"><span data-stu-id="3480d-116">In this topic, you will complete two main steps:</span></span>

- <span data-ttu-id="3480d-117">Konfigurera Azure Storage-kontot för att hämta lagringskontots URI.</span><span class="sxs-lookup"><span data-stu-id="3480d-117">Set up the Azure storage account to get the storage account URI.</span></span>
- <span data-ttu-id="3480d-118">Ställ in nyckelvalvet för att lagra lagringskontots URI.</span><span class="sxs-lookup"><span data-stu-id="3480d-118">Set up the key vault to store the storage account URI.</span></span>

## <a name="set-up-the-azure-storage-account-to-get-the-storage-account-uri"></a><span data-ttu-id="3480d-119">Konfigurera Azure Storage-kontot för att hämta lagringskontots URI</span><span class="sxs-lookup"><span data-stu-id="3480d-119">Set up the Azure storage account to get the storage account URI</span></span>

1. <span data-ttu-id="3480d-120">Öppna det lagringskonto som du vill använda med tillägget elektroniska fakturering.</span><span class="sxs-lookup"><span data-stu-id="3480d-120">Open the storage account that you plan to use with the Electronic invoicing add-on.</span></span>
2. <span data-ttu-id="3480d-121">Gå till **Blob Service** \> **Behållare** och skapa en ny behållare.</span><span class="sxs-lookup"><span data-stu-id="3480d-121">Go to **Blob service** \> **Containers**, and create a new container.</span></span>
3. <span data-ttu-id="3480d-122">Ange ett namn på behållaren och ställ in fältet **Offentlig åtkomstnivå** på **Privat (ingen anonym åtkomst)**.</span><span class="sxs-lookup"><span data-stu-id="3480d-122">Enter a name for the container, and set the **Public access level** field to **Private (no anonymous access)**.</span></span>
4. <span data-ttu-id="3480d-123">Öppna behållaren och gå till **Inställningar \> Åtkomstpolicy**.</span><span class="sxs-lookup"><span data-stu-id="3480d-123">Open the container, and go to **Settings \> Access policy**.</span></span>
5. <span data-ttu-id="3480d-124">Välj **Lägg till policy** om du vill lägga till en lagrad åtkomstpolicy.</span><span class="sxs-lookup"><span data-stu-id="3480d-124">Select **Add policy** to add a stored access policy.</span></span>
6. <span data-ttu-id="3480d-125">Ange fältet **Identifierare** och **Behörigheter** efter behov.</span><span class="sxs-lookup"><span data-stu-id="3480d-125">Set the **Identifier** and **Permissions** fields as appropriate.</span></span> <span data-ttu-id="3480d-126">I fältet **Behörigheter** bör du välja alla behörigheter.</span><span class="sxs-lookup"><span data-stu-id="3480d-126">In the **Permissions** field, you should select all permissions.</span></span>

    ![Bevilja behörighet för Blob Storage](media/e-Invoicing-services-create-azure-resources-grant-blob-permissions.png)

7. <span data-ttu-id="3480d-128">Ange start- och utgångsdatum.</span><span class="sxs-lookup"><span data-stu-id="3480d-128">Enter the start and expiry dates.</span></span> <span data-ttu-id="3480d-129">Utgångsdatumet måste vara i framtiden.</span><span class="sxs-lookup"><span data-stu-id="3480d-129">The expiry date should be in future.</span></span>
8. <span data-ttu-id="3480d-130">Klicka på **OK** om du vill spara policy och spara sedan ändringarna i behållaren.</span><span class="sxs-lookup"><span data-stu-id="3480d-130">Select **OK** to save the policy, and then save your changes to the container.</span></span>
9. <span data-ttu-id="3480d-131">Gå tillbaka till lagringskontot och öppna **Lagringsutforskaren (förhandsversion)**.</span><span class="sxs-lookup"><span data-stu-id="3480d-131">Return to the storage account, and open **Storage Explorer (preview)**.</span></span>
10. <span data-ttu-id="3480d-132">Högerklicka på behållaren och välj sedan **Hämta signatur för delad åtkomst**.</span><span class="sxs-lookup"><span data-stu-id="3480d-132">Right-click the container, and then select **Get Shared Access Signature**.</span></span>
11. <span data-ttu-id="3480d-133">I dialogrutan **Signatur för delad åtkomst** kopiera och spara värdet **URI**.</span><span class="sxs-lookup"><span data-stu-id="3480d-133">In the **Shared Access Signature** dialog box, copy and store the value in the **URI** field.</span></span> <span data-ttu-id="3480d-134">Det här värdet används i nästa procedur och kallas för *Signatur för delad åtkomst URI*.</span><span class="sxs-lookup"><span data-stu-id="3480d-134">This value will be used in the next procedure and will be referred to as the *shared access signature URI*.</span></span>

    ![Markera och kopiera URI-värdet](media/e-Invoicing-services-create-azure-resources-select-and-copy-uri.png)

## <a name="set-up-the-key-vault-to-store-the-storage-account-uri"></a><span data-ttu-id="3480d-136">Ställ in nyckelvalvet för att lagra lagringskontots URI</span><span class="sxs-lookup"><span data-stu-id="3480d-136">Set up the key vault to store the storage account URI</span></span>

1. <span data-ttu-id="3480d-137">Öppna det nyckelvalv som du vill använda med tillägget elektroniska fakturering.</span><span class="sxs-lookup"><span data-stu-id="3480d-137">Open the key vault that you intend to use with the Electronic invoicing add-on.</span></span>
2. <span data-ttu-id="3480d-138">Gå till **Inställning** \> **Hemligheter** och välj sedan **Generera/importera** om du vill skapa en ny hemlighet.</span><span class="sxs-lookup"><span data-stu-id="3480d-138">Go to **Settings** \> **Secrets**, and then select **Generate/Import** to create a new secret.</span></span>
3. <span data-ttu-id="3480d-139">På sidan **Skapa en hemlighet** i fältet **Överföringsalternativ** välj **Manuell**.</span><span class="sxs-lookup"><span data-stu-id="3480d-139">On the **Create a secret** page, in the **Upload options** field, select **Manual**.</span></span>
4. <span data-ttu-id="3480d-140">Ange namnet på hemligheten.</span><span class="sxs-lookup"><span data-stu-id="3480d-140">Enter the name of the secret.</span></span> <span data-ttu-id="3480d-141">Det här namnet används under installationen av tjänsten i RCS (Regulatory Configuration Service) och kommer att kallas *nyckelvalvets hemliga namn*.</span><span class="sxs-lookup"><span data-stu-id="3480d-141">This name will be used during setup of the service in Regulatory Configuration Service (RCS) and will be referred to as the *key vault secret name*.</span></span>
5. <span data-ttu-id="3480d-142">I fältet **Värde** markera **Signatur för delad åtkomst URI** och välj sedan **Skapa**.</span><span class="sxs-lookup"><span data-stu-id="3480d-142">In the **Value** field, select **Shared Access Signature URI**, and then select **Create**.</span></span>
6. <span data-ttu-id="3480d-143">Ställ in åtkomstprincipen så att tillägget elektronisk fakturering på den korrekta nivån för säker åtkomst till den hemlighet som du har skapat.</span><span class="sxs-lookup"><span data-stu-id="3480d-143">Set up the access policy to grant the Electronic invoicing add-on the correct level of secure access to the secret you created.</span></span> <span data-ttu-id="3480d-144">Gå till **Inställningar \> Åtkomstprinciper** och välj **Lägg till åtkomstprincip**.</span><span class="sxs-lookup"><span data-stu-id="3480d-144">Go to **Settings \> Access policy**, and select **Add Access Policy**.</span></span>
7. <span data-ttu-id="3480d-145">Ange de hemliga behörigheterna för åtgärderna **Hämta** och **Lista**.</span><span class="sxs-lookup"><span data-stu-id="3480d-145">Set the secret permissions for the **Get** and **List** operations.</span></span>

    ![Bevilja tjänståtkomst](media/e-Invoicing-services-create-azure-resources-grant-service-access.png)

8. <span data-ttu-id="3480d-147">Ange certifikatbehörigheter för åtgärderna **Hämta** och **Lista**.</span><span class="sxs-lookup"><span data-stu-id="3480d-147">Set the certificate permissions for **Get** and **List** operations.</span></span>

    ![Bevilja certifikatbehörighet](media/e-Invoicing-services-create-azure-resources-grant-certificate-permission.png)

9. <span data-ttu-id="3480d-149">I dialogrutan **Primär** välj primär genom att lägga till **tillägget elektronisk fakturering**.</span><span class="sxs-lookup"><span data-stu-id="3480d-149">In the **Principal** dialog box, select the principal by adding **Electronic invoicing add-on**.</span></span>
10. <span data-ttu-id="3480d-150">Välj **Lägg till** och välj sedan **Spara ändringar i nyckelvalv**.</span><span class="sxs-lookup"><span data-stu-id="3480d-150">Select **Add**, and then select **Save Key Vault changes**.</span></span>
11. <span data-ttu-id="3480d-151">På sidan **Översikt** kopiera värdet **DNS-namn** för nyckelvalvet.</span><span class="sxs-lookup"><span data-stu-id="3480d-151">On the **Overview** page, copy the **DNS name** value for the key vault.</span></span> <span data-ttu-id="3480d-152">Det här värdet kommer att användas under installationen av tjänsten i RCS och kallas *nyckelvalv-URI*.</span><span class="sxs-lookup"><span data-stu-id="3480d-152">This value will be used during setup of the service in RCS and will be referred as the *key vault URI*.</span></span>

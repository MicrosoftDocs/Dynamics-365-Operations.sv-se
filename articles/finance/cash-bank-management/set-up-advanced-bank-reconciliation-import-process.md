---
title: Ställa in importprocessen för avancerad bankavstämning
description: Funktionen Avancerad bankavstämning låter dig importera elektroniska bankutdrag och utföra en automatiskt avstämning mot banktransaktioner i Microsoft Dynamics 365 Finance. Den här artikeln innehåller en beskrivning av hur du ställer in importfunktionen för bankutdrag.
author: panolte
manager: AnnBe
ms.date: 06/20/2017
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
ms.search.form: BankStatementFormat
audience: Application User
ms.reviewer: roschlom
ms.search.scope: Core, Operations
ms.custom: 106853
ms.assetid: 45dae275-ea45-4c7e-b38f-89297c7b5352
ms.search.region: Global
ms.author: panolte
ms.search.validFrom: 2016-02-28
ms.dyn365.ops.version: AX 7.0.0
ms.openlocfilehash: 45f997a91701e3fc63278cdba3479dec9dc7a467
ms.sourcegitcommit: 74b10104338222a945684d841d60ab4b8e570168
ms.translationtype: HT
ms.contentlocale: sv-SE
ms.lasthandoff: 09/28/2020
ms.locfileid: "3899676"
---
# <a name="set-up-the-advanced-bank-reconciliation-import-process"></a><span data-ttu-id="47e27-104">Ställa in importprocessen för avancerad bankavstämning</span><span class="sxs-lookup"><span data-stu-id="47e27-104">Set up the advanced bank reconciliation import process</span></span>

[!include [banner](../includes/banner.md)]

<span data-ttu-id="47e27-105">Funktionen Avancerad bankavstämning låter dig importera elektroniska bankutdrag och utföra en automatiskt avstämning mot banktransaktioner i Dynamics 365 Finance.</span><span class="sxs-lookup"><span data-stu-id="47e27-105">The Advanced bank reconciliation feature lets you import electronic bank statements and automatically reconcile them with bank transactions in Dynamics 365 Finance.</span></span> <span data-ttu-id="47e27-106">Den här artikeln innehåller en beskrivning av hur du ställer in importfunktionen för bankutdrag.</span><span class="sxs-lookup"><span data-stu-id="47e27-106">This article explains how to set up the import functionality for your bank statements.</span></span> 

<span data-ttu-id="47e27-107">Inställningen för import av bankutdrag varierar beroende på formatet på det elektroniska bankutdraget.</span><span class="sxs-lookup"><span data-stu-id="47e27-107">The setup for bank statement import varies, depending on the format of your electronic bank statement.</span></span> <span data-ttu-id="47e27-108">Finance stöder tre färdiga format för bankutdrag: ISO20022, MT940 och BAI2.</span><span class="sxs-lookup"><span data-stu-id="47e27-108">Finance supports three bank statement formats out of the box: ISO20022, MT940, and BAI2.</span></span>

## <a name="set-time-zone-preference"></a><span data-ttu-id="47e27-109">Ställ in förinställd tidszon</span><span class="sxs-lookup"><span data-stu-id="47e27-109">Set time zone preference</span></span>
<span data-ttu-id="47e27-110">När du konfigurerar importinställningarna för bankutdraget kan det vara viktigt att ta hänsyn till tidszonen för datum- och tidsdata i de bankutdragsdokument som ska importeras.</span><span class="sxs-lookup"><span data-stu-id="47e27-110">When you configure the bank statement import settings, it can be important to consider the time zone of the date-time data within the bank statement files that will be imported.</span></span> <span data-ttu-id="47e27-111">Standardvärdet är att alla datum- och tidsvärden redan finns i UTC-tid (Coordinated Universal Time) och att ingen tidszonkonvertering kommer att användas när du importerar data.</span><span class="sxs-lookup"><span data-stu-id="47e27-111">The default is to assume any date and time values are already in Coordinated Universal Time (UTC) and so no time zone conversion will be applied when you import the data.</span></span> 

<span data-ttu-id="47e27-112">Det finns ett tillgängligt alternativ för att ange en tidszon som ska användas för import av data.</span><span class="sxs-lookup"><span data-stu-id="47e27-112">There is an option available to specify a time zone to use for importing data.</span></span> <span data-ttu-id="47e27-113">Det här alternativet är tillgängligt i fältet **Förinställd tidszon** på varje sida för **information om källdataformat** snabbfliken **(arbetsyta för datahantering > konfigurera datakällor > välja ett dataformat > nationella inställningar**).</span><span class="sxs-lookup"><span data-stu-id="47e27-113">This option is available in the **Time zone preference** field on each **Source data format details** page (**Data management workspace > Configure data sources > Select a data format > Regional settings** FastTab).</span></span> <span data-ttu-id="47e27-114">Den här tidszonsinställningen kommer att gälla för all import som använder detta källdataformat.</span><span class="sxs-lookup"><span data-stu-id="47e27-114">This time zone preference you enter will apply to all the imports that use that source data format.</span></span> <span data-ttu-id="47e27-115">Du kan skapa så många datakällformat som du behöver för att importera data från flera tidszoner.</span><span class="sxs-lookup"><span data-stu-id="47e27-115">You can create as many data source formats as needed for importing data from multiple time zones.</span></span>  

<span data-ttu-id="47e27-116">Den här tidszonen kanske inte är densamma som användarens eller företagets tidszon, så du bör klargöra vilken tidszon som datum- och tidsinformationen använder.</span><span class="sxs-lookup"><span data-stu-id="47e27-116">This time zone might not be the same as a user’s or company’s time zone, so be sure to clarify what time zone the date and time data is using.</span></span> <span data-ttu-id="47e27-117">Vi rekommenderar att du tar hänsyn till följande punkter när du anger en tidszonsinställning.</span><span class="sxs-lookup"><span data-stu-id="47e27-117">We recommend that you consider the following points when setting a time zone preference.</span></span> 

 - <span data-ttu-id="47e27-118">Tidszonsinställningen kommer att gälla för all import med detta källdataformat.</span><span class="sxs-lookup"><span data-stu-id="47e27-118">The time zone preference will apply to all imports using that source data format.</span></span> <span data-ttu-id="47e27-119">Du kan skapa så många datakällformat som du behöver för att hantera import av data från flera tidszoner.</span><span class="sxs-lookup"><span data-stu-id="47e27-119">You can create as many data source formats as needed to handle importing data from multiple time zones.</span></span> 
 
 - <span data-ttu-id="47e27-120">Tids zons inställningen bör vara den lokala tidszonen för datum- och tidsdata i importfilen.</span><span class="sxs-lookup"><span data-stu-id="47e27-120">The time zone preference should be the local time zone of the date and time data in the import file.</span></span> 
 
 - <span data-ttu-id="47e27-121">Tids zonen för datum- och tidsdata kanske inte är samma som användarens eller företagets tidszon.</span><span class="sxs-lookup"><span data-stu-id="47e27-121">The time zone of the date and time data might not be the same as a user’s or company’s time zone.</span></span>
 
 - <span data-ttu-id="47e27-122">Användarna kan justera sin egen tidszon med hjälp av deras **användaralternativ**.</span><span class="sxs-lookup"><span data-stu-id="47e27-122">Users can adjust their own time zone using their **User options**.</span></span>

<span data-ttu-id="47e27-123">Observera att följande åtgärder kan hjälpa till att minimera potentiella datum- och tidskonflikter när du importerar bankutdrag.</span><span class="sxs-lookup"><span data-stu-id="47e27-123">Note that the following actions can help minimize potential date and time conflicts when you import bank statements.</span></span> 

 - <span data-ttu-id="47e27-124">Undvik att ändra inställningarna för tidszon för alla bankkonton som redan har utdrag importerade.</span><span class="sxs-lookup"><span data-stu-id="47e27-124">Avoid changing the time zone preferences for any bank accounts that have already had statements imported.</span></span> <span data-ttu-id="47e27-125">Om du ändrar tidszonsinställningen kan det påverka hur nya satser ordnas i förhållande till befintliga programsatser som beror på tidszonsjusteringen.</span><span class="sxs-lookup"><span data-stu-id="47e27-125">Changing the time zone preference could impact the ordering of new statements relative to existing statements due to the time zone adjustment.</span></span> 
 
 - <span data-ttu-id="47e27-126">Granska all import som använder det valda datakällformatet.</span><span class="sxs-lookup"><span data-stu-id="47e27-126">Review all the imports that use the selected data source format.</span></span> <span data-ttu-id="47e27-127">Den förinställda tidszon som har angetts för formatet används för alla importprojekt som använder det formatet.</span><span class="sxs-lookup"><span data-stu-id="47e27-127">The time zone preference specified for the format will apply to all the import projects that use that format.</span></span> <span data-ttu-id="47e27-128">Verifiera att förinställd tidszon som har angetts är lämpligt för alla importprojekt som använder det formatet.</span><span class="sxs-lookup"><span data-stu-id="47e27-128">Verify that the time zone preference is appropriate for all the import projects that use that format.</span></span>

## <a name="sample-files"></a><span data-ttu-id="47e27-129">Exempelfiler</span><span class="sxs-lookup"><span data-stu-id="47e27-129">Sample files</span></span>
<span data-ttu-id="47e27-130">För alla de tre formaten behöver du ha filer som översätter det elektroniska bankutdraget från originalformatet till ett format som kan användas för Finance.</span><span class="sxs-lookup"><span data-stu-id="47e27-130">For all three formats, you must have files that translate the electronic bank statement from the original format to a format that Finance can use.</span></span> <span data-ttu-id="47e27-131">Du kan hitta nödvändiga resursfiler under noden **Resurser** i programutforskaren i Microsoft Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="47e27-131">You can find the required resource files under the **Resources** node in Application Explorer in Microsoft Visual Studio.</span></span> <span data-ttu-id="47e27-132">När du har hittat filerna kan du kopiera dem till en enstaka känd plats, så att du enklare kan överföra dem under inställningsprocessen.</span><span class="sxs-lookup"><span data-stu-id="47e27-132">After you find the files, copy them to a single known location, so that you can more easily upload them during the setup process.</span></span>

| <span data-ttu-id="47e27-133">Resursnamn</span><span class="sxs-lookup"><span data-stu-id="47e27-133">Resource name</span></span>                                           | <span data-ttu-id="47e27-134">Filnamn</span><span class="sxs-lookup"><span data-stu-id="47e27-134">File name</span></span>                            |
|---------------------------------------------------------|--------------------------------------|
| <span data-ttu-id="47e27-135">BankStmtImport\_BAI2CSV\_till\_BAI2XML\_xslt</span><span class="sxs-lookup"><span data-stu-id="47e27-135">BankStmtImport\_BAI2CSV\_to\_BAI2XML\_xslt</span></span>              | <span data-ttu-id="47e27-136">BAI2CSV-to-BAI2XML.xslt</span><span class="sxs-lookup"><span data-stu-id="47e27-136">BAI2CSV-to-BAI2XML.xslt</span></span>              |
| <span data-ttu-id="47e27-137">BankStmtImport\_BAI2XML\_till\_Reconciliation\_xslt</span><span class="sxs-lookup"><span data-stu-id="47e27-137">BankStmtImport\_BAI2XML\_to\_Reconciliation\_xslt</span></span>       | <span data-ttu-id="47e27-138">BAI2XML-to-Reconciliation.xslt</span><span class="sxs-lookup"><span data-stu-id="47e27-138">BAI2XML-to-Reconciliation.xslt</span></span>       |
| <span data-ttu-id="47e27-139">BankStmtImport\_BankReconciliation\_to\_Composite\_xslt</span><span class="sxs-lookup"><span data-stu-id="47e27-139">BankStmtImport\_BankReconciliation\_to\_Composite\_xslt</span></span> | <span data-ttu-id="47e27-140">BankReconciliation-to-Composite.xslt</span><span class="sxs-lookup"><span data-stu-id="47e27-140">BankReconciliation-to-Composite.xslt</span></span> |
| <span data-ttu-id="47e27-141">BankStmtImport\_ISO20022XML\_till\_Reconciliation\_xslt</span><span class="sxs-lookup"><span data-stu-id="47e27-141">BankStmtImport\_ISO20022XML\_to\_Reconciliation\_xslt</span></span>   | <span data-ttu-id="47e27-142">ISO20022XML-to-Reconciliation.xslt</span><span class="sxs-lookup"><span data-stu-id="47e27-142">ISO20022XML-to-Reconciliation.xslt</span></span>   |
| <span data-ttu-id="47e27-143">BankStmtImport\_MT940TXT\_till\_MT940XML\_xslt</span><span class="sxs-lookup"><span data-stu-id="47e27-143">BankStmtImport\_MT940TXT\_to\_MT940XML\_xslt</span></span>            | <span data-ttu-id="47e27-144">MT940TXT-to-MT940XML.xslt</span><span class="sxs-lookup"><span data-stu-id="47e27-144">MT940TXT-to-MT940XML.xslt</span></span>            |
| <span data-ttu-id="47e27-145">BankStmtImport\_MT940XML\_till\_Reconciliation\_xslt</span><span class="sxs-lookup"><span data-stu-id="47e27-145">BankStmtImport\_MT940XML\_to\_Reconciliation\_xslt</span></span>      | <span data-ttu-id="47e27-146">MT940XML-to-Reconciliation.xslt</span><span class="sxs-lookup"><span data-stu-id="47e27-146">MT940XML-to-Reconciliation.xslt</span></span>      |
| <span data-ttu-id="47e27-147">BankStmtImport\_SampleBankCompositeEntity\_xml</span><span class="sxs-lookup"><span data-stu-id="47e27-147">BankStmtImport\_SampleBankCompositeEntity\_xml</span></span>          | <span data-ttu-id="47e27-148">SampleBankCompositeEntity.xml</span><span class="sxs-lookup"><span data-stu-id="47e27-148">SampleBankCompositeEntity.xml</span></span>        |

## <a name="examples-of-bank-statement-formats-and-technical-layouts"></a><span data-ttu-id="47e27-149">Exempel på bankutdragsformat och tekniska layouter</span><span class="sxs-lookup"><span data-stu-id="47e27-149">Examples of bank statement formats and technical layouts</span></span>
<span data-ttu-id="47e27-150">Nedan visas exempel på layoutdefinitioner för den avancerade bankavstämningimportfilen samt tre relaterade exempel på bankutdragsfiler: https://mbs.microsoft.com/customersource/northamerica/AX/learning/documentation/how-to-articles/exofbankstfotechlayouts</span><span class="sxs-lookup"><span data-stu-id="47e27-150">Below are examples of the advanced bank reconciliation import file technical layout definitions and three related bank statement example files: https://mbs.microsoft.com/customersource/northamerica/AX/learning/documentation/how-to-articles/exofbankstfotechlayouts</span></span>  

| <span data-ttu-id="47e27-151">Teknisk layoutdefinition</span><span class="sxs-lookup"><span data-stu-id="47e27-151">Technical layout definition</span></span>                             | <span data-ttu-id="47e27-152">Bankutdragsexempelfil</span><span class="sxs-lookup"><span data-stu-id="47e27-152">Bank statement example file</span></span>          |
|---------------------------------------------------------|--------------------------------------|
| <span data-ttu-id="47e27-153">DynamicsAXMT940Layout</span><span class="sxs-lookup"><span data-stu-id="47e27-153">DynamicsAXMT940Layout</span></span>                                   | <span data-ttu-id="47e27-154">MT940StatementExample</span><span class="sxs-lookup"><span data-stu-id="47e27-154">MT940StatementExample</span></span>                |
| <span data-ttu-id="47e27-155">DynamicsAXISO20022Layout</span><span class="sxs-lookup"><span data-stu-id="47e27-155">DynamicsAXISO20022Layout</span></span>                                | <span data-ttu-id="47e27-156">ISO20022StatementExample</span><span class="sxs-lookup"><span data-stu-id="47e27-156">ISO20022StatementExample</span></span>             |
| <span data-ttu-id="47e27-157">DynamicsAXBAI2Layout</span><span class="sxs-lookup"><span data-stu-id="47e27-157">DynamicsAXBAI2Layout</span></span>                                    | <span data-ttu-id="47e27-158">BAI2StatementExample</span><span class="sxs-lookup"><span data-stu-id="47e27-158">BAI2StatementExample</span></span>                 |



## <a name="set-up-the-import-of-iso20022-bank-statements"></a><span data-ttu-id="47e27-159">Ställa in import av ISO20022-bankutdrag</span><span class="sxs-lookup"><span data-stu-id="47e27-159">Set up the import of ISO20022 bank statements</span></span>
<span data-ttu-id="47e27-160">Först måste du definiera bankutdragets formatbearbetningsgrupp för ISO20022-bankutdrag med hjälp av ramverket för datatabellen.</span><span class="sxs-lookup"><span data-stu-id="47e27-160">First, you must define the bank statement format processing group for ISO20022 bank statements by using the data entity framework.</span></span>

1.  <span data-ttu-id="47e27-161">Gå till **Arbetsytor** &gt; **Datahantering**.</span><span class="sxs-lookup"><span data-stu-id="47e27-161">Go to **Workspaces** &gt; **Data management**.</span></span>
2.  <span data-ttu-id="47e27-162">Klicka på **Importera**.</span><span class="sxs-lookup"><span data-stu-id="47e27-162">Click **Import**.</span></span>
3.  <span data-ttu-id="47e27-163">Ange ett namn på formatet såsom **ISO20022**.</span><span class="sxs-lookup"><span data-stu-id="47e27-163">Enter a name for the format, such as **ISO20022**.</span></span>
4.  <span data-ttu-id="47e27-164">Ställ in fältet **Källdataformat** på **XML-element**.</span><span class="sxs-lookup"><span data-stu-id="47e27-164">Set the **Source data format** field to **XML-Element**.</span></span>
5.  <span data-ttu-id="47e27-165">Ställ in fältet **Enhetsnamn** på **Bankutdrag**.</span><span class="sxs-lookup"><span data-stu-id="47e27-165">Set the **Entity name** field to **Bank statements**.</span></span>
6.  <span data-ttu-id="47e27-166">Om du vill hämta importfilerna klickar du på **Överför** och bläddrar till filen **SampleBankCompositeEntity.xml** som du sparade tidigare och markerar den.</span><span class="sxs-lookup"><span data-stu-id="47e27-166">To upload the import files, click **Upload**, and then browse to select the **SampleBankCompositeEntity.xml** file that you saved earlier.</span></span>
7.  <span data-ttu-id="47e27-167">När bankutdragsenheten överförs och mappningen är slutförd ska du klicka på åtgärden **Visa mappning** för enheten.</span><span class="sxs-lookup"><span data-stu-id="47e27-167">After the Bank statements entity is uploaded and the mapping is completed, click the **View map** action for the entity.</span></span>
8.  <span data-ttu-id="47e27-168">Bankutdragsenheten är en sammansatt enhet som består av fyra separata enheter.</span><span class="sxs-lookup"><span data-stu-id="47e27-168">The Bank statements entity is a composite entity that consists of four separate entities.</span></span> <span data-ttu-id="47e27-169">Markera **BankStatementDocumentEntity** i listan och klicka sedan på åtgärden **Visa mappning**.</span><span class="sxs-lookup"><span data-stu-id="47e27-169">In the list, select **BankStatementDocumentEntity**, and then click the **View map** action.</span></span>
9.  <span data-ttu-id="47e27-170">På fliken **Transformationer**, klicka på **Ny**.</span><span class="sxs-lookup"><span data-stu-id="47e27-170">On the **Transformations** tab, click **New**.</span></span>
10. <span data-ttu-id="47e27-171">För löpnummer 1 klickar du på **Överför fil** och väljer filen **ISO20022XML-to-Reconciliation.xslt** som du sparade tidigare.</span><span class="sxs-lookup"><span data-stu-id="47e27-171">For sequence number 1, click **Upload file**, and select the **ISO20022XML-to-Reconciliation.xslt** file that you saved earlier.</span></span> <span data-ttu-id="47e27-172">**Obs!** Transformeringsfiler är byggda för standardformatet.</span><span class="sxs-lookup"><span data-stu-id="47e27-172">**Note:** Transformation files are built for the standard format.</span></span> <span data-ttu-id="47e27-173">Eftersom banker ofta avviker från detta format behöver du uppdatera transformeringsfilen för att mappa till ditt bankutdragsformat.</span><span class="sxs-lookup"><span data-stu-id="47e27-173">Because banks often diverge from this format, you may have to update the transformation file to map to your bank statement format.</span></span> <!-- For details about the expected format for ISO20022, see [Dynamics AX ISO20022 Layout](./media/dynamicsaxiso20022layout1.xlsx).-->
11. <span data-ttu-id="47e27-174">Klicka på **Ny**.</span><span class="sxs-lookup"><span data-stu-id="47e27-174">Click **New**.</span></span>
12. <span data-ttu-id="47e27-175">För löpnummer 2 klickar du på **Överför fil** och väljer filen **BankReconciliation-to-Composite.xslt** som du sparade tidigare.</span><span class="sxs-lookup"><span data-stu-id="47e27-175">For sequence number 2, click **Upload file**, and select the **BankReconciliation-to-Composite.xslt** file that you saved earlier.</span></span>
13. <span data-ttu-id="47e27-176">Klicka på **Tillämpa transformeringar**.</span><span class="sxs-lookup"><span data-stu-id="47e27-176">Click **Apply transforms**.</span></span>

<span data-ttu-id="47e27-177">När formatbearbetningsgruppen har ställts in är nästa steg att definiera formatregler för ISO20022-bankutdrag.</span><span class="sxs-lookup"><span data-stu-id="47e27-177">After the format processing group is set up, the next step is to define the bank statement format rules for ISO20022 bank statements.</span></span>

1.  <span data-ttu-id="47e27-178">Gå till **Kassa- och bankhantering** &gt; **Inställningar** &gt; **Inställning av avancerad bankavstämning** &gt; **Bankutdragsformat**.</span><span class="sxs-lookup"><span data-stu-id="47e27-178">Go to **Cash and bank management** &gt; **Setup** &gt; **Advanced bank reconciliation setup** &gt; **Bank statement format**.</span></span>
2.  <span data-ttu-id="47e27-179">Klicka på **Ny**.</span><span class="sxs-lookup"><span data-stu-id="47e27-179">Click **New**.</span></span>
3.  <span data-ttu-id="47e27-180">Ange ett utdragsformat såsom **ISO20022**.</span><span class="sxs-lookup"><span data-stu-id="47e27-180">Specify a statement format, such as **ISO20022**.</span></span>
4.  <span data-ttu-id="47e27-181">Ange ett namn på formatet.</span><span class="sxs-lookup"><span data-stu-id="47e27-181">Enter a name for the format.</span></span>
5.  <span data-ttu-id="47e27-182">Ställ in fältet **Bearbetninggrupp** till den grupp som du definierade tidigare, till exempel **ISO20022**.</span><span class="sxs-lookup"><span data-stu-id="47e27-182">Set the **Processing group** field to the group that you defined earlier, such as **ISO20022**.</span></span>
6.  <span data-ttu-id="47e27-183">Markera kryssrutan **XML-fil**.</span><span class="sxs-lookup"><span data-stu-id="47e27-183">Select the **XML file** check box.</span></span>

<span data-ttu-id="47e27-184">Det sista steget är att aktivera Avancerad bankavstämning och att ställa in utdragsformatet på bankkontot.</span><span class="sxs-lookup"><span data-stu-id="47e27-184">The last step is to enable Advanced bank reconciliation and set the statement format on the bank account.</span></span>

1.  <span data-ttu-id="47e27-185">Gå till **Kassa- och bankhantering** &gt; **Bankkonton**.</span><span class="sxs-lookup"><span data-stu-id="47e27-185">Go to **Cash and bank management** &gt; **Bank accounts**.</span></span>
2.  <span data-ttu-id="47e27-186">Välj bankkonto och öppna det för att visa detaljerna.</span><span class="sxs-lookup"><span data-stu-id="47e27-186">Select the bank account, and open it to view the details.</span></span>
3.  <span data-ttu-id="47e27-187">På fliken **Avstämning**, ställ in alternativet **Avancerad bankavstämning** på **Ja**.</span><span class="sxs-lookup"><span data-stu-id="47e27-187">On the **Reconciliation** tab, set the **Advanced bank reconciliation** option to **Yes**.</span></span>
4.  <span data-ttu-id="47e27-188">Ställ in fältet **Utdragsformat** på det format som du skapade tidigare, till exempel **ISO20022**.</span><span class="sxs-lookup"><span data-stu-id="47e27-188">Set the **Statement format** field to the format that you created earlier, such as **ISO20022**.</span></span>

## <a name="set-up-the-import-of-mt940-bank-statements"></a><span data-ttu-id="47e27-189">Ställa in import av MT940-bankutdrag</span><span class="sxs-lookup"><span data-stu-id="47e27-189">Set up the import of MT940 bank statements</span></span>
<span data-ttu-id="47e27-190">Först måste du definiera bankutdragets formatbearbetningsgrupp för MT940-bankutdrag med hjälp av ramverket för datatabellen.</span><span class="sxs-lookup"><span data-stu-id="47e27-190">First, you must define the bank statement format processing group for MT940 bank statements by using the data entity framework.</span></span>

1.  <span data-ttu-id="47e27-191">Gå till **Arbetsytor** &gt; **Datahantering**.</span><span class="sxs-lookup"><span data-stu-id="47e27-191">Go to **Workspaces** &gt; **Data management**.</span></span>
2.  <span data-ttu-id="47e27-192">Klicka på **Importera**.</span><span class="sxs-lookup"><span data-stu-id="47e27-192">Click **Import**.</span></span>
3.  <span data-ttu-id="47e27-193">Ange ett namn på formatet såsom **MT940**.</span><span class="sxs-lookup"><span data-stu-id="47e27-193">Enter a name for the format, such as **MT940**.</span></span>
4.  <span data-ttu-id="47e27-194">Ställ in fältet **Källdataformat** på **XML-element**.</span><span class="sxs-lookup"><span data-stu-id="47e27-194">Set the **Source data format** field to **XML-Element**.</span></span>
5.  <span data-ttu-id="47e27-195">Ställ in fältet **Enhetsnamn** på **Bankutdrag**.</span><span class="sxs-lookup"><span data-stu-id="47e27-195">Set the **Entity name** field to **Bank statements**.</span></span>
6.  <span data-ttu-id="47e27-196">Om du vill hämta importfilerna klickar du på **Överför** och bläddrar sedan till filen **SampleBankCompositeEntity.xml** som du sparade tidigare och markerar den.</span><span class="sxs-lookup"><span data-stu-id="47e27-196">To upload import files, click **Upload**, and then browse to select the **SampleBankCompositeEntity.xml** file that you saved earlier.</span></span>
7.  <span data-ttu-id="47e27-197">När bankutdragsenheten överförs och mappningen är slutförd ska du klicka på åtgärden **Visa mappning** för enheten.</span><span class="sxs-lookup"><span data-stu-id="47e27-197">After the Bank statements entity is uploaded and the mapping is completed, click the **View map** action for the entity.</span></span>
8.  <span data-ttu-id="47e27-198">Bankutdragsenheten är en sammansatt enhet som består av fyra separata enheter.</span><span class="sxs-lookup"><span data-stu-id="47e27-198">The Bank statements entity is a composite entity that consists of four separate entities.</span></span> <span data-ttu-id="47e27-199">Markera **BankStatementDocumentEntity** i listan och klicka sedan på åtgärden **Visa mappning**.</span><span class="sxs-lookup"><span data-stu-id="47e27-199">In the list, select **BankStatementDocumentEntity**, and then click the **View map** action.</span></span>
9.  <span data-ttu-id="47e27-200">På fliken **Transformationer**, klicka på **Ny**.</span><span class="sxs-lookup"><span data-stu-id="47e27-200">On the **Transformations** tab, click **New**.</span></span>
10. <span data-ttu-id="47e27-201">För löpnummer 1 klickar du på **Överför fil** och väljer filen **MT940TXT-to-MT940XML.xslt** som du sparade tidigare.</span><span class="sxs-lookup"><span data-stu-id="47e27-201">For sequence number 1, click **Upload file**, and select the **MT940TXT-to-MT940XML.xslt** file that you saved earlier.</span></span>
11. <span data-ttu-id="47e27-202">Klicka på **Ny**.</span><span class="sxs-lookup"><span data-stu-id="47e27-202">Click **New**.</span></span>
12. <span data-ttu-id="47e27-203">För löpnummer 2 klickar du på **Överför fil** och väljer filen **MT940XML-to-Reconciliation.xslt** som du sparade tidigare.</span><span class="sxs-lookup"><span data-stu-id="47e27-203">For sequence number 2, click **Upload file**, and select the **MT940XML-to-Reconciliation.xslt** file that you saved earlier.</span></span> <span data-ttu-id="47e27-204">**Obs!** Transformeringsfiler är byggda för standardformatet.</span><span class="sxs-lookup"><span data-stu-id="47e27-204">**Note:** Transformation files are built for the standard format.</span></span> <span data-ttu-id="47e27-205">Eftersom banker ofta avviker från detta format behöver du uppdatera transformeringsfilen för att mappa till ditt bankutdragsformat.</span><span class="sxs-lookup"><span data-stu-id="47e27-205">Because banks often diverge from this format, you may have to update the transformation file to map to your bank statement format.</span></span> <!--- For details about the expected format for MT940, see [Dynamics AX MT940 Layout](./media/dynamicsaxmt940layout1.xlsx)-->
13. <span data-ttu-id="47e27-206">Klicka på **Ny**.</span><span class="sxs-lookup"><span data-stu-id="47e27-206">Click **New**.</span></span>
14. <span data-ttu-id="47e27-207">För löpnummer 3 klickar du på **Överför fil** och väljer filen **BankReconciliation-to-Composite.xslt** som du sparade tidigare.</span><span class="sxs-lookup"><span data-stu-id="47e27-207">For sequence number 3, click **Upload file**, and select the **BankReconciliation-to-Composite.xslt** file that you saved earlier.</span></span>
15. <span data-ttu-id="47e27-208">Klicka på **Tillämpa transformeringar**.</span><span class="sxs-lookup"><span data-stu-id="47e27-208">Click **Apply transforms**.</span></span>

<span data-ttu-id="47e27-209">När formatbearbetningsgruppen har ställts in är nästa steg att definiera formatregler för MT940-bankutdrag.</span><span class="sxs-lookup"><span data-stu-id="47e27-209">After the format processing group is set up, the next step is to define the bank statement format rules for MT940 bank statements.</span></span>

1.  <span data-ttu-id="47e27-210">Gå till **Kassa- och bankhantering** &gt; **Inställningar** &gt; **Inställning av avancerad bankavstämning** &gt; **Bankutdragsformat**.</span><span class="sxs-lookup"><span data-stu-id="47e27-210">Go to **Cash and bank management** &gt; **Setup** &gt; **Advanced bank reconciliation setup** &gt; **Bank statement format**.</span></span>
2.  <span data-ttu-id="47e27-211">Klicka på **Ny**.</span><span class="sxs-lookup"><span data-stu-id="47e27-211">Click **New**.</span></span>
3.  <span data-ttu-id="47e27-212">Ange ett utdragsformat såsom **MT940**.</span><span class="sxs-lookup"><span data-stu-id="47e27-212">Specify a statement format, such as **MT940**.</span></span>
4.  <span data-ttu-id="47e27-213">Ange ett namn på formatet.</span><span class="sxs-lookup"><span data-stu-id="47e27-213">Enter a name for the format.</span></span>
5.  <span data-ttu-id="47e27-214">Ställ in fältet **Bearbetningsgrupp** till den grupp som du definierade tidigare, till exempel **MT940**.</span><span class="sxs-lookup"><span data-stu-id="47e27-214">Set the **Processing group** field to the group that you defined earlier, such as **MT940**.</span></span>
6.  <span data-ttu-id="47e27-215">Ställ in fältet **Filtyp** på **txt**.</span><span class="sxs-lookup"><span data-stu-id="47e27-215">Set the **File type** field to **txt**.</span></span>

<span data-ttu-id="47e27-216">Det sista steget är att aktivera Avancerad bankavstämning och att ställa in utdragsformatet på bankkontot.</span><span class="sxs-lookup"><span data-stu-id="47e27-216">The last step is to enable Advanced bank reconciliation and set the statement format on the bank account.</span></span>

1.  <span data-ttu-id="47e27-217">Gå till **Kassa- och bankhantering** &gt; **Bankkonton**.</span><span class="sxs-lookup"><span data-stu-id="47e27-217">Go to **Cash and bank management** &gt; **Bank accounts**.</span></span>
2.  <span data-ttu-id="47e27-218">Välj bankkonto och öppna det för att visa detaljerna.</span><span class="sxs-lookup"><span data-stu-id="47e27-218">Select the bank account, and open it to view the details.</span></span>
3.  <span data-ttu-id="47e27-219">På fliken **Avstämning**, ställ in alternativet **Avancerad bankavstämning** på **Ja**.</span><span class="sxs-lookup"><span data-stu-id="47e27-219">On the **Reconciliation** tab, set the **Advanced bank reconciliation** option to **Yes**.</span></span>
4.  <span data-ttu-id="47e27-220">När du uppmanas att bekräfta ditt val och aktivera Avancerad bankavstämning klickar du på **OK**.</span><span class="sxs-lookup"><span data-stu-id="47e27-220">When you're prompted to confirm your selection and enable Advanced bank reconciliation, click **OK**.</span></span>
5.  <span data-ttu-id="47e27-221">Ställ in fältet **Utdragsformat** på det format som du skapade tidigare, till exempel **MT940**.</span><span class="sxs-lookup"><span data-stu-id="47e27-221">Set the **Statement format** field to the format that you created earlier, such as **MT940**.</span></span>

## <a name="set-up-the-import-of-bai2-bank-statements"></a><span data-ttu-id="47e27-222">Ställa in import av BAI2-bankutdrag</span><span class="sxs-lookup"><span data-stu-id="47e27-222">Set up the import of BAI2 bank statements</span></span>
<span data-ttu-id="47e27-223">Först måste du definiera bankutdragets formatbearbetningsgrupp för BAI2-bankutdrag med hjälp av ramverket för datatabellen.</span><span class="sxs-lookup"><span data-stu-id="47e27-223">First, you must define the bank statement format processing group for BAI2 bank statements by using the data entity framework.</span></span>

1.  <span data-ttu-id="47e27-224">Gå till **Arbetsytor** &gt; **Datahantering**.</span><span class="sxs-lookup"><span data-stu-id="47e27-224">Go to **Workspaces** &gt; **Data management**.</span></span>
2.  <span data-ttu-id="47e27-225">Klicka på **Importera**.</span><span class="sxs-lookup"><span data-stu-id="47e27-225">Click **Import**.</span></span>
3.  <span data-ttu-id="47e27-226">Ange ett namn på formatet såsom **BAI2**.</span><span class="sxs-lookup"><span data-stu-id="47e27-226">Enter a name for the format, such as **BAI2**.</span></span>
4.  <span data-ttu-id="47e27-227">Ställ in fältet **Källdataformat** på **XML-element**.</span><span class="sxs-lookup"><span data-stu-id="47e27-227">Set the **Source data format** field to **XML-Element**.</span></span>
5.  <span data-ttu-id="47e27-228">Ställ in fältet **Enhetsnamn** på **Bankutdrag**.</span><span class="sxs-lookup"><span data-stu-id="47e27-228">Set the **Entity name** field to **Bank statements**.</span></span>
6.  <span data-ttu-id="47e27-229">Om du vill hämta importfilerna klickar du på **Överför** och bläddrar sedan till filen **SampleBankCompositeEntity.xml** som du sparade tidigare och markerar den.</span><span class="sxs-lookup"><span data-stu-id="47e27-229">To upload import files, click **Upload**, and then browse to select the **SampleBankCompositeEntity.xml** file that you saved earlier.</span></span>
7.  <span data-ttu-id="47e27-230">När bankutdragsenheten överförs och mappningen är slutförd ska du klicka på åtgärden **Visa mappning** för enheten.</span><span class="sxs-lookup"><span data-stu-id="47e27-230">After the Bank statements entity is uploaded and the mapping is completed, click the **View map** action for the entity.</span></span>
8.  <span data-ttu-id="47e27-231">Bankutdragsenheten är en sammansatt enhet som består av fyra separata enheter.</span><span class="sxs-lookup"><span data-stu-id="47e27-231">The Bank statements entity is a composite entity that consists of four separate entities.</span></span> <span data-ttu-id="47e27-232">Markera **BankStatementDocumentEntity** i listan och klicka sedan på åtgärden **Visa mappning**.</span><span class="sxs-lookup"><span data-stu-id="47e27-232">In the list, select **BankStatementDocumentEntity**, and then click the **View map** action.</span></span>
9.  <span data-ttu-id="47e27-233">På fliken **Transformationer**, klicka på **Ny**.</span><span class="sxs-lookup"><span data-stu-id="47e27-233">On the **Transformations** tab, click **New**.</span></span>
10. <span data-ttu-id="47e27-234">För löpnummer 1 klickar du på **Överför fil** och väljer filen **BAI2CSV-to-BAI2XML.xslt** som du sparade tidigare.</span><span class="sxs-lookup"><span data-stu-id="47e27-234">For sequence number 1, click **Upload file**, and select the **BAI2CSV-to-BAI2XML.xslt** file that you saved earlier.</span></span>
11. <span data-ttu-id="47e27-235">Klicka på **Ny**.</span><span class="sxs-lookup"><span data-stu-id="47e27-235">Click **New**.</span></span>
12. <span data-ttu-id="47e27-236">För löpnummer 2 klickar du på **Överför fil** och väljer filen **BAI2XML-to-Reconciliation.xslt** som du sparade tidigare.</span><span class="sxs-lookup"><span data-stu-id="47e27-236">For sequence number 2, click **Upload file**, and select the **BAI2XML-to-Reconciliation.xslt** file that you saved earlier.</span></span> <span data-ttu-id="47e27-237">**Obs!** Transformeringsfiler är byggda för standardformatet.</span><span class="sxs-lookup"><span data-stu-id="47e27-237">**Note:** Transformation files are built for the standard format.</span></span> <span data-ttu-id="47e27-238">Eftersom banker ofta avviker från detta format behöver du uppdatera transformeringsfilen för att mappa till ditt bankutdragsformat.</span><span class="sxs-lookup"><span data-stu-id="47e27-238">Because banks often diverge from this format, and you may have to update the transformation file to map to your bank statement format.</span></span> <!--- For details about the expected format for BAI2, see [Dynamics AX BAI2 Layout](./media/dynamicsaxbai2layout1.xlsx).-->
13. <span data-ttu-id="47e27-239">Klicka på **Ny**.</span><span class="sxs-lookup"><span data-stu-id="47e27-239">Click **New**.</span></span>
14. <span data-ttu-id="47e27-240">För löpnummer 3 klickar du på **Överför fil** och väljer filen **BankReconciliation-to-Composite.xslt** som du sparade tidigare.</span><span class="sxs-lookup"><span data-stu-id="47e27-240">For sequence number 3, click **Upload file**, and select the **BankReconciliation-to-Composite.xslt** file that you saved earlier.</span></span>
15. <span data-ttu-id="47e27-241">Klicka på **Tillämpa transformeringar**.</span><span class="sxs-lookup"><span data-stu-id="47e27-241">Click **Apply transforms**.</span></span>

<span data-ttu-id="47e27-242">När formatbearbetningsgruppen har ställts in är nästa steg att definiera formatregler för BAI2-bankutdrag.</span><span class="sxs-lookup"><span data-stu-id="47e27-242">After the format processing group is set up, the next step is to define the bank statement format rules for BAI2 bank statements.</span></span>

1.  <span data-ttu-id="47e27-243">Gå till **Kassa- och bankhantering** &gt; **Inställningar** &gt; **Inställning av avancerad bankavstämning** &gt; **Bankutdragsformat**.</span><span class="sxs-lookup"><span data-stu-id="47e27-243">Go to **Cash and bank management** &gt; **Setup** &gt; **Advanced bank reconciliation setup** &gt; **Bank statement format**.</span></span>
2.  <span data-ttu-id="47e27-244">Klicka på **Ny**.</span><span class="sxs-lookup"><span data-stu-id="47e27-244">Click **New**.</span></span>
3.  <span data-ttu-id="47e27-245">Ange ett utdragsformat såsom **BAI2**.</span><span class="sxs-lookup"><span data-stu-id="47e27-245">Specify a statement format, such as **BAI2**.</span></span>
4.  <span data-ttu-id="47e27-246">Ange ett namn på formatet.</span><span class="sxs-lookup"><span data-stu-id="47e27-246">Enter a name for the format.</span></span>
5.  <span data-ttu-id="47e27-247">Ställ in fältet **Bearbetningsgrupp** till den grupp som du definierade tidigare, till exempel **BAI2**.</span><span class="sxs-lookup"><span data-stu-id="47e27-247">Set the **Processing group** field to the group that you defined earlier, such as **BAI2**.</span></span>
6.  <span data-ttu-id="47e27-248">Ställ in fältet **Filtyp** på **txt**.</span><span class="sxs-lookup"><span data-stu-id="47e27-248">Set the **File type** field to **txt**.</span></span>

<span data-ttu-id="47e27-249">Det sista steget är att aktivera Avancerad bankavstämning och att ställa in utdragsformatet på bankkontot.</span><span class="sxs-lookup"><span data-stu-id="47e27-249">The last step is to enable Advanced bank reconciliation and set the statement format on the bank account.</span></span>

1.  <span data-ttu-id="47e27-250">Gå till **Kassa- och bankhantering** &gt; **Bankkonton**.</span><span class="sxs-lookup"><span data-stu-id="47e27-250">Go to **Cash and bank management** &gt; **Bank accounts**.</span></span>
2.  <span data-ttu-id="47e27-251">Välj bankkonto och öppna det för att visa detaljerna.</span><span class="sxs-lookup"><span data-stu-id="47e27-251">Select the bank account, and open it to view the details.</span></span>
3.  <span data-ttu-id="47e27-252">På fliken **Avstämning**, ställ in alternativet **Avancerad bankavstämning** på **Ja**.</span><span class="sxs-lookup"><span data-stu-id="47e27-252">On the **Reconciliation** tab, set the **Advanced bank reconciliation** option to **Yes**.</span></span>
4.  <span data-ttu-id="47e27-253">När du uppmanas att bekräfta ditt val och aktivera Avancerad bankavstämning klickar du på **OK**.</span><span class="sxs-lookup"><span data-stu-id="47e27-253">When you're prompted to confirm your selection and enable Advanced bank reconciliation, click **OK**.</span></span>
5.  <span data-ttu-id="47e27-254">Ställ in fältet **Utdragsformat** på det format som du skapade tidigare, till exempel **BAI2**.</span><span class="sxs-lookup"><span data-stu-id="47e27-254">Set the **Statement format** field to the format that you created earlier, such as **BAI2**.</span></span>

## <a name="test-the-bank-statement-import"></a><span data-ttu-id="47e27-255">Testa import av bankutdrag</span><span class="sxs-lookup"><span data-stu-id="47e27-255">Test the bank statement import</span></span>
<span data-ttu-id="47e27-256">Det sista steget är att kontrollera att du kan importera bankutdraget.</span><span class="sxs-lookup"><span data-stu-id="47e27-256">The final step is to test that you can import your bank statement.</span></span>

1.  <span data-ttu-id="47e27-257">Gå till **Kassa- och bankhantering** &gt; **Bankkonton**.</span><span class="sxs-lookup"><span data-stu-id="47e27-257">Go to **Cash and bank management** &gt; **Bank accounts**.</span></span>
2.  <span data-ttu-id="47e27-258">Välj bankkontot som funktionen Avancerad bankavstämning är aktiverad för.</span><span class="sxs-lookup"><span data-stu-id="47e27-258">Select the bank account that Advanced bank reconciliation functionality is enabled for.</span></span>
3.  <span data-ttu-id="47e27-259">På fliken **Stäm av** klickar du på **Bankutdrag**.</span><span class="sxs-lookup"><span data-stu-id="47e27-259">On the **Reconcile** tab, click **Bank statements**.</span></span>
4.  <span data-ttu-id="47e27-260">På sidan **Bankutdrag** klickar du på **Importera utdrag**.</span><span class="sxs-lookup"><span data-stu-id="47e27-260">On the **Bank statement** page, click **Import statement**.</span></span>
5.  <span data-ttu-id="47e27-261">Ställ in fältet **Bankkonto** till det valda bankkontot.</span><span class="sxs-lookup"><span data-stu-id="47e27-261">Set the **Bank account** field to the selected bank account.</span></span> <span data-ttu-id="47e27-262">Fältet **Utdragsformat** ställs in automatiskt, baserat på inställningen för bankkontot.</span><span class="sxs-lookup"><span data-stu-id="47e27-262">The **Statement format** field will be set automatically, based on the setting on the bank account.</span></span>
6.  <span data-ttu-id="47e27-263">Klicka på **Bläddra** och välj din elektroniska bankutdragsfil.</span><span class="sxs-lookup"><span data-stu-id="47e27-263">Click **Browse**, and select your electronic bank statement file.</span></span>
7.  <span data-ttu-id="47e27-264">Klicka på **Skicka**.</span><span class="sxs-lookup"><span data-stu-id="47e27-264">Click **Upload**.</span></span>
8.  <span data-ttu-id="47e27-265">Klicka på **OK**.</span><span class="sxs-lookup"><span data-stu-id="47e27-265">Click **OK**.</span></span>

<span data-ttu-id="47e27-266">Om importen lyckades visas ett meddelande om att utdraget har importerats.</span><span class="sxs-lookup"><span data-stu-id="47e27-266">If the import is successful, you will receive a message that states that your statement was imported.</span></span> <span data-ttu-id="47e27-267">Om importen misslyckades kan du söka efter jobbet på arbetsytan **Datahantering** i avsnittet **Jobbhistorik**.</span><span class="sxs-lookup"><span data-stu-id="47e27-267">If the import wasn't successful, in the **Data management** workspace, in the **Job history** section, find the job.</span></span> <span data-ttu-id="47e27-268">Klicka på **Körningsinformation** så att jobbet öppnar sidan **Körningssammanfattning** och klicka sedan på **Visa körningslogg** för att visa importfel.</span><span class="sxs-lookup"><span data-stu-id="47e27-268">Click **Execution details** for the job to open the **Execution summary** page, and then click **View execution log** to view the import errors.</span></span>




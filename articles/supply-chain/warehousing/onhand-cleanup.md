---
title: Rensningsjobb för lagerbehållningsposter för lagerställe
description: Det här ämnet beskriver rensningsjobbet för lagerbehållningen, vilket förbättrar systemets prestanda genom att identifiera och ta bort relaterade poster som inte behövs.
author: perlynne
manager: tfehr
ms.date: 04/23/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
ms.search.form: SysOperationTemplateForm
audience: Application User
ms.reviewer: kamaybac
ms.search.scope: Core, Operations
ms.search.region: Global
ms.author: perlynne
ms.search.validFrom: 2020-04-03
ms.dyn365.ops.version: Release 10.0.12
ms.openlocfilehash: 9d01c577fc33564d3517d242e9b01f73cc8e079c
ms.sourcegitcommit: a36a4f9915ae3eb36bf8220111cf1486387713d9
ms.translationtype: HT
ms.contentlocale: sv-SE
ms.lasthandoff: 10/16/2020
ms.locfileid: "4015951"
---
# <a name="warehouse-management-on-hand-entries-cleanup-job"></a><span data-ttu-id="900ee-103">Rensningsjobb för lagerbehållningsposter för lagerställe</span><span class="sxs-lookup"><span data-stu-id="900ee-103">Warehouse management on-hand entries cleanup job</span></span>

<span data-ttu-id="900ee-104">Prestanda för frågor som används för att beräkna lagerbehållning påverkas av antalet poster i registren som ingår.</span><span class="sxs-lookup"><span data-stu-id="900ee-104">The performance of queries that are used to calculate on-hand inventory is affected by the number of records in the tables that are involved.</span></span> <span data-ttu-id="900ee-105">Ett sätt att förbättra prestandan är att minska antalet poster som måste beaktas i databasen.</span><span class="sxs-lookup"><span data-stu-id="900ee-105">One way to help improve the performance is to reduce the number of records that the database must consider.</span></span>

<span data-ttu-id="900ee-106">Det här ämnet beskriver rensningsjobbet för lagerbehållningen, vilket innebär att poster som inte behövs i tabellerna InventSum och WHSInventReserve tas bort.</span><span class="sxs-lookup"><span data-stu-id="900ee-106">This topic describes the on-hand entries cleanup job, which deletes unneeded records in the InventSum and WHSInventReserve tables.</span></span> <span data-ttu-id="900ee-107">Dessa register lagrar behållningsinformation för artiklar som aktiveras för bearbetning av lagerstyrning.</span><span class="sxs-lookup"><span data-stu-id="900ee-107">These tables store on-hand information for items that are enabled for warehouse management processing.</span></span> <span data-ttu-id="900ee-108">(Dessa objekt kallas WHS-artiklar). Om du tar bort dessa poster kan du förbättra prestanda för lagerbehållningen avsevärt.</span><span class="sxs-lookup"><span data-stu-id="900ee-108">(These items are referred to as WHS items.) Deletion of these records can significantly improve the performance of on-hand calculations.</span></span>

## <a name="what-the-cleanup-job-does"></a><span data-ttu-id="900ee-109">Vad rensningsjobbet gör</span><span class="sxs-lookup"><span data-stu-id="900ee-109">What the cleanup job does</span></span>

<span data-ttu-id="900ee-110">Rensningsjobbet för lagerbehållningen tar bort alla poster i tabellerna WHSInventReserve och InventSum där alla fält värden är *0* (noll).</span><span class="sxs-lookup"><span data-stu-id="900ee-110">The on-hand entries cleanup job deletes any records in the WHSInventReserve and InventSum tables where all the field values are *0* (zero).</span></span> <span data-ttu-id="900ee-111">Dessa poster kan tas bort eftersom de inte bidrar till behållningsinformationen.</span><span class="sxs-lookup"><span data-stu-id="900ee-111">These records can be deleted because they don't contribute to the on-hand information.</span></span> <span data-ttu-id="900ee-112">Jobbet tar bara bort poster som finns under nivån **lagerställe**.</span><span class="sxs-lookup"><span data-stu-id="900ee-112">The job deletes only records that are below the **Location** level.</span></span>

<span data-ttu-id="900ee-113">Om du tillåter negativa fysiska lager kan det hända att rensningsjobbet inte kan ta bort alla relevanta poster.</span><span class="sxs-lookup"><span data-stu-id="900ee-113">If negative physical inventory is allowed, the cleanup job might not be able to delete all the relevant entries.</span></span> <span data-ttu-id="900ee-114">Orsaken till den här begränsningen är att jobbet måste tillåtas för ett särskilt scenario där en ID-nummer har flera serienummer och ett av dessa serienummer har blivit negativt.</span><span class="sxs-lookup"><span data-stu-id="900ee-114">The reason for this limitation is that the job must allow for a special scenario where a license plate has multiple serial numbers, and one of those serial numbers has become negative.</span></span> <span data-ttu-id="900ee-115">Systemet har till exempel noll i behållning på ID-nummernivå när ett ID-nummer har + 1 dator med serienummer 1 och – 1 dator med serienummer 2.</span><span class="sxs-lookup"><span data-stu-id="900ee-115">For example, the system will have zero on hand at the license plate level when a license plate has +1 pcs of serial number 1 and –1 pcs of serial number 2.</span></span> <span data-ttu-id="900ee-116">För det här speciella scenariot tar jobbet en första bredd, där det försöker ta bort från lägre nivåer först.</span><span class="sxs-lookup"><span data-stu-id="900ee-116">For this special scenario, the job does a breadth-first deletion, where it tries to delete from lower levels first.</span></span>

## <a name="schedule-and-configure-the-cleanup-job"></a><span data-ttu-id="900ee-117">Schemalägga och konfigurera rensningsjobbet</span><span class="sxs-lookup"><span data-stu-id="900ee-117">Schedule and configure the cleanup job</span></span>

<span data-ttu-id="900ee-118">Rensningsjobbet för bokföring av lagerbehållning finns tillgängligt för **lagerhantering \> periodiska uppgifter \> rensa \> rensningsjobb för lagerbehållningsposter för lagerställe**.</span><span class="sxs-lookup"><span data-stu-id="900ee-118">The on-hand entries cleanup job is available at **Inventory management \> Periodic tasks \> Clean up \> Warehouse management on-hand entries cleanup**.</span></span> <span data-ttu-id="900ee-119">Använd standardjobbinställningarna om du vill styra omfång och schema för körning av jobbet.</span><span class="sxs-lookup"><span data-stu-id="900ee-119">Use the standard job settings to control the scope and schedule for running the job.</span></span> <span data-ttu-id="900ee-120">Dessutom finns följande inställningar:</span><span class="sxs-lookup"><span data-stu-id="900ee-120">In addition, the following settings are provided:</span></span>

- <span data-ttu-id="900ee-121">**Ta bort om detta inte är uppdaterat för så här många dagar** – Ange det minsta antal dagar som jobbet ska vänta innan en behållningstransaktion med kvantiteten på noll raderas.</span><span class="sxs-lookup"><span data-stu-id="900ee-121">**Delete if not updated for this many days** – Enter the minimum number of days that the job should wait before it deletes an on-hand entry that has dropped to zero quantity.</span></span> <span data-ttu-id="900ee-122">Använd den här inställningen för att minska risken för borttagning av behållningsposter som fortfarande används.</span><span class="sxs-lookup"><span data-stu-id="900ee-122">Use this setting to help reduce the risk of deleting on-hand entries that are still being used.</span></span> <span data-ttu-id="900ee-123">Om du vill att rensningen ska ske så snart som möjligt anger du antingen *0* (noll) eller lämnar fältet tomt.</span><span class="sxs-lookup"><span data-stu-id="900ee-123">If you want cleanup to occur as soon as possible, either enter *0* (zero) or leave the field blank.</span></span>
- <span data-ttu-id="900ee-124">**Maximal körningstid (timmar)** – Ange rensningsjobbets maximala körningstid, i timmar.</span><span class="sxs-lookup"><span data-stu-id="900ee-124">**Maximum execution time (hours)** – Enter the maximum execution time of the cleanup job, in hours.</span></span> <span data-ttu-id="900ee-125">Om jobbet inte slutförs före den här tiden sparas det arbete som har utförts hittills och sedan stängs det.</span><span class="sxs-lookup"><span data-stu-id="900ee-125">If the job isn't completed before this time passes, it will save the work that it has completed so far and then close itself.</span></span> <span data-ttu-id="900ee-126">Den här funktionen är särskilt relevant för implementeringar med hög lageranvändning.</span><span class="sxs-lookup"><span data-stu-id="900ee-126">This capability is especially relevant for implementations that have high inventory use.</span></span> <span data-ttu-id="900ee-127">I dessa fall bör du schemalägga jobbet så att det körs vid tillfällen när systembelastningen är så ljus som möjligt.</span><span class="sxs-lookup"><span data-stu-id="900ee-127">In these cases, you should schedule the job to run at times when the system load is as light as possible.</span></span> <span data-ttu-id="900ee-128">Om du vill att batchjobbet ska fortsätta köras tills det är slutfört anger du *0* (noll) eller låter fältet vara tomt.</span><span class="sxs-lookup"><span data-stu-id="900ee-128">If you want the batch job to continue to run until it's completed, either enter *0* (zero) or leave the field blank.</span></span> <span data-ttu-id="900ee-129">Den här inställningen är endast tillgänglig om den relaterade funktionen har [Aktiverats i systemet](#max-execution-time).</span><span class="sxs-lookup"><span data-stu-id="900ee-129">This setting is available only if the related feature has been [turned on in your system](#max-execution-time).</span></span>

<span data-ttu-id="900ee-130">Även om du kan köra jobbet under normala kontorstider rekommenderar vi att du kör det utanför arbetstiden.</span><span class="sxs-lookup"><span data-stu-id="900ee-130">Although you can run the job during regular business hours, we recommend that you run it outside working hours.</span></span> <span data-ttu-id="900ee-131">På så sätt undviker du konflikter som kan uppstå om en användare arbetar med en post som också rensas.</span><span class="sxs-lookup"><span data-stu-id="900ee-131">In this way, you help prevent conflicts that can occur if a user is working with a record that is also being cleaned up.</span></span>

<span data-ttu-id="900ee-132">Om jobbet försöker ta bort en post för en artikel medan den posten används av en annan användare uppstår ett dödläge för antingen rensningsjobbet eller användaren.</span><span class="sxs-lookup"><span data-stu-id="900ee-132">If the job tries to delete a record for an item while that record is being used by another user, a deadlock error occurs for either the cleanup job or the user.</span></span>

<span data-ttu-id="900ee-133">När jobbet körs har det en genomförande storlek på 100.</span><span class="sxs-lookup"><span data-stu-id="900ee-133">When the job runs, it has a commit size of 100.</span></span> <span data-ttu-id="900ee-134">Med andra ord görs ett försök att genomföra en gång för varje 100 borttagning.</span><span class="sxs-lookup"><span data-stu-id="900ee-134">In other words, it will try to commit one time for every 100 deletions.</span></span> <span data-ttu-id="900ee-135">Eftersom vissa borttagningar har ställts in, kan det emellertid finnas situationer där fler än 100 poster kan tas bort i samma transaktion.</span><span class="sxs-lookup"><span data-stu-id="900ee-135">However, because some deletions are set-based, there might be scenarios where more than 100 records can be deleted in the same transaction.</span></span> <span data-ttu-id="900ee-136">Därför kan låsning av eskaleringar ändå uppstå ibland.</span><span class="sxs-lookup"><span data-stu-id="900ee-136">Therefore, lock escalations can still sometimes occur.</span></span>

## <a name="possible-user-impact"></a><span data-ttu-id="900ee-137">Möjlig användarpåverkan</span><span class="sxs-lookup"><span data-stu-id="900ee-137">Possible user impact</span></span>

<span data-ttu-id="900ee-138">Användare kan påverkas om rensningsjobbet för behållningstransaktioner tar bort alla poster för en viss nivå (t.ex. ID-nummernivå).</span><span class="sxs-lookup"><span data-stu-id="900ee-138">Users might be affected if the on-hand entries cleanup job deletes all the records for a given level (such as the license plate level).</span></span> <span data-ttu-id="900ee-139">I det här fallet kanske funktionen för att se att lagret tidigare var tillgängligt på en ID-numret inte fungerar som förväntat, eftersom de relevanta behållningsposterna inte längre är tillgängliga.</span><span class="sxs-lookup"><span data-stu-id="900ee-139">In this case, the functionality for seeing that inventory was previously available on hand at a license plate might not work as expected, because the relevant on-hand entries are no longer available.</span></span> <span data-ttu-id="900ee-140">(Den funktionen kontrollerar villkoret **Kvantitet \<\> 0** i inställningen **Dimensionsvisning** när användare visar behållningsinformation.) Prestandaförbättringen i rensningsjobbet bör dock utgöra en möjlighet för detta litet att förlora funktionaliteten.</span><span class="sxs-lookup"><span data-stu-id="900ee-140">(That functionality checks the condition **Quantity \<\> 0** in the **Dimension display** settings when users view on-hand information.) However, the performance improvement that the cleanup job provides should make up for this small loss in functionality.</span></span>

## <a name="make-the-maximum-execution-time-setting-available"></a><a name="max-execution-time"></a><span data-ttu-id="900ee-141">Gör inställningen för maximal körningstid tillgänglig</span><span class="sxs-lookup"><span data-stu-id="900ee-141">Make the Maximum execution time setting available</span></span>

<span data-ttu-id="900ee-142">Som standard är inställningen för **maximal körningstid** inte är tillgänglig.</span><span class="sxs-lookup"><span data-stu-id="900ee-142">By default, the **Maximum execution time** setting isn't available.</span></span> <span data-ttu-id="900ee-143">Om du vill använda funktionen måste du använda [funktionshantering](../../fin-ops-core/fin-ops/get-started/feature-management/feature-management-overview.md) för att aktivera den relaterade funktionen i systemet.</span><span class="sxs-lookup"><span data-stu-id="900ee-143">If you want to use it, you must use [feature management](../../fin-ops-core/fin-ops/get-started/feature-management/feature-management-overview.md) to turn on the related feature in your system.</span></span> <span data-ttu-id="900ee-144">I arbetsytan **utgiftshantering** anges den här funktionen på följande sätt:</span><span class="sxs-lookup"><span data-stu-id="900ee-144">In the **Feature management** workspace, the feature is listed in the following way:</span></span>

- <span data-ttu-id="900ee-145">**Modul:** *Lagerstyrning*</span><span class="sxs-lookup"><span data-stu-id="900ee-145">**Module:** *Warehouse management*</span></span>
- <span data-ttu-id="900ee-146">**Funktionsnamn:** *Maximal körningstid för rensningsjobbet för lagerhanteringsposter*</span><span class="sxs-lookup"><span data-stu-id="900ee-146">**Feature name:** *Maximum execution time for the warehouse management on-hand entries cleanup job*</span></span>

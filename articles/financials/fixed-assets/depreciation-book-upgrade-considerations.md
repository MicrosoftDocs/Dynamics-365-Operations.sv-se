---
title: Uppgraderingsöversikt för avskrivningsregler
description: 'I tidigare versioner fanns två värderingsbegrepp för anläggningstillgångar: värdemodeller och avskrivningsregler. I Microsoft Dynamics 365 for Operations (1611), har värdemodellfunktionen och funktionen för avskrivningsregel slagits ihop till ett enda begrepp som kallas för "bok". Detta avsnitt listar några saker att beakta i samband med uppgraderingen.'
author: ShylaThompson
manager: AnnBe
ms.date: 06/20/2017
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
audience: Application User, Developer
ms.reviewer: shylaw
ms.search.scope: Core, Operations
ms.custom: 221624
ms.assetid: cf434099-36f9-4b0f-a7c8-bed091e34f39
ms.search.region: global
ms.author: saraschi
ms.search.validFrom: 2016-11-30
ms.dyn365.ops.version: Version 1611
ms.openlocfilehash: 805f6ab1cd1d0996e685278cc997f532213c76c3
ms.sourcegitcommit: 9d4c7edd0ae2053c37c7d81cdd180b16bf3a9d3b
ms.translationtype: HT
ms.contentlocale: sv-SE
ms.lasthandoff: 05/15/2019
ms.locfileid: "1546465"
---
# <a name="depreciation-book-upgrade-overview"></a><span data-ttu-id="a37ed-105">Uppgraderingsöversikt för avskrivningsregler</span><span class="sxs-lookup"><span data-stu-id="a37ed-105">Depreciation book upgrade overview</span></span>

[!include [banner](../includes/banner.md)]

<span data-ttu-id="a37ed-106">I tidigare versioner fanns två värderingsbegrepp för anläggningstillgångar: värdemodeller och avskrivningsregler.</span><span class="sxs-lookup"><span data-stu-id="a37ed-106">In previous releases, there were two valuation concepts for fixed assets -  value models and depreciation books.</span></span> <span data-ttu-id="a37ed-107">I Microsoft Dynamics 365 for Operations (1611), har värdemodellfunktionen och funktionen för avskrivningsregel slagits ihop till ett enda begrepp som kallas för "bok".</span><span class="sxs-lookup"><span data-stu-id="a37ed-107">In Microsoft Dynamics 365 for Operations (1611), the value model functionality and depreciation book functionality have been merged into a single concept that is known as a book.</span></span> <span data-ttu-id="a37ed-108">Detta avsnitt listar några saker att beakta i samband med uppgraderingen.</span><span class="sxs-lookup"><span data-stu-id="a37ed-108">This topic provides some things to consider for the upgrade.</span></span> 

<span data-ttu-id="a37ed-109">Uppgraderingsprocessen flyttar din befintliga inställning och alla befintliga transaktioner till den nya bokstrukturen.</span><span class="sxs-lookup"><span data-stu-id="a37ed-109">The upgrade process will move your existing setup and all existing transactions to the new book structure.</span></span> <span data-ttu-id="a37ed-110">Värdemodeller kommer att kvarstå som de är, som en bok som bokförs till huvudboken.</span><span class="sxs-lookup"><span data-stu-id="a37ed-110">Value models will remain as they currently are, as a book that posts to the general ledger.</span></span> <span data-ttu-id="a37ed-111">Avskrivningsregler flyttas till en bok som har alternativet **Bokför i huvudboken** inställt på **Nej**.</span><span class="sxs-lookup"><span data-stu-id="a37ed-111">Depreciation books will be moved to a book that has the **Post to general ledger** option set to **No**.</span></span> <span data-ttu-id="a37ed-112">Journalnamn för avskrivningsregel flyttas till ett journalnamn för huvudbok som har bokföringsskiktet inställt på **Ingen**.</span><span class="sxs-lookup"><span data-stu-id="a37ed-112">Depreciation book journal names will be moved to a general ledger journal name with the posting layer set to **None**.</span></span> <span data-ttu-id="a37ed-113">Transaktioner för avskrivningsregler flyttas till transaktioner för anläggningstillgångar.</span><span class="sxs-lookup"><span data-stu-id="a37ed-113">Depreciation book transactions will be moved to Fixed asset transactions.</span></span> 

<span data-ttu-id="a37ed-114">Innan du kör datauppgraderingen bör du förstå de två tillgängliga alternativen för uppgradering av journalraderna i avskrivningsregler till transaktionsverifikationer, samt den nummerserie som kommer att användas för verifikationsserien.</span><span class="sxs-lookup"><span data-stu-id="a37ed-114">Before running the data upgrade, you should understand the two options available for upgrading depreciation book journal lines to transaction vouchers, and the number sequence that will be used for the voucher series.</span></span> 

<span data-ttu-id="a37ed-115">Alternativ 1:  **Systemdefinierad nummerserie** - Detta är standardalternativet för att optimera uppgraderingsprestandan.</span><span class="sxs-lookup"><span data-stu-id="a37ed-115">Option 1:  **System-defined number sequence** - This is the default option to optimize upgrade performance.</span></span> <span data-ttu-id="a37ed-116">Uppgraderingen använder inte nummerserieramverket, utan allokerar istället verifikationer med en uppsättningsbaserad inställning.</span><span class="sxs-lookup"><span data-stu-id="a37ed-116">The upgrade will not use the number sequences framework, but instead will allocate vouchers with a set-based approach.</span></span> <span data-ttu-id="a37ed-117">Efter uppgraderingen skapa den nya nummerserien **Nästa inställda nummer** lämpligt baserad på uppgraderade transaktioner.</span><span class="sxs-lookup"><span data-stu-id="a37ed-117">After the upgrade, the new number sequence will be created with the **Next number set** appropriately based on the upgraded transactions.</span></span> <span data-ttu-id="a37ed-118">Som standard kommer använd nummerserie att vara i formatet FADBUpgr\#\#\#\#\#\#\#\#\#.</span><span class="sxs-lookup"><span data-stu-id="a37ed-118">By default, the number sequence used will be in the FADBUpgr\#\#\#\#\#\#\#\#\# format.</span></span> <span data-ttu-id="a37ed-119">Det finns några parametrar där du kan justera formatet när du använder den här metoden:</span><span class="sxs-lookup"><span data-stu-id="a37ed-119">There are a few parameters available to you to adjust the format when using this approach:</span></span>

-   <span data-ttu-id="a37ed-120">**Nummerseriekod** – Den kod som identifierar nummerserien.</span><span class="sxs-lookup"><span data-stu-id="a37ed-120">**Number sequence code** – The code to identify the number sequence.</span></span> <span data-ttu-id="a37ed-121">Denna nummerseriekod kan inte existera eftersom den skapas av uppgraderingen.</span><span class="sxs-lookup"><span data-stu-id="a37ed-121">This number sequence code cannot exist since it will be created by the upgrade.</span></span>
    -   <span data-ttu-id="a37ed-122">Konstantnamn: **NumberSequenceDefaultCode**</span><span class="sxs-lookup"><span data-stu-id="a37ed-122">Constant name: **NumberSequenceDefaultCode**</span></span>
    -   <span data-ttu-id="a37ed-123">Standardvärde: "FADBUpgr"</span><span class="sxs-lookup"><span data-stu-id="a37ed-123">Default value: "FADBUpgr"</span></span>
-   <span data-ttu-id="a37ed-124">**Prefix** – Konstantsträngvärdet som ska användas som ett prefix för verifikationsnumren.</span><span class="sxs-lookup"><span data-stu-id="a37ed-124">**Prefix** – The constant string value that will be used as a prefix for the voucher numbers.</span></span>
    -   <span data-ttu-id="a37ed-125">Konstantnamn: **NumberSequenceDefaultParameterPrefix**</span><span class="sxs-lookup"><span data-stu-id="a37ed-125">Constant name: **NumberSequenceDefaultParameterPrefix**</span></span>
    -   <span data-ttu-id="a37ed-126">Standardvärde: "FADBUpgr"</span><span class="sxs-lookup"><span data-stu-id="a37ed-126">Default value: "FADBUpgr"</span></span>
-   <span data-ttu-id="a37ed-127">**Alfanumerisk längd** – Längden på det alfanumeriska segmentet i nummerserien.</span><span class="sxs-lookup"><span data-stu-id="a37ed-127">**Alphanumeric length** – The length of the alphanumeric segment of the number sequence.</span></span>
    -   <span data-ttu-id="a37ed-128">Konstantnamn: \*\*NumberSequenceDefaultParameterAlpanumericLength \*\*</span><span class="sxs-lookup"><span data-stu-id="a37ed-128">Constant name: \*\*NumberSequenceDefaultParameterAlpanumericLength \*\*</span></span>
    -   <span data-ttu-id="a37ed-129">Standardvärde: 9</span><span class="sxs-lookup"><span data-stu-id="a37ed-129">Default value: 9</span></span>
-   <span data-ttu-id="a37ed-130">**Startnummer** - Det första nummer som ska användas i nummerserien.</span><span class="sxs-lookup"><span data-stu-id="a37ed-130">**Start number** - The first number to be used in the number sequence.</span></span>
    -   <span data-ttu-id="a37ed-131">Konstantnamn: \*\*NumberSequenceDefaultParameterStartNumber  \*\*</span><span class="sxs-lookup"><span data-stu-id="a37ed-131">Constant name: \*\*NumberSequenceDefaultParameterStartNumber  \*\*</span></span>
    -   <span data-ttu-id="a37ed-132">Standardvärde: 1</span><span class="sxs-lookup"><span data-stu-id="a37ed-132">Default value: 1</span></span>

<span data-ttu-id="a37ed-133">Alternativ 2: **Befintlig användardefinierad nummerserie** - Detta alternativ låter dig definiera den nummerserie som ska användas för uppgraderingen.</span><span class="sxs-lookup"><span data-stu-id="a37ed-133">Option 2: **Existing user-defined number sequence** - This option will allow you to define the number sequence to be used for the upgrade.</span></span> <span data-ttu-id="a37ed-134">Överväg att använda detta alternativ om du behöver avancerad konfiguration av nummerserie.</span><span class="sxs-lookup"><span data-stu-id="a37ed-134">Consider using this option if you need advanced number sequence configuration.</span></span> <span data-ttu-id="a37ed-135">Om du vill använda en nummerserie måste du ändra uppgraderingsklassen ReleaseUpdateDB70\_FixedAssetJournalDepBookRemovalDepBookJournalTrans med följande information:</span><span class="sxs-lookup"><span data-stu-id="a37ed-135">To use a number sequence, you must modify the upgrade class ReleaseUpdateDB70\_FixedAssetJournalDepBookRemovalDepBookJournalTrans with the following information:</span></span>

-   <span data-ttu-id="a37ed-136">**Nummerseriekod** – Nummerseriens kod.</span><span class="sxs-lookup"><span data-stu-id="a37ed-136">**Number sequence code** – The code of the number sequence.</span></span>
    -   <span data-ttu-id="a37ed-137">Konstantnamn: \*\*NumberSequenceExistingCode \*\*</span><span class="sxs-lookup"><span data-stu-id="a37ed-137">Constant name: \*\*NumberSequenceExistingCode \*\*</span></span>
    -   <span data-ttu-id="a37ed-138">Förvalt värde: Ingen standardinställning, detta måste uppdateras till nummerseriekoden.</span><span class="sxs-lookup"><span data-stu-id="a37ed-138">Default value: No default, this must be updated to the number sequence code.</span></span>
-   <span data-ttu-id="a37ed-139">**Delade nummerserier** – Ett booleskt värde som identifierar omfånget på nummerserien.</span><span class="sxs-lookup"><span data-stu-id="a37ed-139">**Shared number sequence** – A boolean value to identify the scope of the number sequence.</span></span> <span data-ttu-id="a37ed-140">Använd ”sant” för delade nummerserier för alla företag,” och ”falskt" för ett företagsspecifikt omfång.</span><span class="sxs-lookup"><span data-stu-id="a37ed-140">Use "true" for shared number sequences across all companies, and "false" for a company-specific scope.</span></span> <span data-ttu-id="a37ed-141">När du använder "falskt" måste nummerserien med det angivna namnet finnas i samtliga företag som innehåller transaktioner för avskrivningsregler.</span><span class="sxs-lookup"><span data-stu-id="a37ed-141">When using "false", the number sequence with the specified name must exist in every company that contains depreciation book transactions.</span></span> <span data-ttu-id="a37ed-142">Delade nummerserier finns i alla partitioner som innehåller transaktioner för avskrivningsregler.</span><span class="sxs-lookup"><span data-stu-id="a37ed-142">Shared number sequences exist in every partition that contains depreciation book transactions.</span></span>
    -   <span data-ttu-id="a37ed-143">Konstantnamn: \*\*NumberSequenceExistingIsShared \*\*</span><span class="sxs-lookup"><span data-stu-id="a37ed-143">Constant name: \*\*NumberSequenceExistingIsShared \*\*</span></span>
    -   <span data-ttu-id="a37ed-144">Standardvärde: sant</span><span class="sxs-lookup"><span data-stu-id="a37ed-144">Default value: true</span></span>

<span data-ttu-id="a37ed-145">Parametrarna finns i början av klassen ReleaseUpdateDB70\_FixedAssetJournalDepBookRemovalDepBookJournalTrans class.</span><span class="sxs-lookup"><span data-stu-id="a37ed-145">The parameters are located at the beginning of the ReleaseUpdateDB70\_FixedAssetJournalDepBookRemovalDepBookJournalTrans class.</span></span> 

<span data-ttu-id="a37ed-146">*// Ange en bättre metod för allokering av verifikationer* 
 *// sant,om du vill använda en befintlig nummerseriekod* 
 *// falskt, om du tänker använda systemdefinierad nummerserie (standard)* const boolean NumberSequenceUseExistingCode = falskt;</span><span class="sxs-lookup"><span data-stu-id="a37ed-146">*// Specify a preferable approach of vouchers allocation* 
 *// true, if you want to use an existing number sequence code* 
 *// false, if you intend to use the system-defined number sequence (default)* const boolean NumberSequenceUseExistingCode = false;</span></span>  

<span data-ttu-id="a37ed-147">*// Om du använder metoden systemdefinierad nummersekvens, ange parametrarna för nummerserien*
 *// En ny nummerserie skapas med följande parametrar.*</span><span class="sxs-lookup"><span data-stu-id="a37ed-147">*// If using the system-defined number sequence approach, specify the parameters for the number sequence.*
 *// A new number sequence will be created with these parameters.*</span></span> <span data-ttu-id="a37ed-148">const str NumberSequenceDefaultCode = 'FADBUpgr'; const str NumberSequenceDefaultParameterPrefix = 'FADBUpgr'; const int NumberSequenceDefaultParameterAlpanumericLength = 9; const int NumberSequenceDefaultParameterStartNumber = 1;</span><span class="sxs-lookup"><span data-stu-id="a37ed-148">const str NumberSequenceDefaultCode = 'FADBUpgr'; const str NumberSequenceDefaultParameterPrefix = 'FADBUpgr'; const int NumberSequenceDefaultParameterAlpanumericLength = 9; const int NumberSequenceDefaultParameterStartNumber = 1;</span></span>   

<span data-ttu-id="a37ed-149">*// Om du använder metoden med befintliga nummerserier, ange befintlig nummerseriekod.* 
 *// Allokering av verifikation sker rad för rad för befintliga nummerserier.*</span><span class="sxs-lookup"><span data-stu-id="a37ed-149">*// If using the existing number sequence approach, specify the existing number sequence code.* 
 *// Voucher allocation will go row-by-row for existing number sequences.*</span></span> <span data-ttu-id="a37ed-150">const str NumberSequenceExistingCode = ''; *// Ange intervallet för den befintliga nummerseriekoden* 
 *// sant, om den angivna nummerserien delas* 
 *// falskt, om den angivna nummerserien är per företag* 
 *// Den systemdefinierade standardnummerserien används om det inte finns någon nummerseriekod med angivet intervall.*</span><span class="sxs-lookup"><span data-stu-id="a37ed-150">const str NumberSequenceExistingCode = ''; *// Specify the scope of the existing number sequence code* 
 *// true, if the specified number sequence is shared* 
 *// false, if the specified number sequence is per-company* 
 *// The default system-defined number sequence will be used if a number sequence code with the specified scope is not found.*</span></span> <span data-ttu-id="a37ed-151">const boolean NumberSequenceExistingIsShared = sant;</span><span class="sxs-lookup"><span data-stu-id="a37ed-151">const boolean NumberSequenceExistingIsShared = true;</span></span> 

<span data-ttu-id="a37ed-152">Skapa om projektet som innehåller klassen efter det att konstanterna har ändrats.</span><span class="sxs-lookup"><span data-stu-id="a37ed-152">Rebuild the project that contains the class after the constants have been modified.</span></span> 

<span data-ttu-id="a37ed-153">När du använder metoden med systemgenererad nummersekvens (alternativ 1) använder uppgraderingen uppsättningsbaserad bearbetning för att fördela verifikationsnummer enligt de parametrar som angetts för uppgraderingsparametrarna.</span><span class="sxs-lookup"><span data-stu-id="a37ed-153">When using the system-generated number sequence approach (option 1), the upgrade will use set-based processing to allocate the voucher numbers as specified in the upgrade script parameters.</span></span> <span data-ttu-id="a37ed-154">Dessutom skapas en ny nummerserie med angivna parametrar efter allokeringen.</span><span class="sxs-lookup"><span data-stu-id="a37ed-154">It will also create a new number sequence with specified parameters after the allocation.</span></span> 

<span data-ttu-id="a37ed-155">När du använder den användardefinierade, befintliga nummerserieinställningen (alternativ 2) kontrollera datauppgraderingen om nummerserien med det angivna omfånget finns i databasen för respektive partition och företag med transaktioner i avskrivningsregeln.</span><span class="sxs-lookup"><span data-stu-id="a37ed-155">When using the user-defined existing number sequence approach (option 2), the data upgrade checks whether the number sequence with the specified scope exists in the database for each partition and company with depreciation book transactions.</span></span> <span data-ttu-id="a37ed-156">Om den finns använder uppgraderingen bearbetning rad för rad för att allokera verifikationsnumren enligt nummerserien med hjälp av nummersekvensramverket.</span><span class="sxs-lookup"><span data-stu-id="a37ed-156">If it does exist, the upgrade will use row-by-row processing to allocate the voucher numbers as specified by the number sequence using the number sequence framework.</span></span> <span data-ttu-id="a37ed-157">Om nummerserien inte finns med i angivet definitionsområde, kommer uppgraderingen att använda metoden med förvald, systemdefinierad nummersekvens för att allokera verifikationsnumren, samt skapa en ny nummersekvens med angivna standardparametrar efter allokeringen.</span><span class="sxs-lookup"><span data-stu-id="a37ed-157">If the number sequence does not exist with the specified scope, the upgrade will use the default system-defined number sequence approach to allocate the voucher numbers, and will create a new number sequence with specified default parameters after the allocation.</span></span>

<span data-ttu-id="a37ed-158">Oavsett metod kommer datauppgraderingsskriptet också att använda nummerserien för fältet **Verifikationsserie** på de nya redovisningsjournalnamnen som skapas för de tidigare journalnamnen i avskrivningsregeln.</span><span class="sxs-lookup"><span data-stu-id="a37ed-158">With either approach, the data upgrade script will also use the number sequence for the **Voucher series** field on the new general ledger journal names created for the former depreciation book journal names.</span></span>




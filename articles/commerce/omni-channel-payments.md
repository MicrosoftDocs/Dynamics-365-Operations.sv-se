---
title: Översikt över betalningar i flera kanaler
description: Det här ämnet innehåller en översikt betalningar i flera kanaler i Dynamics 365 Commerce.
author: rubendel
manager: AnnBe
ms.date: 09/17/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-365-retail
ms.technology: ''
audience: Application user
ms.reviewer: josaw
ms.custom: 141393
ms.assetid: ''
ms.search.region: Global
ms.search.industry: Retail
ms.author: rubendel
ms.search.validFrom: 2019-01-01
ms.dyn365.ops.version: AX 8.1.3
ms.openlocfilehash: 3fe64dad3c60560363428d76566d910868b87111
ms.sourcegitcommit: eaf330dbee1db96c20d5ac479f007747bea079eb
ms.translationtype: HT
ms.contentlocale: sv-SE
ms.lasthandoff: 02/15/2021
ms.locfileid: "5244921"
---
# <a name="omni-channel-payments-overview"></a><span data-ttu-id="ea6a9-103">Översikt över betalningar i flera kanaler</span><span class="sxs-lookup"><span data-stu-id="ea6a9-103">Omni-channel payments overview</span></span>

[!include [banner](../includes/banner.md)]

<span data-ttu-id="ea6a9-104">Det här ämnet innehåller en översikt betalningar i flera kanaler i Dynamics 365 Commerce.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-104">This topic provides an overview of omni-channel payments in Dynamics 365 Commerce.</span></span> <span data-ttu-id="ea6a9-105">Den innehåller en omfattande lista över scenarier som stöds, information om funktioner, inställningar och fel sökning samt beskrivningar av några vanliga problem.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-105">It includes a comprehensive list of supported scenarios, information about functionality, setup, and troubleshooting, and descriptions of some typical issues.</span></span>

## <a name="key-terms"></a><span data-ttu-id="ea6a9-106">Nyckeltermer</span><span class="sxs-lookup"><span data-stu-id="ea6a9-106">Key terms</span></span>

| <span data-ttu-id="ea6a9-107">Villkor</span><span class="sxs-lookup"><span data-stu-id="ea6a9-107">Term</span></span> | <span data-ttu-id="ea6a9-108">Beskrivning</span><span class="sxs-lookup"><span data-stu-id="ea6a9-108">Description</span></span> |
|---|---|
| <span data-ttu-id="ea6a9-109">Token </span><span class="sxs-lookup"><span data-stu-id="ea6a9-109">Token</span></span> | <span data-ttu-id="ea6a9-110">En sträng med data som en betalningsprocessor tillhandahåller som referens.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-110">A string of data that a payment processor provides as a reference.</span></span> <span data-ttu-id="ea6a9-111">Token kan motsvara betalningskortnummer, betalningsauktoriseringar och tidigare betalningsregistreringar.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-111">Tokens can represent payment card numbers, payment authorizations, and previous payment captures.</span></span> <span data-ttu-id="ea6a9-112">Token är viktiga eftersom de bidrar till att hålla känslig information utanför kassasystemet.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-112">Tokens are important because they help keep sensitive data out of the point of sale (POS) system.</span></span> <span data-ttu-id="ea6a9-113">De kallas ibland även för *referenser*.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-113">They are sometimes also referred to as *references*.</span></span> |
| <span data-ttu-id="ea6a9-114">Korttoken</span><span class="sxs-lookup"><span data-stu-id="ea6a9-114">Card token</span></span> | <span data-ttu-id="ea6a9-115">Ett token som en betalningsprocessor tillhandahåller för lagring i kassasystemet.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-115">A token that a payment processor provides for storage in the POS system.</span></span> <span data-ttu-id="ea6a9-116">En korttoken kan bara användas av den handlare som tar emot det.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-116">A card token can be used only by the merchant who receives it.</span></span> <span data-ttu-id="ea6a9-117">Korttoken kallas ibland även för *kortreferenser*.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-117">Card tokens are sometimes also referred to as *card references*.</span></span> |
| <span data-ttu-id="ea6a9-118">Autentiseringstoken (auth)</span><span class="sxs-lookup"><span data-stu-id="ea6a9-118">Authorization (auth) token</span></span> | <span data-ttu-id="ea6a9-119">Ett unikt ID som en betalningsprocess ger som en del av svaret som den skickar till ett kassasystem när en auktoriseringsbegäran utförts av kassasystemet.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-119">A unique ID that a payment process provides as part of the response that it sends to a POS system after the POS system makes an authorization request.</span></span> <span data-ttu-id="ea6a9-120">Du kan använda en autentiseringstoken senare om behandlaren anropas för att utföra åtgärder som att återföra eller annullera auktoriseringen.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-120">An authorization token can be used later if the processor is called to perform actions such as reversing or voiding the authorization.</span></span> <span data-ttu-id="ea6a9-121">Den används emellertid oftast för att samla in pengar när en order är uppfylld eller om en transaktion har slutförts.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-121">However, it's most often used to capture funds when an order is fulfilled or a transaction is finalized.</span></span> <span data-ttu-id="ea6a9-122">Autoriseringstoken kallas ibland även för *Autoriseringsreferenser*.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-122">Authorization tokens are sometimes also referred to as *authorization references*.</span></span> |
| <span data-ttu-id="ea6a9-123">Insamlingstoken</span><span class="sxs-lookup"><span data-stu-id="ea6a9-123">Capture token</span></span> | <span data-ttu-id="ea6a9-124">En referens som en betalningsbehandlare använder för ett kassasystem när en betalning har slutförts eller registrerats.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-124">A reference that a payment processor provides to a POS system when a payment is finalized or captured.</span></span> <span data-ttu-id="ea6a9-125">Insamlingstoken kan sedan användas för att referera till betalningsinsamlad i efterföljande operationer, t.ex. återbetalningsbegär.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-125">The capture token can then be used to reference the payment capture in subsequent operations, such as refund requests.</span></span> | 
| <span data-ttu-id="ea6a9-126">Kortet är inte tillgängligt</span><span class="sxs-lookup"><span data-stu-id="ea6a9-126">Card not present</span></span> | <span data-ttu-id="ea6a9-127">En term som refererar till betalningstransaktioner där ett fysiskt kort inte visas.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-127">A term that refers to payment transactions where a physical card isn't presented.</span></span> <span data-ttu-id="ea6a9-128">Dessa transaktioner kan till exempel inträffa i scenarier med näthandel eller kundtjänst.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-128">For example, these transactions can occur in e-commerce or call center scenarios.</span></span> <span data-ttu-id="ea6a9-129">För dessa transaktioner anges den betalningsrelaterade informationen manuellt på en näthandelssajt, i ett kundtjänstflöde, eller i POS eller i betalningsterminalen.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-129">For these transactions, the payment-related information is manually entered on an e-commerce website, in a call center flow, or on the POS or payment terminal.</span></span> |
| <span data-ttu-id="ea6a9-130">Kortet är tillgängligt</span><span class="sxs-lookup"><span data-stu-id="ea6a9-130">Card present</span></span> | <span data-ttu-id="ea6a9-131">En term som refererar till betalningstransaktioner där ett fysiskt kort presenteras och används på en betalningsterminal som är ansluten till Microsoft Dynamics 365 kassasystemet.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-131">A term that refers to payment transactions where a physical card is presented and used on a payment terminal that is connected to the Microsoft Dynamics 365 POS system.</span></span> |

## <a name="overview"></a><span data-ttu-id="ea6a9-132">Översikt</span><span class="sxs-lookup"><span data-stu-id="ea6a9-132">Overview</span></span>

<span data-ttu-id="ea6a9-133">Vanligtvis beskriver termen *betalningar i flera kanaler* möjligheten att skapa en order i en kanal och utföra den i en annan kanal.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-133">In general, the term *omni-channel payments* describes the ability to create an order in one channel and fulfill it in another channel.</span></span> <span data-ttu-id="ea6a9-134">Den nyckel som har stöd för betalningar i flera kanaler bevarar betalningsdetaljer tillsammans med resten av orderdetaljerna och använder sedan dessa betalningsdetaljer när ordern återkallas eller bearbetas i en annan kanal.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-134">The key to omni-channel payment support is preserving payment details together with the rest of the order details, and then using those payment details when the order is recalled or processed in another channel.</span></span> <span data-ttu-id="ea6a9-135">Ett klassiskt exempel är scenariot "Köp online, hämta i butiken".</span><span class="sxs-lookup"><span data-stu-id="ea6a9-135">A classic example is the "Buy online, pick up in store" scenario.</span></span> <span data-ttu-id="ea6a9-136">I det här scenariot läggs betalningsdetaljerna till när ordern skapas online.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-136">In this scenario, the payment details are added when the order is created online.</span></span> <span data-ttu-id="ea6a9-137">De återkallas sedan i POS för att debitera kundens betalningskort vid tidpunkten för upphämtningen.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-137">They are then recalled at the POS to charge the customer's payment card at the time of pickup.</span></span> 

<span data-ttu-id="ea6a9-138">Alla scenarier som beskrivs i det här avsnittet kan implementeras med hjälp av standard-SDK (Software Development Kit) som medföljer Commerce.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-138">All the scenarios that are described in this topic can be implemented by using the standard Payments software development kit (SDK) that is provided with Commerce.</span></span> <span data-ttu-id="ea6a9-139">[Dynamics 365 betalningsanslutning för Adyen](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/adyen-connector?tabs=8-1-3) innehåller en färdig implementering av alla scenarier som beskrivs här.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-139">The [Dynamics 365 Payment Connector for Adyen](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/adyen-connector?tabs=8-1-3) provides an out-of-box implementation of every scenario that is described here.</span></span> 

### <a name="prerequisites"></a><span data-ttu-id="ea6a9-140">Förutsättningar</span><span class="sxs-lookup"><span data-stu-id="ea6a9-140">Prerequisites</span></span>

<span data-ttu-id="ea6a9-141">Alla scenarier som beskrivs i det här avsnittet kräver en betalningsanslutning betalningar i flera kanaler.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-141">Every scenario that is described in this topic requires a payment connector that supports omni-channel payments.</span></span> <span data-ttu-id="ea6a9-142">Det går också att använda den färdiga Adyen-anslutningen eftersom den stöder scenarier som görs tillgängliga via SDK för betalningar.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-142">The out-of-box Adyen connector can also be used, because it supports the scenarios that are made available through the Payments SDK.</span></span> <span data-ttu-id="ea6a9-143">Mer information om hur du implementerar betalningsanslutningar och om Retail SDK i allmänhet finns på [startsidan för Retail för IT-proffs och utvecklare](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/dev-retail-home-page#payment-connectors).</span><span class="sxs-lookup"><span data-stu-id="ea6a9-143">For more information about how to implement payment connectors, and about the Retail SDK in general, visit the [Retail for IT pros and developers home page](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/dev-retail-home-page#payment-connectors).</span></span>

#### <a name="supported-versions"></a><span data-ttu-id="ea6a9-144">Versioner som stöds</span><span class="sxs-lookup"><span data-stu-id="ea6a9-144">Supported versions</span></span>

<span data-ttu-id="ea6a9-145">Betalningar i flera kanaler som beskrivs i det här avsnittet har getts ut som en del av Microsoft Dynamics 365 for Retail version 8.1.3.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-145">The omni-channel payment capabilities that are described in this topic were released as part of Microsoft Dynamics 365 for Retail version 8.1.3.</span></span> 

#### <a name="card-present-and-card-not-present-connectors"></a><span data-ttu-id="ea6a9-146">Anslutningar "Kortet är tillgängligt" och "kortet är tillgängligt"</span><span class="sxs-lookup"><span data-stu-id="ea6a9-146">"Card present" and "card not present" connectors</span></span>

<span data-ttu-id="ea6a9-147">Betalnings-SDK bygger på två uppsättningar API (application programming interfaces).</span><span class="sxs-lookup"><span data-stu-id="ea6a9-147">The Payments SDK relies on two sets of application programming interfaces (APIs) for payments.</span></span> <span data-ttu-id="ea6a9-148">en första uppsättningen med API:er **iPaymentProcessor**.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-148">The first set of APIs is named **iPaymentProcessor**.</span></span> <span data-ttu-id="ea6a9-149">Det används för att implementera "Kortet är tillgängligt" betalningsanslutningar om kan användas i samtalsgrupper och med Microsoft Dynamics näthandelsplattformen.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-149">It's used to implement "card not present" payment connectors that can be used in call centers and with the Microsoft Dynamics e-Commerce platform.</span></span> <span data-ttu-id="ea6a9-150">För mer information om gränssnittet **iPaymentProcessor**, se [Implementera en betalningsanslutningar och betalningsenhet](https://download.microsoft.com/download/e/2/7/e2735c65-1e66-4b8d-8a3c-e6ef3a319137/The%20Guide%20to%20Implementing%20Payment%20Connector%20and%20Payment%20Device_update.pdf) vitbok, som täcker betalningar.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-150">For more information about the **iPaymentProcessor** interface, see the [Implement a payment connector and a payment device](https://download.microsoft.com/download/e/2/7/e2735c65-1e66-4b8d-8a3c-e6ef3a319137/The%20Guide%20to%20Implementing%20Payment%20Connector%20and%20Payment%20Device_update.pdf) white paper, which covers payments.</span></span> 

<span data-ttu-id="ea6a9-151">Den första uppsättningen med API:er **iNamedRequestHandler**.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-151">The second set of APIs is named **iNamedRequestHandler**.</span></span> <span data-ttu-id="ea6a9-152">Den stöder implementering av "Kortet är tillgängligt" betalningsintegration som använder en betalningsterminal.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-152">It supports the implementation of "card present" payment integrations that use a payment terminal.</span></span> <span data-ttu-id="ea6a9-153">Fär mer information om gränssnittet **iNamedRequestHandler** se [skapa en betalningsintegration för en betalningsterminal](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/end-to-end-payment-extension).</span><span class="sxs-lookup"><span data-stu-id="ea6a9-153">For more information about the **iNamedRequestHandler** interface, see [Create a payment integration for a payment terminal](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/end-to-end-payment-extension).</span></span> 

### <a name="setup-and-configuration"></a><span data-ttu-id="ea6a9-154">Installation och konfiguration</span><span class="sxs-lookup"><span data-stu-id="ea6a9-154">Setup and configuration</span></span>

<span data-ttu-id="ea6a9-155">Följande komponenter och inställningssteg krävs:</span><span class="sxs-lookup"><span data-stu-id="ea6a9-155">The following components and setup steps are required:</span></span>

- <span data-ttu-id="ea6a9-156">**eCommerce-integration** : en integration med Commerce krävs för att stödja scenarier där en order kommer från en onlinebutik.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-156">**eCommerce integration:** An integration with Commerce is required to support scenarios where an order originates in an online storefront.</span></span> <span data-ttu-id="ea6a9-157">Mer information om Retail E-commerce SDK finns i [SKD (Software Development Kit) för näthandelsplattform](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/ecommerce-platform-sdk).</span><span class="sxs-lookup"><span data-stu-id="ea6a9-157">For more information about the Retail e-Commerce SDK, see [e-Commerce platform software development kit (SDK)](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/ecommerce-platform-sdk).</span></span> <span data-ttu-id="ea6a9-158">I en demomiljö har referensbutiken stöd för betalningsscenarier i flera kanaler.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-158">In a demo environment, the reference storefront supports omni-channel payment scenarios.</span></span> 
- <span data-ttu-id="ea6a9-159">**Konfiguration av onlinebetalningar:** inställningarna för onlinekanal måste inkludera en betalningsanslutning som har uppdaterats för att stödja betalningar i flera kanaler.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-159">**Online payments configuration:** The setup of the online channel must include a payment connector that has been updated to support omni-channel payments.</span></span> <span data-ttu-id="ea6a9-160">Alternativt kan den färdiga betalningssndlutningen användas.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-160">Alternatively, the out-of-box payment connector can be used.</span></span> <span data-ttu-id="ea6a9-161">Information om hur du konfigurerar Adyen för betalningsanslutning för onlinebutiker finns i [Adyen betalningsanslutning](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/adyen-connector?tabs=8-1-3#e-commerce)</span><span class="sxs-lookup"><span data-stu-id="ea6a9-161">For information about how to configure the Adyen payment connector for online stores, see [Adyen payment connector](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/adyen-connector?tabs=8-1-3#e-commerce).</span></span> <span data-ttu-id="ea6a9-162">Förutom de inställningssteg för näthandel som beskrivs i det avsnittet, måste parametern **Tillåt att spara betalningsinformation i näthandel** anges till **Sant** i inställningarna för Adyen-anslutningen.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-162">In addition to the eCommerce setup steps that are described in that topic, the **Allow saving payment information in e-commerce** parameter must be set to **True** in the settings for the Adyen connector.</span></span> 
- <span data-ttu-id="ea6a9-163">**Konfiguration av betalningar i flera kanaler** I backoffice, gå till **Butik och handel \> Administrationsinställning \> Parametrar \> Gemensamma handelsparametrar**.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-163">**Omni-channel payments configuration:** In the back office, go to **Retail and Commerce \> Headquarters setup \> Parameters \> Commerce shared parameters**.</span></span> <span data-ttu-id="ea6a9-164">sedan på fliken **Betalningar i flera kanaler** anger du alternativet **Använd betalningar i flera kanaler** till **Ja**.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-164">Then, on the **Omni-channel payments** tab, set the **Use omni-channel payments** option to **Yes**.</span></span> <span data-ttu-id="ea6a9-165">I Commerce versioner 10.0.12 och senare finns den här inställningen på arbetsytan **funktionshantering**.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-165">In Commerce versions 10.0.12 and later, this setting is in the **Feature Management** workspace.</span></span> <span data-ttu-id="ea6a9-166">Välj funktionen **Betalningar i flera kanaler** och klicka på **Aktivera nu**.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-166">Select the **Omni-channel payments** feature and click **Enable now**.</span></span> 
- <span data-ttu-id="ea6a9-167">**Betalningstjänster:** Kundtjänst använder standardbetalningsanslutningen på sidan **betalningstjänster** för att bearbeta betalningar.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-167">**Payment services:** The call center uses the default payment connector on the **Payment services** page to process payments.</span></span> <span data-ttu-id="ea6a9-168">Om du vill stödja scenarier som t.ex. "Köp i kundtjänst, hämta i butik" måste den här standardbetalningsanslutningen vara Adyen betalningsanslutning eller en betalningsanslutning som uppfyller implementeringskraven för betalningar i flera kanaler.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-168">To support scenarios such as "Buy in call center, pick up in store," this default payment connector must be the Adyen payment connector or a payment connector that meets the implementation requirements for omni-channel payments.</span></span>
- <span data-ttu-id="ea6a9-169">**EFT-tjänst** : betalningar via en betalningsterminal måste ställas in på snabbfliken **EFT** i maskinvaruprofilen.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-169">**EFT service:** Payments through a payment terminal must be set up on the **EFT service** FastTab of the hardware profile.</span></span> <span data-ttu-id="ea6a9-170">Adyen-anslutaren stöder färdiga scenarier för betalningar i flera kanaler.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-170">The Adyen connector supports omni-channel payments scenarios out of the box.</span></span> <span data-ttu-id="ea6a9-171">Andra betalningsanslutningar som stöder **iNamedRequestHandler**-gränssnittet kan även användas om de stöder betalningar i flera kanaler.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-171">Other payment connectors that support the **iNamedRequestHandler** interface can also be used if they support omni-channel payments.</span></span>
- <span data-ttu-id="ea6a9-172">**Tillgänglighet för betalningsanslutning:** när en order återkallas, inkluderar betalningsmedelsraderna som återkallas tillsammans med ordernamnet på betalningsanslutningen som användes för att skapa de auktoriseringar som är associerade med ordern.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-172">**Payment connector availability:** When an order is recalled, the payment tender lines that are recalled together with the order include the name of the payment connector that was used to create the authorizations that are associated with that order.</span></span> <span data-ttu-id="ea6a9-173">När ordern är uppfylld försöker betalnings-SDK använda samma anslutnnig som du använde när du skapade den ursprungliga auktoriseringen.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-173">When the order is fulfilled, the Payments SDK tries to use the same connector that was used to create the original authorization.</span></span> <span data-ttu-id="ea6a9-174">Därför måste en betalningsanslutning med samma handelsegenskaper finnas tillgänglig för insamling.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-174">Therefore, a payment connector that has the same merchant properties must be available for capture.</span></span> 
- <span data-ttu-id="ea6a9-175">**Korttyper:** för att scenarier ska fungera ordentligt måste varje kanal ha samma inställningar för betalningsmedelstyper som kan användas för flera kanaler.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-175">**Card types:** For omni-channel scenarios to work properly, each channel must have the same setup for tender types that can be used for omni-channel.</span></span> <span data-ttu-id="ea6a9-176">Dessa inställningar inkluderar betalningsmetod-ID:n och korttyp-ID:n.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-176">This setup includes payment method IDs and card type IDs.</span></span> <span data-ttu-id="ea6a9-177">Om t.ex. **kortets** betalningsmedeltyp har ID **2** i inställningen för onlinebutik, ska det ha samma ID i butiksinställningarna.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-177">For example, if the **Cards** tender type has an ID of **2** in the online store setup, it should have the same ID in the retail store setup.</span></span> <span data-ttu-id="ea6a9-178">Samma krav gäller för kort typs-ID:n.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-178">The same requirement applies to card type IDs.</span></span> <span data-ttu-id="ea6a9-179">Om kortnummer **12** är inställt på **VISA** i onlinebutiken ska samma ID ställas in för butiken.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-179">If card number **12** is set to **VISA** in the online store, the same ID should be set up for the retail store.</span></span> 
- <span data-ttu-id="ea6a9-180">Retail Modern POS för Windows eller Android med inbyggd maskinvarustation -eller-</span><span class="sxs-lookup"><span data-stu-id="ea6a9-180">The Retail Modern POS for Windows or Android with built-in hardware station   -or-</span></span>
- <span data-ttu-id="ea6a9-181">Modern POS för iOS eller Cloud POS med ansluten delad maskinvarustation.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-181">Modern POS for iOS or Cloud POS with connected shared hardware station.</span></span> 

### <a name="basic-principle-supporting-omni-channel-payments"></a><span data-ttu-id="ea6a9-182">Grundläggande princip som stöder betalningar i felra kanaler</span><span class="sxs-lookup"><span data-stu-id="ea6a9-182">Basic principle supporting omni-channel payments</span></span>

<span data-ttu-id="ea6a9-183">Betalningsanslutningar och betalningsbehandlare använder token eller referenser för att referera till interaktioner som är relaterade till kortbetalningar.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-183">Payment connectors and payment processors use tokens, or references, to reference interactions that are related to card payments.</span></span> <span data-ttu-id="ea6a9-184">När t.ex. en betalningsauktorisering begärs ges en referens till denna auktorisering.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-184">For example, when a payment authorization is requested, a reference to that authorization is provided.</span></span> <span data-ttu-id="ea6a9-185">Därför kan auktoriseringen refereras senare när fonder registreras vid tiden för uppfyllandet.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-185">Therefore, the authorization can be referenced later, when funds are captured at the time of fulfillment.</span></span> <span data-ttu-id="ea6a9-186">Denna auktorisering är unik för handlaren, betalningsanslutning och processorn.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-186">This authorization is unique to the merchant, payment connector, and processor.</span></span> 

<span data-ttu-id="ea6a9-187">Om en order som har skapats online hämtas i butiken, måste samma betalningsinformation för ordern återkallas och användas.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-187">If an order that was created online is being picked up in the store, the same payment details for that order must be recalled and used.</span></span> <span data-ttu-id="ea6a9-188">När den ursprungliga informationen tillhandahålls som en del av begäran att fånga en betalning mot den ursprungliga auktorisationen, kan betalnings behandlaren hantera begäran och samla in betalningen.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-188">When the original details are provided as part of the request to capture a payment against the original authorization, the payment processor will be able to handle the request and capture the payment.</span></span> 

<span data-ttu-id="ea6a9-189">Om du vill referera till din onlinebeställning korrekt, måste du också ha ett "kort som inte är tillgängligt" som stöder samma processor.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-189">To correctly reference the online order, a "card not present" payment connector that supports the same processor must also be available.</span></span> <span data-ttu-id="ea6a9-190">På detta sätt kan kassasystemet ha en processor för "kort är tillgängligt"-betalningar, men den kan också ha tillgång till andra betalningsanslutningar så att den kan uppfylla order som skapas i andra kanaler genom att använda olika betalningsprocessorer.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-190">In this way, the POS system can have one processor for "card present" payments, but it can also have access to other payment connectors so that it can fulfill orders that are created in other channels by using different payment processors.</span></span> 

## <a name="supported-scenarios"></a><span data-ttu-id="ea6a9-191">Stödda scenarier</span><span class="sxs-lookup"><span data-stu-id="ea6a9-191">Supported scenarios</span></span>

<span data-ttu-id="ea6a9-192">Följande scenarier för betalning i flera kanaler stöds:</span><span class="sxs-lookup"><span data-stu-id="ea6a9-192">The following omni-channel payment scenarios are supported:</span></span>

- <span data-ttu-id="ea6a9-193">Köp online och hämta i butiken</span><span class="sxs-lookup"><span data-stu-id="ea6a9-193">Buy online, pick up in store</span></span>
- <span data-ttu-id="ea6a9-194">Köp i kundtjänst och hämta i butiken</span><span class="sxs-lookup"><span data-stu-id="ea6a9-194">Buy in call center, pick up in store</span></span>
- <span data-ttu-id="ea6a9-195">Köp i butik A och hämta i butik B</span><span class="sxs-lookup"><span data-stu-id="ea6a9-195">Buy in store A, pick up in store B</span></span>
- <span data-ttu-id="ea6a9-196">Köp i butik A, leverera till kund</span><span class="sxs-lookup"><span data-stu-id="ea6a9-196">Buy in store A, ship to customer</span></span>

    > [!NOTE]
    > <span data-ttu-id="ea6a9-197">Betalningar som görs i kundtjänst och som är kopplade till betalningsfunktionen "normal" måste markeras som **Förskottsbetala** = **Ja** för att återspeglas i det belopp som ska förfalla vid återanrop av ordern i POS.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-197">Payments made in the call center that map to the "Normal" payment function must be marked as **Prepay** = **Yes** to be reflected in the amount due when recalling the order in the POS.</span></span> <span data-ttu-id="ea6a9-198">Ej förskottsbetala betalningar av typen normal identifieras inte när ordern återkallas i POS.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-198">Non-prepay payments of type "Normal" are not recognized when the order is recalled in POS.</span></span> 

<span data-ttu-id="ea6a9-199">Variationer av dessa scenarier stöds också.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-199">Variations of these scenarios are also supported.</span></span> <span data-ttu-id="ea6a9-200">En onlinebeställning kan till exempel inkludera både rader som ska levereras till kunden och de rader som ska hämtas i butiken.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-200">For example, an online order might include both lines that will be shipped to the customer and lines that will be picked up in a store.</span></span> <span data-ttu-id="ea6a9-201">Alla alternativ för orderuppfyllelse stöds via betalningar i flera kanaler.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-201">All order fulfillment options are supported via omni-channel payments.</span></span> 

<span data-ttu-id="ea6a9-202">I följande avsnitt beskrivs stegen för varje scenario och hur du kör scenariot med hjälp av demodata.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-202">The following sections describe the steps for each scenario and show how to run the scenario by using demo data.</span></span> 

### <a name="buy-online-pick-up-in-store"></a><span data-ttu-id="ea6a9-203">Köp online och hämta i butiken</span><span class="sxs-lookup"><span data-stu-id="ea6a9-203">Buy online, pick up in store</span></span>

<span data-ttu-id="ea6a9-204">Innan du börjar måste du se till att följande förutsättningar är på plats:</span><span class="sxs-lookup"><span data-stu-id="ea6a9-204">Before you start, make sure that the following prerequisites are in place:</span></span>

- <span data-ttu-id="ea6a9-205">Du har en referensbutik där Adyen-anslutning har konfigurerats.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-205">You have a reference storefront where the Adyen connector is configured.</span></span>
- <span data-ttu-id="ea6a9-206">Alternativet **Betalningar i flera kanaler** på sidan **Gemensamma handelsparametrar** är inställt på **Sant**.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-206">The **Omni-channel payments** option on the **Commerce shared parameters** page is set to **True**.</span></span> <span data-ttu-id="ea6a9-207">I senare versioner flyttas den här inställningen till arbetsytan **funktionshantering** där du kan välja funktionen **Betalningar i flera kanaler** och klicka på **Aktivera nu**.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-207">In later versions this settng is moved to the **Feature Management** workspace where you can select the **Omni-channel payments** feature and click **Enable now**.</span></span> 
- <span data-ttu-id="ea6a9-208">Adyen-betalnings anslutnng har konfigurerats för Houston kassaregistret.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-208">The Adyen payment connector is configured for the Houston POS register.</span></span>
- <span data-ttu-id="ea6a9-209">Retail Modern POS för Windows eller Android med inbyggd maskinvarustation -eller-</span><span class="sxs-lookup"><span data-stu-id="ea6a9-209">The Retail Modern POS for Windows or Android with built-in hardware station   -or-</span></span>
- <span data-ttu-id="ea6a9-210">Modern POS för iOS eller Cloud POS med ansluten delad maskinvarustation.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-210">Modern POS for iOS or Cloud POS with connected shared hardware station.</span></span> 

<span data-ttu-id="ea6a9-211">Följ dessa steg om du vill köra scenariet:</span><span class="sxs-lookup"><span data-stu-id="ea6a9-211">Follow these steps to run the scenario.</span></span>

1. <span data-ttu-id="ea6a9-212">I en referensbutik skapar du en order för upphämtning i butik.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-212">In the reference storefront, create an order for in-store pickup.</span></span> <span data-ttu-id="ea6a9-213">Du måste välja butiken **Houston**.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-213">Be sure to select the **Houston** store.</span></span> 
2. <span data-ttu-id="ea6a9-214">Gå igenom kassastegen och betala genom att använda ett testkreditkortsnummer.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-214">Go through the checkout steps, and pay by using a test credit card number.</span></span> <span data-ttu-id="ea6a9-215">Du hittar testkreditkortsnummer på sidan [sidan Adyen testkreditkortsnummer](https://docs.adyen.com/development-resources/test-cards/test-card-numbers/#description).</span><span class="sxs-lookup"><span data-stu-id="ea6a9-215">You can find test credit card numbers on the [Adyen test card numbers page](https://docs.adyen.com/development-resources/test-cards/test-card-numbers/#description).</span></span>
3. <span data-ttu-id="ea6a9-216">I Commerce använder du batchjobbet **Synkronisera order** och distributionsschema **P-001** för att skapa order i backoffice.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-216">In Commerce, use the **Synchronize orders** batch job and the **P-001** distribution schedule to create the orders in the back office.</span></span>
4. <span data-ttu-id="ea6a9-217">I POS på välkomstsidan väljer du åtgärden **order som ska hämtas** för att visa order för upphämtning i butik.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-217">In the POS, on the welcome page, select the **Orders to pickup** operation to see the orders for in-store pickup.</span></span> 
5. <span data-ttu-id="ea6a9-218">Välj en eller flera rader från ordern som skapades i referensbutiken och **hämta**.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-218">Select one or more lines from the order that was created in the reference storefront, and then select **Pick up**.</span></span>

    <span data-ttu-id="ea6a9-219">Ordern hämtas från backoffice.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-219">The order is retrieved from the back office.</span></span> 

6. <span data-ttu-id="ea6a9-220">När detaljerna för orderraderna hämtas från backoffice och en kortbetalning som kan användas för flera kanaler identifieras, informeras du om att ett betalsätt finns tillgänglig.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-220">When the order line details are retrieved from the back office, and a card payment that can be used for omni-channel is detected, you're informed that a payment method is available.</span></span>
7. <span data-ttu-id="ea6a9-221">Välj **Använd den tillgängliga betalsättet** om du vill slutföra transaktionen med hjälp av kortinformationen som angavs i referensbutiken.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-221">Select **Use available payment method** to complete the transaction by using the card details that were entered in the reference storefront.</span></span>

    <span data-ttu-id="ea6a9-222">Orderraderna läses in på transaktionssidan och förfallet saldo är 0 (noll).</span><span class="sxs-lookup"><span data-stu-id="ea6a9-222">The order lines are loaded on the transaction page, and the balance due is 0 (zero).</span></span> 

8. <span data-ttu-id="ea6a9-223">Välj fliken **betalningar** om du vill visa den betalningsmedelsrad som hämtades från online-ordern.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-223">Select the **Payments** tab to view the tender line that was pulled from the online order.</span></span> 
9. <span data-ttu-id="ea6a9-224">Välj valfri betalningsmetod för att slutföra transaktionen.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-224">Select any payment method to complete the transaction.</span></span> 

### <a name="buy-in-call-center-pick-up-in-store"></a><span data-ttu-id="ea6a9-225">Köp i kundtjänst och hämta i butiken</span><span class="sxs-lookup"><span data-stu-id="ea6a9-225">Buy in call center, pick up in store</span></span>

1. <span data-ttu-id="ea6a9-226">I Commerce, på sidan **Kundtjänst** anger du **Karen Berg** i sökfältet och väljer sedan **Sök**.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-226">In Commerce, on the **Customer service** page, enter **Karen Berg** in the search bar, and then select **Search**.</span></span> 
3. <span data-ttu-id="ea6a9-227">Välj **Karen Berg** i sökresultaten.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-227">Select **Karen Berg** in the search results.</span></span>
4. <span data-ttu-id="ea6a9-228">När Karen har lästs in till sidan **kundtjänst** väljer du **Ny försäljningsorder**.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-228">After Karen is loaded onto the **Customer service** page, select **New sales order**.</span></span>
5. <span data-ttu-id="ea6a9-229">På sidan ny försäljningsorder väljer du **rubrik** för att visa orderrubriken.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-229">On the new sales order page, select **Header** to view the order header.</span></span> 
6. <span data-ttu-id="ea6a9-230">På sidan **order rubrik** ställer du in webbplatsen till **central** och lagerstället till **Houston**.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-230">On the **Order header** page, set the site to **Central** and the warehouse to **Houston**.</span></span>
7. <span data-ttu-id="ea6a9-231">På fliken **leverera** ställer du in **leveransmetod** till **60** för kundupphämtning.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-231">On the **Deliver** tab, set the **Mode of delivery** field to **60** for customer pickup.</span></span>
8. <span data-ttu-id="ea6a9-232">Markera **rader** och lägg till en eller flera rader i ordern.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-232">Select **Lines**, and then add one or more lines to the order.</span></span> 
9. <span data-ttu-id="ea6a9-233">Välj **Slutför** om du vill ange flödet för slutförande av order.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-233">Select **Complete** to enter the order completion flow.</span></span>
10. <span data-ttu-id="ea6a9-234">Bläddra ned till betalningssektionerna väljer du **Lägg** och välj sedan och där betalningsmetodtypen anges **Kortet**.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-234">Scroll down to the payments section, select **Add**, and then select a line where the payment method type is set to **Cards**.</span></span> 
11. <span data-ttu-id="ea6a9-235">Välj plus tecknet (**+**) om du vill lägga till en kortbetalning.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-235">Select the plus sign (**+**) to add a card payment.</span></span> 
12. <span data-ttu-id="ea6a9-236">Ange information om ett testkreditkortsnummer som du hittar på sidan [Adyen-testkreditkortsnummer](https://docs.adyen.com/development-resources/test-cards/test-card-numbers/#description) och välj **OK**.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-236">Enter the details for a test credit card number that you found on the [Adyen test card numbers page](https://docs.adyen.com/development-resources/test-cards/test-card-numbers/#description), and then select **OK**.</span></span>

    > [!NOTE]
    > <span data-ttu-id="ea6a9-237">Om kortnumret som du angav skiljer sig från varumärket som valdes när betalningen initierades, kommer betalningen att gå igenom ändå.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-237">If the card brand for the card number that you entered differs from the brand that was selected when the payment was initiated, the payment will still go through.</span></span> <span data-ttu-id="ea6a9-238">Den kommer dock att bokföras på konton som är kopplade till det kortmärke som du markerade i steg 10.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-238">However, it will be posted to the accounts that are mapped to the card brand that you selected in step 10.</span></span>

12. <span data-ttu-id="ea6a9-239">Klicka på **OK** igen för att stänga dialogrutan **Slutförande av order, betalningar**.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-239">Select **OK** again to close the **Order completion payments** dialog box.</span></span>
13. <span data-ttu-id="ea6a9-240">På sidan **Sammanfattning försäljningsorder** väljer du **skicka**.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-240">On the **Sales order summary** page, select **Submit**.</span></span>
14. <span data-ttu-id="ea6a9-241">I POS på välkomstsidan väljer du åtgärden **order som ska hämtas** för att visa order för upphämtning i butik.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-241">In the POS, on the welcome page, select the **Orders to pickup** operation to see the orders for in-store pickup.</span></span> 
15. <span data-ttu-id="ea6a9-242">Välj en eller flera rader från ordern som skapades i referensbutiken och **hämta**.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-242">Select one or more lines from the order that was created in the reference storefront, and then select **Pick up**.</span></span>

    <span data-ttu-id="ea6a9-243">Ordern hämtas från backoffice.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-243">The order is retrieved from the back office.</span></span> 

16. <span data-ttu-id="ea6a9-244">När detaljerna för orderraderna hämtas från backoffice och en kortbetalning som kan användas för flera kanaler identifieras, informeras du om att ett betalsätt finns tillgänglig.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-244">When the order line details are retrieved from the back office, and a card payment that can be used for omni-channel is detected, you're informed that a payment method is available.</span></span>
17. <span data-ttu-id="ea6a9-245">Välj **Använd den tillgängliga betalsättet** om du vill slutföra transaktionen med hjälp av kortinformationen som angavs i referensbutiken.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-245">Select **Use available payment method** to complete the transaction by using the card details that were entered in the reference storefront.</span></span>

    <span data-ttu-id="ea6a9-246">Orderraderna läses in på transaktionssidan och förfallet saldo är 0 (noll).</span><span class="sxs-lookup"><span data-stu-id="ea6a9-246">The order lines are loaded on the transaction page, and the balance due is 0 (zero).</span></span>

18. <span data-ttu-id="ea6a9-247">Välj fliken **betalningar** om du vill visa den betalningsmedelsrad som hämtades från online-ordern.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-247">Select the **Payments** tab to view the tender line that was pulled from the online order.</span></span> 
19. <span data-ttu-id="ea6a9-248">Välj valfri betalningsmetod för att slutföra transaktionen.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-248">Select any payment method to complete the transaction.</span></span> 

### <a name="buy-in-store-a-pick-up-in-store-b"></a><span data-ttu-id="ea6a9-249">Köp i butik A och hämta i butik B</span><span class="sxs-lookup"><span data-stu-id="ea6a9-249">Buy in store A, pick up in store B</span></span>

1. <span data-ttu-id="ea6a9-250">Starta POS för Houston-butiken.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-250">Start the POS for the Houston store.</span></span>
2. <span data-ttu-id="ea6a9-251">På sidan **transaktion** lägger du till Karen Berg till transaktionen med hjälp av det numeriska tangentbordet för **2001**.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-251">On the **Transaction** page, add Karen Berg to the transaction by using the number pad to enter **2001**.</span></span>
3. <span data-ttu-id="ea6a9-252">Lägg till en eller flera rader till transaktionen.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-252">Add one or more lines to the transaction.</span></span>
4. <span data-ttu-id="ea6a9-253">Välj **order** om du vill visa orderalternativen.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-253">Select **Orders** to see the order options.</span></span>
5. <span data-ttu-id="ea6a9-254">Välj **Hämta alla** och välj sedan när du uppmanas **kundorder**.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-254">Select **Pick up all**, and then, when you're prompted, select **Customer order**.</span></span>
6. <span data-ttu-id="ea6a9-255">Ange **Seattle** i sökfältet och välj sedan butiken i **Stockholm** för upphämtning.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-255">In the search bar, enter **Seattle**, and then select the **Seattle** store for pickup.</span></span> 
7. <span data-ttu-id="ea6a9-256">Välj **OK** om du vill acceptera aktuellt datum som datum för upphämtningen.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-256">Select **OK** to accept the current date as the date of pickup.</span></span>
9. <span data-ttu-id="ea6a9-257">Välj **Betalningskort** för att initiera betalningen.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-257">Select **Pay card** to initiate the payment.</span></span>
10. <span data-ttu-id="ea6a9-258">Betalningsmedel kortbetalning för det belopp som förfaller till insättning.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-258">Tender the card payment for the amount that is due for the deposit.</span></span> 
11. <span data-ttu-id="ea6a9-259">Slutför insättningsbetalningen på betalningsterminalen.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-259">Complete the deposit payment on the payment terminal.</span></span> 
12. <span data-ttu-id="ea6a9-260">När insättningen har betalats väljer du alternativet att använda samma kort för uppfyllelse och väntar på att ordern ska slutföras.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-260">After the deposit is paid, select the option to use the same card for fulfillment, and wait for the order to be completed.</span></span> 
13. <span data-ttu-id="ea6a9-261">Starta POS för Seattle-butiken.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-261">Start the POS for the Seattle store.</span></span>
14. <span data-ttu-id="ea6a9-262">I POS på välkomstsidan väljer du åtgärden **order som ska hämtas** för att visa order för upphämtning i butik.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-262">In the POS, on the welcome page, select the **Orders to pickup** operation to see the orders for in-store pickup.</span></span> 
15. <span data-ttu-id="ea6a9-263">Välj en eller flera rader från ordern som skapades i referensbutiken och **hämta**.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-263">Select one or more lines from the order that was created in the reference storefront, and then select **Pick up**.</span></span>

    <span data-ttu-id="ea6a9-264">Ordern hämtas från backoffice.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-264">The order is retrieved from the back office.</span></span> 

16. <span data-ttu-id="ea6a9-265">När detaljerna för orderraderna hämtas från backoffice och en kortbetalning som kan användas för flera kanaler identifieras, informeras du om att ett betalsätt finns tillgänglig.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-265">When the order line details are retrieved from the back office, and a card payment that can be used for omni-channel is detected, you're informed that a payment method is available.</span></span>
17. <span data-ttu-id="ea6a9-266">Välj **Använd den tillgängliga betalsättet** om du vill slutföra transaktionen med hjälp av kortinformationen som angavs i referensbutiken.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-266">Select **Use available payment method** to complete the transaction by using the card details that were entered in the reference storefront.</span></span>

    <span data-ttu-id="ea6a9-267">Orderraderna läses in på transaktionssidan och förfallet saldo är 0 (noll).</span><span class="sxs-lookup"><span data-stu-id="ea6a9-267">The order lines are loaded on the transaction page, and the balance due is 0 (zero).</span></span>

18. <span data-ttu-id="ea6a9-268">Välj fliken **betalningar** om du vill visa den betalningsmedelsrad som hämtades från online-ordern.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-268">Select the **Payments** tab to view the tender line that was pulled from the online order.</span></span> 
19. <span data-ttu-id="ea6a9-269">Välj valfri betalningsmetod för att slutföra transaktionen.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-269">Select any payment method to complete the transaction.</span></span> 

### <a name="buy-in-store-a-ship-to-customer"></a><span data-ttu-id="ea6a9-270">Köp i butik A, leverera till kund</span><span class="sxs-lookup"><span data-stu-id="ea6a9-270">Buy in store A, ship to customer</span></span>

1. <span data-ttu-id="ea6a9-271">Starta POS för Houston-butiken.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-271">Start the POS for the Houston store.</span></span>
2. <span data-ttu-id="ea6a9-272">På sidan **transaktion** lägger du till Karen Berg till transaktionen med hjälp av det numeriska tangentbordet för **2001**.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-272">On the **Transaction** page, add Karen Berg to the transaction by using the number pad to enter **2001**.</span></span>
3. <span data-ttu-id="ea6a9-273">Lägg till en eller flera rader till transaktionen.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-273">Add one or more lines to the transaction.</span></span>
4. <span data-ttu-id="ea6a9-274">Välj **order** om du vill visa orderalternativen.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-274">Select **Orders** to see the order options.</span></span>
5. <span data-ttu-id="ea6a9-275">Välj **leverera alla** och välj sedan när du uppmanas **kundorder**.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-275">Select **Ship all**, and then, when you're prompted, select **Customer order**.</span></span>
6. <span data-ttu-id="ea6a9-276">På sidan för leveransmetod, välj **Standard på natten** och välj sedan **OK** för att acceptera dagens datum som leveransdatum.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-276">In the shipping method page, select **Standard overnight**, and then select **OK** to accept today's date as the shipping date.</span></span> 
7. <span data-ttu-id="ea6a9-277">Välj **OK** om du vill acceptera aktuellt datum som datum för upphämtningen.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-277">Select **OK** to accept the current date as the date of pickup.</span></span>
8. <span data-ttu-id="ea6a9-278">Välj **Betalningskort** för att initiera betalningen.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-278">Select **Pay card** to initiate the payment.</span></span>
9. <span data-ttu-id="ea6a9-279">Betalningsmedel kortbetalning för det belopp som förfaller till insättning.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-279">Tender the card payment for the amount that is due for the deposit.</span></span> 
10. <span data-ttu-id="ea6a9-280">Slutför insättningsbetalningen på betalningsterminalen.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-280">Complete the deposit payment on the payment terminal.</span></span> 
11. <span data-ttu-id="ea6a9-281">När insättningen har betalats väljer du alternativet att använda samma kort för uppfyllelse och väntar på att ordern ska slutföras.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-281">After the deposit is paid, select the option to use the same card for fulfillment, and wait for the order to be completed.</span></span>

<span data-ttu-id="ea6a9-282">När ordern plockas, förpackas och faktureras i backoffice kommer betalningsdetaljerna som finns i POS att användas för att samla in medel för de varor som levereras till kunden.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-282">When the order is picked, packed, and invoiced in the back office, the payment details that are provided at the POS will be used to capture the funds for the goods that are being shipped to the customer.</span></span> 

## <a name="scenario-details"></a><span data-ttu-id="ea6a9-283">Scenario-information</span><span class="sxs-lookup"><span data-stu-id="ea6a9-283">Scenario details</span></span>

<span data-ttu-id="ea6a9-284">Förutom de grundläggande scenarier som just har beskrivits har flera förbättringar gjorts i betalnings-SDK:n för att stödja betalningar i flera kanaler.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-284">In addition to the basic scenarios that were just described, several enhancements have been made to the Payments SDK to support omni-channel payments.</span></span> 

### <a name="pos"></a><span data-ttu-id="ea6a9-285">Kassa</span><span class="sxs-lookup"><span data-stu-id="ea6a9-285">POS</span></span>

#### <a name="single-swipedip-for-customer-orders"></a><span data-ttu-id="ea6a9-286">Enstaka dragningar för kundorder</span><span class="sxs-lookup"><span data-stu-id="ea6a9-286">Single swipe/dip for customer orders</span></span>

<span data-ttu-id="ea6a9-287">Innan funktionen för betalning i flera kanaler implementerades, när kundorder som har inkluderat insättningar skapats i POS, behövde kunderna dra sina kort två gånger: en gång för att betala insättningen och en gång för att tokenisera kortet för efterföljande orderuppfyllelse.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-287">Before the omni-channel payments feature was implemented, when customer orders that included deposits were created at the POS, customers were required to swipe (or dip) their card two times: one time to pay the deposit and one time to tokenize the card for subsequent order fulfillment.</span></span> <span data-ttu-id="ea6a9-288">När funktionen för tokenisering av flera kanaler är aktiverad, måste kunden bara dra kortet en gång för att både betala insättningen och auktorisera beloppet som förfaller till betalning senare.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-288">When the omni-channel tokenization feature is turned on, customers must swipe their card only one time to both pay the deposit and authorize the amount that is due for goods that will be fulfilled later.</span></span> <span data-ttu-id="ea6a9-289">Vid tiden för uppfyllandet registreras de godkända medlen.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-289">At the time of fulfillment, the authorized funds are captured.</span></span> <span data-ttu-id="ea6a9-290">Innan funktionen för tokenisering av flera kanaler har implementerats skapas bara token för återkommande kort för efterföljande orderuppfyllelse.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-290">Before the omni-channel tokenization feature was implemented, only a recurring card token was created for subsequent order fulfillment.</span></span> <span data-ttu-id="ea6a9-291">Därför var medlen för det väntande uppfyllandet inte tillåtet och eftersom dessa medel inte hölls för det aktuella inköpet var det sannolikt att de kunde samlas in senare.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-291">Therefore, the funds for the pending fulfillment weren't authorized, and because those funds weren't being held for that specific purchase, it was less likely that they could be captured later.</span></span>

> [!NOTE]
> <span data-ttu-id="ea6a9-292">Enkel dragning stöds inte i Retail versionen 8.1.3.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-292">Single swipe isn't supported in Retail version 8.1.3.</span></span> <span data-ttu-id="ea6a9-293">Kundorder i version 8.1.3 använder samma flöde som användes innan funktionen för tokenisering av flera kanaler implementerades.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-293">Customer orders in version 8.1.3 use the same flow that was used before the omni-channel tokenization feature was implemented.</span></span> 

### <a name="cards-that-cant-issue-recurring-card-tokens"></a><span data-ttu-id="ea6a9-294">Kort som inte kan skicka token för återkommande kort</span><span class="sxs-lookup"><span data-stu-id="ea6a9-294">Cards that can't issue recurring card tokens</span></span>

<span data-ttu-id="ea6a9-295">Vissa kort kan inte användas för betalningar i flera kanaler eftersom de inte har stöd för att utfärda token för återkommande kort.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-295">Some cards can't be used for omni-channel payments, because they don't support issuing recurring card tokens.</span></span> <span data-ttu-id="ea6a9-296">När en order skapas i POS och insättningen betalas med hjälp av ett kort som inte stöder token för återkommande kort, används föregående korttokeniseringsflöde.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-296">When an order is created at the POS, if the deposit is paid by using a card that doesn't support recurring card tokens, the previous card tokenization flow is used.</span></span> <span data-ttu-id="ea6a9-297">Därför måste en kund som vill ge en betalning som ska användas för efterföljande order uppvisa ett annat kort.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-297">Therefore, a customer who wants to provide a payment that will be used for subsequent order fulfillment must present a second card.</span></span> <span data-ttu-id="ea6a9-298">Om det andra kortet inte stöder token för återkommande kort kommer tokeniseringsåtgärden att nekas och kassören uppmanas att be kunden att ange ett annat kort.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-298">If the second card doesn't support recurring card tokens, the tokenization action will be declined, and the cashier will be prompted to ask the customer to provide a different card.</span></span> 

### <a name="using-a-different-card"></a><span data-ttu-id="ea6a9-299">Använda ett annat kort</span><span class="sxs-lookup"><span data-stu-id="ea6a9-299">Using a different card</span></span>

<span data-ttu-id="ea6a9-300">En kund som kommer till butiken för orderupphämtning har möjlighet att använda ett annat kort.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-300">A customer who comes to the store for order pickup has the option to use a different card.</span></span> <span data-ttu-id="ea6a9-301">När kassören uppmanas att **Använd tillgänglig betalningsmetod** i samband med att ordern hämtas kan han eller hon fråga om kunden vill använda samma kort.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-301">When the cashier receives the **Use available payment method** prompt at the time of order pickup, he or she can ask whether the customer wants to use the same card.</span></span> <span data-ttu-id="ea6a9-302">Om kunden har förlorat kortet som användes för att skapa ordern och vill betala för ordern genom att använda ett annat kort, kan kassören välja **Använd en annan betalningsmetod**.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-302">If the customer has lost the card that was used to create the order and wants to pay for the order by using a different card, the cashier can select **Use a different payment method**.</span></span> <span data-ttu-id="ea6a9-303">Om kunden kommer tillbaka senare för att hämta fler artiklar för samma order, och det ursprungliga kortets auktorisering fortfarande är giltigt, kan kassören åter fråga om kunden vill använda det kortet.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-303">If the customer comes back later to pick up more items for the same order, if the original card authorization is still valid, the cashier can again ask whether the customer wants to use that card.</span></span>

### <a name="invalid-authorizations"></a><span data-ttu-id="ea6a9-304">Ogiltiga auktoriseringar</span><span class="sxs-lookup"><span data-stu-id="ea6a9-304">Invalid authorizations</span></span>

<span data-ttu-id="ea6a9-305">Om det kort som användes för att skapa en order inte längre är giltigt kommer begäran att misslyckas när du väljer produkter för upphämtning.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-305">If the card that was used to create an order is no longer valid, when products are selected for pickup, the payment capture request will fail.</span></span> <span data-ttu-id="ea6a9-306">Kassabetalningsanslutningen kommer sedan att försöka skapa en ny auktorisering och samla in med samma kortinformation.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-306">The POS payment connector will then try to create a new authorization and capture by using the same card details.</span></span> <span data-ttu-id="ea6a9-307">Om den nya auktoriseringen eller insamlingen misslyckas blir kassören informerad om att betalningen inte kunde behandlas.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-307">If the new authorization or capture fails, the cashier will be informed that the payment could not be processed.</span></span> <span data-ttu-id="ea6a9-308">Kassören måste sedan få en ny betalning från kunden.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-308">The cashier must then get a new payment from the customer.</span></span> 

### <a name="multiple-available-payments"></a><span data-ttu-id="ea6a9-309">Flera tillgängliga betalningar</span><span class="sxs-lookup"><span data-stu-id="ea6a9-309">Multiple available payments</span></span>

<span data-ttu-id="ea6a9-310">När en order som har flera betalningsmedel och flera rader hämtas, tar kassören först emot **Använd tillgängli betalningsmetod**.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-310">When an order that has multiple tenders and multiple lines is picked up, the cashier first receives the **Use available payment method** prompt.</span></span> <span data-ttu-id="ea6a9-311">Om det finns flera kort, när kassören väljer **Använd tillgängli betalningsmetod**, registreras befintliga betalningsmedel för kortet tills saldot uppfylls för de varor som för närvarande hämtas.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-311">If there are multiple cards, when the cashier selects **Use available payment method**, existing card tender lines will be captured until the balance is met for the goods that are currently being picked up.</span></span> <span data-ttu-id="ea6a9-312">Kassören har inte möjlighet att välja det kort som ska användas för varorna som hämtas.</span><span class="sxs-lookup"><span data-stu-id="ea6a9-312">The cashier won't have the option to select the card that should be used for the goods that are being picked up.</span></span> 

## <a name="related-topics"></a><span data-ttu-id="ea6a9-313">Relaterade ämnen</span><span class="sxs-lookup"><span data-stu-id="ea6a9-313">Related topics</span></span>

- [<span data-ttu-id="ea6a9-314">Vanliga frågor om betalningar</span><span class="sxs-lookup"><span data-stu-id="ea6a9-314">Payments FAQ</span></span>](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/payments-retail)
- [<span data-ttu-id="ea6a9-315">Dynamics 365-betalningskoppling för Adyen</span><span class="sxs-lookup"><span data-stu-id="ea6a9-315">Dynamics 365 Payment Connector for Adyen</span></span>](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/adyen-connector?tabs=8-1-3)
- [<span data-ttu-id="ea6a9-316">Konfigurera BOPIS i en Dynamics 365 Commerce bedömningsmiljö</span><span class="sxs-lookup"><span data-stu-id="ea6a9-316">Configure BOPIS in a Dynamics 365 Commerce evaluation environment</span></span>](https://docs.microsoft.com/dynamics365/commerce/cpe-bopis)



[!INCLUDE[footer-include](../includes/footer-banner.md)]
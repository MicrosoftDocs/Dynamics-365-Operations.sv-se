---
title: Förbättringar av funktionen för bokföring av utdrag
description: Det här avsnittet beskriver de förbättringar som har gjorts till funktionen för bokföring av utdrag.
author: josaw1
manager: AnnBe
ms.date: 05/14/2019
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
audience: Application User
ms.reviewer: josaw
ms.search.region: Global
ms.search.industry: retail
ms.author: anpurush
ms.search.validFrom: 2018-04-30
ms.dyn365.ops.version: AX 7.0.0, Retail July 2017 update
ms.openlocfilehash: e76a5ad741dca5831b609a5b991aa70e3753c621
ms.sourcegitcommit: 38d40c331c8894acb7b119c5073e3088b54776c1
ms.translationtype: HT
ms.contentlocale: sv-SE
ms.lasthandoff: 01/15/2021
ms.locfileid: "5009653"
---
# <a name="improvements-to-statement-posting-functionality"></a><span data-ttu-id="c1135-103">Förbättringar av funktionen för bokföring av utdrag</span><span class="sxs-lookup"><span data-stu-id="c1135-103">Improvements to statement posting functionality</span></span>

[!include [banner](includes/banner.md)]

<span data-ttu-id="c1135-104">Det här avsnittet beskriver den första uppsättningen förbättringar som har gjorts till funktionen för bokföring av utdrag.</span><span class="sxs-lookup"><span data-stu-id="c1135-104">This topic describes the first set of improvements that have been made to the statement posting feature.</span></span> <span data-ttu-id="c1135-105">Dessa förbättringar är tillgängliga i Microsoft Dynamics 365 for Finance and Operations 7.3.2.</span><span class="sxs-lookup"><span data-stu-id="c1135-105">These improvements are available in Microsoft Dynamics 365 for Finance and Operations 7.3.2.</span></span>

## <a name="activation"></a><span data-ttu-id="c1135-106">Aktivering</span><span class="sxs-lookup"><span data-stu-id="c1135-106">Activation</span></span>

<span data-ttu-id="c1135-107">Som standard ställs under distributionen av Finance and Operations 7.3.2 programmet in äldre funktionen för bokföring av utdrag.</span><span class="sxs-lookup"><span data-stu-id="c1135-107">By default, during deployment of Finance and Operations 7.3.2, the program is set up to use the legacy feature for statement postings.</span></span> <span data-ttu-id="c1135-108">Om du vill aktivera funktionen för bokföring av utdrag måste du aktivera konfigurationsnyckeln för den.</span><span class="sxs-lookup"><span data-stu-id="c1135-108">To enable the improved statement posting feature, you must turn on the configuration key for it.</span></span>

- <span data-ttu-id="c1135-109">Gå till **Systemadministration** \> **Inställningar** \> **Licenskonfigurationen** och sedan under noden **Retail och Commerce**, avmarkera kryssrutan **Utdrag (äldre)** och markera kryssrutan **Utdrag**.</span><span class="sxs-lookup"><span data-stu-id="c1135-109">Go to **System administration** \> **Setup** \> **License configuration**, and then, under the **Retail and Commerce** node, clear the **Statements (legacy)** check box, and select the **Statements** check box.</span></span>

<span data-ttu-id="c1135-110">När den nya **Utdrag** konfigurationsnyckeln är aktiverad och ett nytt menyalternativ som heter **Utdrag** är tillgänglig.</span><span class="sxs-lookup"><span data-stu-id="c1135-110">When the new **Statements** configuration key is turned on, a new menu item that is named **Statements** is available.</span></span> <span data-ttu-id="c1135-111">Det här menyobjektet låter dig manuellt skapa, beräkna och bokföra utdrag.</span><span class="sxs-lookup"><span data-stu-id="c1135-111">This menu item lets you manually create, calculate, and post statements.</span></span> <span data-ttu-id="c1135-112">Alla utdrag som orsakar ett felmeddelande när batchbokföringsprocessen används blir också tillgängliga via det här menyalternativet.</span><span class="sxs-lookup"><span data-stu-id="c1135-112">Any statement that causes an error when the batch posting process is used will also be available through this menu item.</span></span> <span data-ttu-id="c1135-113">(När den nya **Utdrag (äldre)** konfigurationsnyckeln är aktiverad och ett nytt menyalternativ som heter **Öppna utdrag**.)</span><span class="sxs-lookup"><span data-stu-id="c1135-113">(When the **Statements (legacy)** configuration key is turned on, the menu item is named **Open statements**.)</span></span>

<span data-ttu-id="c1135-114">Commerce omfattar följande valideringar som hör till dessa konfigurationsnycklar:</span><span class="sxs-lookup"><span data-stu-id="c1135-114">Commerce includes the following validations that are related to these configuration keys:</span></span>

- <span data-ttu-id="c1135-115">Båda konfigurationsnycklar kan inte aktiveras samtidigt.</span><span class="sxs-lookup"><span data-stu-id="c1135-115">Both configuration keys can't be turned on at the same time.</span></span>
- <span data-ttu-id="c1135-116">Samma konfigurationsnycklarna måste användas för alla åtgärder som utförs på ett visst utdrag under dess livscykel (skapa, beräkna, radera, bokföra och så vidare).</span><span class="sxs-lookup"><span data-stu-id="c1135-116">The same configuration keys must be used for all the operations that are performed on a given statement during its lifecycle (Create, Calculate, Clear, Post, and so on).</span></span> <span data-ttu-id="c1135-117">Exempelvis kan du inte skapa och beräkna ett utdrag när konfigurationsnyckeln **Utdrag (äldre)** aktiveras och sedan försöker bokföra samma uttryck när konfigurationsnyckeln **Utdrag**.</span><span class="sxs-lookup"><span data-stu-id="c1135-117">For example, you can't create and calculate a statement while the **Statement (legacy)** configuration key is turned on, and then try to post the same statement while the **Statement** configuration key is turned on.</span></span>

> [!NOTE]
> <span data-ttu-id="c1135-118">Vi rekommenderar att du använder konfigurationsnyckeln **Utdrag** för förbättrad funktion för bokföring av utdrag om du inte måste använda konfigurationsnyckeln **Utdrag (äldre)** istället.</span><span class="sxs-lookup"><span data-stu-id="c1135-118">We recommend that you use the **Statements** configuration key for the improved statement posting feature, unless you have compelling reasons to use the **Statements (legacy)** configuration key instead.</span></span> <span data-ttu-id="c1135-119">Microsoft fortsätter att investera i nya och förbättrade funktioner för bokföring av utdrag och det är viktigt att du växlar till det så snart som möjligt för att kunna utnyttja denna.</span><span class="sxs-lookup"><span data-stu-id="c1135-119">Microsoft will continue to invest in the new and improved statement posting feature, and it's important that you switch to it at the earliest opportunity to benefit from it.</span></span> <span data-ttu-id="c1135-120">Funktionen för bokföring av äldre utdrag kommer att tas bort från och med version 8.0.</span><span class="sxs-lookup"><span data-stu-id="c1135-120">The legacy statement posting feature is deprecated starting in 8.0 release.</span></span>

## <a name="setup"></a><span data-ttu-id="c1135-121">Konfigurera</span><span class="sxs-lookup"><span data-stu-id="c1135-121">Setup</span></span>

<span data-ttu-id="c1135-122">Som del av förbättringarna av funktionerna för bokföring av utdrag har tre nya parametrar införts på snabbfliken **utdrag** på fliken **bokföring** på sidan **Commerce-parametrar**:</span><span class="sxs-lookup"><span data-stu-id="c1135-122">As part of the improvements to the statement posting feature, three new parameters have been introduced on the **Statement** FastTab on the **Posting** tab of the **Commerce parameters** page:</span></span>

- <span data-ttu-id="c1135-123">**Inaktivera rensning av utdrag** – det här alternativet gäller endast för äldre funktioner för bokföring av utdrag.</span><span class="sxs-lookup"><span data-stu-id="c1135-123">**Disable clear statement** – This option is applicable only for the legacy statement posting feature.</span></span> <span data-ttu-id="c1135-124">Vi rekommenderar att du ställer in detta alternativ till **Nej** att förhindra att användare rensar rapporter som har statusen delvis bokförda.</span><span class="sxs-lookup"><span data-stu-id="c1135-124">We recommend that you set this option to **No** to prevent users from clearing statements that are in a semi-posted state.</span></span> <span data-ttu-id="c1135-125">Om utdrag som är delvis bokförda rensas kommer data att skadas.</span><span class="sxs-lookup"><span data-stu-id="c1135-125">If statements that are in a semi-posted state are cleared, data becomes corrupted.</span></span> <span data-ttu-id="c1135-126">Du bör endast ange detta alternativ till **Ja** i undantagsfall.</span><span class="sxs-lookup"><span data-stu-id="c1135-126">You should set this option to **Yes** only in exceptional circumstances.</span></span>
- <span data-ttu-id="c1135-127">**Reservera lager vid beräkning** – Vi rekommenderar att du använder batchjobbet **Bokför lager** för reservation av lager och du ställer in detta alternativ till **Nej**.</span><span class="sxs-lookup"><span data-stu-id="c1135-127">**Reserve inventory during calculation** – We recommend that you use the **Post inventory** batch job for inventory reservation, and that you set this option to **No**.</span></span> <span data-ttu-id="c1135-128">När det här alternativet är inställt på **Nej**, kommer funktionen för förbättrad bokföring av utdrag inte att försöka skapa lagerreservationstransaktioner vid tidpunkten för beräkningen (om transaktionerna inte redan har skapats via batchjobbet **Bokför lager**).</span><span class="sxs-lookup"><span data-stu-id="c1135-128">When this option is set to **No**, the improved statement posting feature doesn't try to create inventory reservation entries at the time of calculation (if entries weren't already created through the **Post inventory** batch job).</span></span> <span data-ttu-id="c1135-129">Funktionen skapar i stället lagerreservationstransaktioner endast vid bokföringstidpunkten.</span><span class="sxs-lookup"><span data-stu-id="c1135-129">Instead, the feature creates inventory reservation entries only at the time of posting.</span></span> <span data-ttu-id="c1135-130">Den här implementeringen var ett designval och är baserat på att tidsfönstret mellan beräkningsprocessen och bokföringsprocessen vanligtvis är litet.</span><span class="sxs-lookup"><span data-stu-id="c1135-130">This implementation was a design choice and was based on the fact that the time window between the calculation process and the posting process is typically small.</span></span> <span data-ttu-id="c1135-131">Om du vill reservera lager vid tidpunkten för beräkningen kan du ställa in detta alternativ till **Ja**.</span><span class="sxs-lookup"><span data-stu-id="c1135-131">However, if you want to reserve inventory at the time of calculation, you can set this option to **Yes**.</span></span>

    <span data-ttu-id="c1135-132">Den äldre funktionen för bokföring av utdrag reserverar alltid lager under beräkningsprocessen för utdrag (om du inte redan har gjort reservationen via batchjobbet **Bokför lager**), oavsett inställningen av detta alternativ.</span><span class="sxs-lookup"><span data-stu-id="c1135-132">The legacy statement posting feature always reserves inventory during the statement calculation process (if reservation wasn't already done through the **Post inventory** batch job), regardless of the setting of this option.</span></span>

- <span data-ttu-id="c1135-133">**Inaktivera att inventering krävs** – när det här alternativet ställs in på **Ja**, fortsätter bokföringsprocessen för ett utdrag, även om skillnaden mellan det beräknade beloppet och transaktionsbeloppet för utdraget är utanför det tröskelvärde som är definieras på snabbfliken **Utdrag** för butiker.</span><span class="sxs-lookup"><span data-stu-id="c1135-133">**Disable counting required** – When this option is set to **Yes**, the posting process for a statement continues, even if the difference between the counted amount and the transaction amount on the statement is outside the threshold that is defined on the **Statement** FastTab for stores.</span></span>

<span data-ttu-id="c1135-134">Dessutom har följande parametrar införts på snabbfliken **gruppbearbetning** på fliken **bokföring** på sidan för **Commerce-parametrar**:</span><span class="sxs-lookup"><span data-stu-id="c1135-134">Additionally, the following parameters have been introduced on the **Batch processing** FastTab on the **Posting** tab of the **Commerce parameters** page:</span></span> 

- <span data-ttu-id="c1135-135">**Maximalt antal parallella utdragsbokföringar** – det här fältet definierar antalet batchjobb som ska användas för att bokföra flera utdrag.</span><span class="sxs-lookup"><span data-stu-id="c1135-135">**Maximum number of parallel statement posting** – This field defines the number of batch tasks that will be used to post multiple statements.</span></span> 
- <span data-ttu-id="c1135-136">**Max. tråd för orderbearbetning per utdrag** – det här fältet representerar det högsta antalet trådar som används av batch-jobbet utdragsbokföring för att skapa och fakturera försäljningsorder för ett enda utdrag.</span><span class="sxs-lookup"><span data-stu-id="c1135-136">**Max thread for order processing per statement** – This field represents the maximum number of threads used by the statement posting batch job to create and invoice sales orders for a single statement.</span></span> <span data-ttu-id="c1135-137">Det totala antalet trådar som kommer att användas av utdragsbokföringsprocessen beräknas utifrån värdet i den här parametern multiplicerat med värdet i parametern **Maximalt antal parallella utdragsbokföringar**.</span><span class="sxs-lookup"><span data-stu-id="c1135-137">The total number of threads that will be used by the statement posting process will be computed based on the value in this parameter multiplied by the value in the **Maximum number of parallel statement posting** parameter.</span></span> <span data-ttu-id="c1135-138">Om du anger värdet för den här parametern för högt kan prestandan i bokföringsprocessen för utdraget påverkas negativt.</span><span class="sxs-lookup"><span data-stu-id="c1135-138">Setting the value of this parameter too high can negatively impact the performance of the statement posting process.</span></span>
- <span data-ttu-id="c1135-139">**Max. transaktionsrader inkluderade i sammansättning** – det här fältet definierar antalet transaktionsrader som ska inkluderas i en samlad transaktion innan en ny skapas.</span><span class="sxs-lookup"><span data-stu-id="c1135-139">**Max transaction lines included in aggregation** – This field defines the number of transaction lines that will be included in a single aggregated transaction before a new one is created.</span></span> <span data-ttu-id="c1135-140">Aggregerade transaktioner skapas utifrån olika sammansättningskriterier, t.ex. kund, affärsdatum eller ekonomiska dimensioner.</span><span class="sxs-lookup"><span data-stu-id="c1135-140">Aggregated transactions are created based on different aggregation criteria such as customer, business date, or financial dimensions.</span></span> <span data-ttu-id="c1135-141">Det är viktigt att notera att raderna från en enda transaktion inte delas mellan olika sammansättningstransaktioner.</span><span class="sxs-lookup"><span data-stu-id="c1135-141">It is important to note that the lines from a single transaction will not be split across different aggregated transactions.</span></span> <span data-ttu-id="c1135-142">Detta innebär att det finns en risk för att antalet rader i en sammansättningstransaktion är något högre eller lägre baserat på faktorer som antal specifika produkter.</span><span class="sxs-lookup"><span data-stu-id="c1135-142">This means that there is a possibility that the number of lines in a aggregated transaction is slightly higher or lower based on factors such as number of distinct products.</span></span>
- <span data-ttu-id="c1135-143">**Maximalt antal trådar för validering av butikstransaktioner** – det här fältet definierar antalet trådar som ska användas för att validera transaktioner.</span><span class="sxs-lookup"><span data-stu-id="c1135-143">**Maximum number of threads to validate store transactions** – This field defines the number of threads that will be used to validate transactions.</span></span> <span data-ttu-id="c1135-144">Validering av transaktioner är ett obligatoriskt steg som måste inträffa innan transaktionerna kan hämtas till kontoutdrag.</span><span class="sxs-lookup"><span data-stu-id="c1135-144">Validating transactions is a required step that needs to occur before the transactions can be pulled into the statements.</span></span> <span data-ttu-id="c1135-145">Du måste definiera en **Presentkortsprodukt** på snabbfliken **presentkort** på fliken **bokföring** på sidan **Commerce-parametrar**.</span><span class="sxs-lookup"><span data-stu-id="c1135-145">You also need to define a **Gift card product** on the **Gift card** FastTab on the **Posting** tab of the **Commerce parameters** page.</span></span> <span data-ttu-id="c1135-146">Detta måste definieras även om inga presentkort används i organisationen.</span><span class="sxs-lookup"><span data-stu-id="c1135-146">This needs to defined even if gift cards are not used by the organization.</span></span>

> [!NOTE]
> <span data-ttu-id="c1135-147">Alla inställningar och parametrar som relateras till bokföring av utdrag och som definieras i butiker och på sidan **Commerce-parametrar**, gäller för den förbättrade funktionen för bokföring av utdrag.</span><span class="sxs-lookup"><span data-stu-id="c1135-147">All settings and parameters that are related to statement postings, and that are defined on stores and on the **Commerce parameters** page, are applicable to the improved statement posting feature.</span></span>

## <a name="processing"></a><span data-ttu-id="c1135-148">Bearbetning</span><span class="sxs-lookup"><span data-stu-id="c1135-148">Processing</span></span>

<span data-ttu-id="c1135-149">Utdrag kan beräknas och bokföras i en batch med hjälp av menyalternativeet **Beräkna utdrag i batch** och **Bokför utdrag i batch**.</span><span class="sxs-lookup"><span data-stu-id="c1135-149">Statements can be calculated and posted in batch using the menu items **Calculate statements in batch** and **Post statements in batch**.</span></span> <span data-ttu-id="c1135-150">Alternativt kan utdrag beräknas och bokföras manuellt med hjälp av menyalternativet **Utdrag** som innehåller den förbättrade funktionen för bokföring av utdrag.</span><span class="sxs-lookup"><span data-stu-id="c1135-150">Alternatively, statements can be manually calculated and posted by using the **Statements** menu item that the improved statement posting feature provides.</span></span>

<span data-ttu-id="c1135-151">Processen och stegen för beräkning och bokföring av utdrag i en batch är desamma som i den äldre funktionen för bokföring av utdrag.</span><span class="sxs-lookup"><span data-stu-id="c1135-151">The process and steps for calculating and posting statements in a batch are the same as they were in the legacy statement posting feature.</span></span> <span data-ttu-id="c1135-152">Dock har viktiga förbättringar gjorts i den huvudsakliga interna behandlingen av utdragen.</span><span class="sxs-lookup"><span data-stu-id="c1135-152">However, significant improvements have been made in the core back-end processing of the statements.</span></span> <span data-ttu-id="c1135-153">Dessa förbättringar gör processen mer flexibel och ger bättre insyn i tillstånden och felinformation.</span><span class="sxs-lookup"><span data-stu-id="c1135-153">These improvements make the process more resilient, and provide for better visibility into the states and error information.</span></span> <span data-ttu-id="c1135-154">Därför kan användarna adressera orsaken till fel och sedan fortsätta bokföringssprocessen utan att orsaka datakorruption och utan att det krävs datakorrigeringar.</span><span class="sxs-lookup"><span data-stu-id="c1135-154">Therefore, users can address the root cause of errors and then continue the posting process without causing data corruption and without causing data fixes to be required.</span></span>

<span data-ttu-id="c1135-155">I följande avsnitt beskrivs några viktiga förbättringar för utdragsbokföring som visas i användargränssnittet för utdrag och bokförda utdrag.</span><span class="sxs-lookup"><span data-stu-id="c1135-155">The following sections describe some of the major improvements for the statement posting feature that appear in the user interface for statements and posted statements.</span></span>

### <a name="status-details"></a><span data-ttu-id="c1135-156">Statusinformation</span><span class="sxs-lookup"><span data-stu-id="c1135-156">Status details</span></span>

<span data-ttu-id="c1135-157">En ny tillståndsmodell har introducerats i metoden för bokföring av utdrag genom beräknings- och bokföringsprocesser.</span><span class="sxs-lookup"><span data-stu-id="c1135-157">A new state model has been introduced in the statement posting routine across the calculation and posting processes.</span></span>

<span data-ttu-id="c1135-158">I följande tabell beskrivs de olika tillstånden och deras ordning under beräkningsprocessen.</span><span class="sxs-lookup"><span data-stu-id="c1135-158">The following table describes the various states and their order during the calculation process.</span></span>

| <span data-ttu-id="c1135-159">Tillstånd order</span><span class="sxs-lookup"><span data-stu-id="c1135-159">State order</span></span> | <span data-ttu-id="c1135-160">Stat</span><span class="sxs-lookup"><span data-stu-id="c1135-160">State</span></span>      | <span data-ttu-id="c1135-161">beskrivning</span><span class="sxs-lookup"><span data-stu-id="c1135-161">Description</span></span> |
|-------------|------------|-------------|
| <span data-ttu-id="c1135-162">1</span><span class="sxs-lookup"><span data-stu-id="c1135-162">1</span></span>           | <span data-ttu-id="c1135-163">Startat</span><span class="sxs-lookup"><span data-stu-id="c1135-163">Started</span></span>    | <span data-ttu-id="c1135-164">Utdraget har skapats och är redo att beräknas.</span><span class="sxs-lookup"><span data-stu-id="c1135-164">The statement was created and is ready to be calculated.</span></span> |
| <span data-ttu-id="c1135-165">2</span><span class="sxs-lookup"><span data-stu-id="c1135-165">2</span></span>           | <span data-ttu-id="c1135-166">Markerade</span><span class="sxs-lookup"><span data-stu-id="c1135-166">Marked</span></span>     | <span data-ttu-id="c1135-167">De transaktioner som finns inom räckvidd för utdraget identifieras baserat på utdragsparametrarna och de är märkta med utdrags-ID.</span><span class="sxs-lookup"><span data-stu-id="c1135-167">The transactions that are in scope for the statement are identified based on the statement parameters, and they are marked with the statement ID.</span></span> |
| <span data-ttu-id="c1135-168">3</span><span class="sxs-lookup"><span data-stu-id="c1135-168">3</span></span>           | <span data-ttu-id="c1135-169">Beräknat</span><span class="sxs-lookup"><span data-stu-id="c1135-169">Calculated</span></span> | <span data-ttu-id="c1135-170">Utdragsraderna beräknas och visas.</span><span class="sxs-lookup"><span data-stu-id="c1135-170">The statement lines are computed and shown.</span></span> |

<span data-ttu-id="c1135-171">I följande tabell beskrivs de olika tillstånden och deras ordning under bokföringsprocessen.</span><span class="sxs-lookup"><span data-stu-id="c1135-171">The following table describes the various states and their order during the posting process.</span></span>

| <span data-ttu-id="c1135-172">Tillstånd order</span><span class="sxs-lookup"><span data-stu-id="c1135-172">State order</span></span> | <span data-ttu-id="c1135-173">Stat</span><span class="sxs-lookup"><span data-stu-id="c1135-173">State</span></span>                   | <span data-ttu-id="c1135-174">beskrivning</span><span class="sxs-lookup"><span data-stu-id="c1135-174">Description</span></span> |
|-------------|-------------------------|-------------|
| <span data-ttu-id="c1135-175">1</span><span class="sxs-lookup"><span data-stu-id="c1135-175">1</span></span>           | <span data-ttu-id="c1135-176">Kontrollerad</span><span class="sxs-lookup"><span data-stu-id="c1135-176">Checked</span></span>                 | <span data-ttu-id="c1135-177">Flera valideringar görs som hör till parametrar (till exempel dispositionsavgift) och till utdraget och utdragsraderna (till exempel skillnaden mellan det beräknade beloppet och transaktionsbeloppet).</span><span class="sxs-lookup"><span data-stu-id="c1135-177">Multiple validations are done that are related to parameters (for example, the disposition charge), and to the statement and statement lines (for example, the difference between the counted amount and the transaction amount).</span></span> |
| <span data-ttu-id="c1135-178">2</span><span class="sxs-lookup"><span data-stu-id="c1135-178">2</span></span>           | <span data-ttu-id="c1135-179">Sammansatt</span><span class="sxs-lookup"><span data-stu-id="c1135-179">Aggregated</span></span>              | <span data-ttu-id="c1135-180">Försäljningstransaktioner för namngivna och icke namngivna kunder sammanställs baserat på konfigurationen.</span><span class="sxs-lookup"><span data-stu-id="c1135-180">Sales transactions for named and unnamed customers are aggregated based on the configuration.</span></span> <span data-ttu-id="c1135-181">Varje aggregerad transaktion konverteras slutligen till en försäljningsorder.</span><span class="sxs-lookup"><span data-stu-id="c1135-181">Every aggregated transaction is eventually converted to a sales order.</span></span> |
| <span data-ttu-id="c1135-182">3</span><span class="sxs-lookup"><span data-stu-id="c1135-182">3</span></span>           | <span data-ttu-id="c1135-183">Kundorder skapas</span><span class="sxs-lookup"><span data-stu-id="c1135-183">Customer order created</span></span>  | <span data-ttu-id="c1135-184">Utifrån den sammanlagda transaktionen skapas försäljningsorder i systemet.</span><span class="sxs-lookup"><span data-stu-id="c1135-184">Based on the aggregated transaction, sales orders are created in the system.</span></span> |
| <span data-ttu-id="c1135-185">4</span><span class="sxs-lookup"><span data-stu-id="c1135-185">4</span></span>           | <span data-ttu-id="c1135-186">Fakturerad kundorder</span><span class="sxs-lookup"><span data-stu-id="c1135-186">Customer order invoiced</span></span> | <span data-ttu-id="c1135-187">Försäljningsorder faktureras</span><span class="sxs-lookup"><span data-stu-id="c1135-187">Sales orders are invoiced.</span></span> |
| <span data-ttu-id="c1135-188">5</span><span class="sxs-lookup"><span data-stu-id="c1135-188">5</span></span>           | <span data-ttu-id="c1135-189">Bokförda rabatter</span><span class="sxs-lookup"><span data-stu-id="c1135-189">Discounts posted</span></span>        | <span data-ttu-id="c1135-190">Tidsbegränsade rabattjournaler bokförs utifrån konfigurationen.</span><span class="sxs-lookup"><span data-stu-id="c1135-190">Periodic discount journals are posted based on the configuration.</span></span> |
| <span data-ttu-id="c1135-191">6</span><span class="sxs-lookup"><span data-stu-id="c1135-191">6</span></span>           | <span data-ttu-id="c1135-192">Bokförd intäkt/utgift</span><span class="sxs-lookup"><span data-stu-id="c1135-192">Income/expense posted</span></span>   | <span data-ttu-id="c1135-193">Intäkts-/utgiftstransaktioner bokförs som verifikationer.</span><span class="sxs-lookup"><span data-stu-id="c1135-193">Income/expense transactions are posted as vouchers.</span></span> |
| <span data-ttu-id="c1135-194">7</span><span class="sxs-lookup"><span data-stu-id="c1135-194">7</span></span>           | <span data-ttu-id="c1135-195">Länkade verifikationer</span><span class="sxs-lookup"><span data-stu-id="c1135-195">Vouchers linked</span></span>         | <span data-ttu-id="c1135-196">Betalningsjournaler skapas och kopplas till motsvarande faktura.</span><span class="sxs-lookup"><span data-stu-id="c1135-196">Payment journals are created and linked to the corresponding invoice.</span></span> |
| <span data-ttu-id="c1135-197">8</span><span class="sxs-lookup"><span data-stu-id="c1135-197">8</span></span>           | <span data-ttu-id="c1135-198">Bokförda betalningar</span><span class="sxs-lookup"><span data-stu-id="c1135-198">Payments posted</span></span>         | <span data-ttu-id="c1135-199">Betalningsjournaler bokförs.</span><span class="sxs-lookup"><span data-stu-id="c1135-199">Payment journals are posted.</span></span> |
| <span data-ttu-id="c1135-200">9</span><span class="sxs-lookup"><span data-stu-id="c1135-200">9</span></span>           | <span data-ttu-id="c1135-201">Bokförda presentkort</span><span class="sxs-lookup"><span data-stu-id="c1135-201">Gift cards posted</span></span>       | <span data-ttu-id="c1135-202">Presentkortstransaktioner bokförs som verifikationer.</span><span class="sxs-lookup"><span data-stu-id="c1135-202">Gift card transactions are posted as vouchers.</span></span> |
| <span data-ttu-id="c1135-203">10</span><span class="sxs-lookup"><span data-stu-id="c1135-203">10</span></span>          | <span data-ttu-id="c1135-204">Publicerat</span><span class="sxs-lookup"><span data-stu-id="c1135-204">Posted</span></span>                  | <span data-ttu-id="c1135-205">Utdraget markeras som bokfört.</span><span class="sxs-lookup"><span data-stu-id="c1135-205">The statement is marked as posted.</span></span> |

<span data-ttu-id="c1135-206">Alla tillstånden i föregående tabell är av oberoende karaktär och hierarkiska beroenden skapas mellan tillstånden.</span><span class="sxs-lookup"><span data-stu-id="c1135-206">Every state in the preceding tables is independent in nature, and a hierarchical dependency is built between the states.</span></span> <span data-ttu-id="c1135-207">Detta beroende flödas uppifrån och ned.</span><span class="sxs-lookup"><span data-stu-id="c1135-207">This dependency flows from top to bottom.</span></span> <span data-ttu-id="c1135-208">Om systemet stöter på ett fel när det bearbetar ett tillstånd, återställs status för utdraget till föregående tillstånd.</span><span class="sxs-lookup"><span data-stu-id="c1135-208">If the system encounters any errors while it's processing a state, the status of the statement is reverted to the previous state.</span></span> <span data-ttu-id="c1135-209">Alla efterföljande återförsök i processen fortsätter från det tillstånd som har misslyckats och fortsätter att gå vidare.</span><span class="sxs-lookup"><span data-stu-id="c1135-209">Any subsequent reattempt of the process resumes from the state that failed and continues to move forward.</span></span> <span data-ttu-id="c1135-210">Den här metoden har följande fördelar:</span><span class="sxs-lookup"><span data-stu-id="c1135-210">This approach has the following benefits:</span></span>

- <span data-ttu-id="c1135-211">Användaren har fullständig överblick över det tillstånd där felet uppstod.</span><span class="sxs-lookup"><span data-stu-id="c1135-211">The user has complete visibility into the state where the error occurred.</span></span>
- <span data-ttu-id="c1135-212">Datafel undviks.</span><span class="sxs-lookup"><span data-stu-id="c1135-212">Data corruption is avoided.</span></span> <span data-ttu-id="c1135-213">Exempelvis i funktionen för bokföring av äldre utdrag fanns exempel där vissa försäljningsorder fakturerades, men andra utelämnades.</span><span class="sxs-lookup"><span data-stu-id="c1135-213">For example, in the legacy statement posting feature, there were instances where some sales orders were invoiced but others were left open.</span></span> <span data-ttu-id="c1135-214">Det fanns även vissa exempel där en del betalningsjournaler inte hade en motsvarande faktura att betalas, eftersom bokföringen av fakturan hade ett fel.</span><span class="sxs-lookup"><span data-stu-id="c1135-214">There were also instances where some payment journals didn't have a corresponding invoice to settle, because the invoice posting had an error.</span></span>
- <span data-ttu-id="c1135-215">Visar aktuell status för ett utdrag med knappen **statusinformation** i gruppen **Information om körning** för utdraget.</span><span class="sxs-lookup"><span data-stu-id="c1135-215">Users can see the current state of a statement by using the **Status details** button in the **Execution details** group of the statement.</span></span> <span data-ttu-id="c1135-216">Informationssidan om tillstånd har tre avsnitt:</span><span class="sxs-lookup"><span data-stu-id="c1135-216">The status details page has three sections:</span></span>

    - <span data-ttu-id="c1135-217">Det första avsnittet visat aktuellt tillstånd för kontoutdrag, tillsammans med felkoden och ett felmeddelande om ett fel uppstod.</span><span class="sxs-lookup"><span data-stu-id="c1135-217">The first section shows the current status of the statement, together with the error code and a detailed error message, if an error occurred.</span></span>
    - <span data-ttu-id="c1135-218">Den andra delen visar de olika lägena i beräkningen.</span><span class="sxs-lookup"><span data-stu-id="c1135-218">The second section shows the various states of the calculation process.</span></span> <span data-ttu-id="c1135-219">Visuella hjälpmedel kan ange tillstånd som har utförts, som inte kunde köras på grund av ett fel, och tillstånd som ännu inte har körts.</span><span class="sxs-lookup"><span data-stu-id="c1135-219">Visual cues indicate states that have been successfully run, states that could not be run because of errors, and states that haven't yet been run.</span></span>
    - <span data-ttu-id="c1135-220">Det tredje avsnittet visar de olika tillstånden i bokföringen.</span><span class="sxs-lookup"><span data-stu-id="c1135-220">The third section shows the various states of the posting process.</span></span> <span data-ttu-id="c1135-221">Visuella hjälpmedel kan ange tillstånd som har utförts, som inte kunde köras på grund av ett fel, och tillstånd som ännu inte har körts.</span><span class="sxs-lookup"><span data-stu-id="c1135-221">Visual cues indicate states that have been successfully run, states that could not be run because of errors, and states that haven't yet been run.</span></span>

<span data-ttu-id="c1135-222">Dessutom visas rubriken i andra och tredje avsnitten övergripande tillstånd för den aktuella processen.</span><span class="sxs-lookup"><span data-stu-id="c1135-222">Additionally, the header of the second and third sections shows the overall status of the relevant process.</span></span>

### <a name="event-logs"></a><span data-ttu-id="c1135-223">Händelseloggar</span><span class="sxs-lookup"><span data-stu-id="c1135-223">Event logs</span></span>

<span data-ttu-id="c1135-224">Ett utdrag genomgår olika operationer (till exempel skapa, beräkna, radera och bokföra) och flera instanser av samma operation kan anropas under utdragets livscykel.</span><span class="sxs-lookup"><span data-stu-id="c1135-224">A statement goes through various operations (for example, Create, Calculate, Clear, and Post), and multiple instances of the same operation might be called during the statement's lifecycle.</span></span> <span data-ttu-id="c1135-225">Exempelvis när ett utdrag skapas och beräknas kan användaren avmarkera utdraget och beräkna det igen.</span><span class="sxs-lookup"><span data-stu-id="c1135-225">For example, after a statement is created and calculated, a user can clear the statement and calculate it again.</span></span> <span data-ttu-id="c1135-226">Knappen **händelseloggar** i gruppen **Information om körning** för utdraget ger en fullständig redovisningsspårning av olika åtgärder som kallas på utdraget sats, tillsammans med information om när dessa åtgärder kallades.</span><span class="sxs-lookup"><span data-stu-id="c1135-226">The **Event logs** button in the **Execution details** group of the statement provides a complete audit trail of the various operations that were called on a statement, together with information about when those operations were called.</span></span>

### <a name="aggregated-transactions"></a><span data-ttu-id="c1135-227">Sammansatta transaktioner</span><span class="sxs-lookup"><span data-stu-id="c1135-227">Aggregated transactions</span></span>

<span data-ttu-id="c1135-228">Under bokföringsprocessen sammanställs försäljningstransaktionerna baserat på konfigurationen.</span><span class="sxs-lookup"><span data-stu-id="c1135-228">During the posting process, the sales transactions are aggregated based on the configuration.</span></span> <span data-ttu-id="c1135-229">Dessa sammanlagda transaktioner lagras i systemet och används till att skapa försäljningsorder.</span><span class="sxs-lookup"><span data-stu-id="c1135-229">These aggregated transactions are stored in the system and used to create sales orders.</span></span> <span data-ttu-id="c1135-230">Varje sammanlagd transaktion skapar en motsvarande försäljningsorder i systemet.</span><span class="sxs-lookup"><span data-stu-id="c1135-230">Every aggregated transaction creates one corresponding sales order in the system.</span></span> <span data-ttu-id="c1135-231">Du kan visa sammanlagd transaktion med knappen **sammanlagda transaktioner** i gruppen **Information om körning** för utdraget.</span><span class="sxs-lookup"><span data-stu-id="c1135-231">You can view the aggregated transactions by using the **Aggregated transactions** button in the **Execution details** group of the statement.</span></span>

<span data-ttu-id="c1135-232">Fliken **detaljer för försäljningsorder** för en sammanlagd transaktionen visar följande information:</span><span class="sxs-lookup"><span data-stu-id="c1135-232">The **Sales order detail** tab of an aggregated transaction shows the following information:</span></span>

- <span data-ttu-id="c1135-233">**Post-ID** – ID för sammanlagda transaktionen.</span><span class="sxs-lookup"><span data-stu-id="c1135-233">**Record ID** – The ID of the aggregated transaction.</span></span>
- <span data-ttu-id="c1135-234">**Utdragsnummer** – utdraget som den sammanlagda transaktionen tillhör.</span><span class="sxs-lookup"><span data-stu-id="c1135-234">**Statement number** – The statement that the aggregated transaction belongs to.</span></span>
- <span data-ttu-id="c1135-235">**Datum** – Datumet när den sammanlagda transaktionen skapades.</span><span class="sxs-lookup"><span data-stu-id="c1135-235">**Date** – The date when the aggregated transaction was created.</span></span>
- <span data-ttu-id="c1135-236">**Försäljnings-ID** – när en försäljningsorder skapas från den sammanlagda transaktionen , försäljningsorder-ID.</span><span class="sxs-lookup"><span data-stu-id="c1135-236">**Sales ID** – When a sales order is created from the aggregated transaction, the sales order ID.</span></span> <span data-ttu-id="c1135-237">Om fältet är tomt kommer har motsvarande försäljningsorder inte ha skapats.</span><span class="sxs-lookup"><span data-stu-id="c1135-237">If this field is blank, the corresponding sales order hasn't been created.</span></span>
- <span data-ttu-id="c1135-238">**Antal sammanlagda rader** – det totala antalet rader för försäljningsordern och sammanlagda transaktionen.</span><span class="sxs-lookup"><span data-stu-id="c1135-238">**Number of aggregated lines** – The total number of lines for the aggregated transaction and sales order.</span></span>
- <span data-ttu-id="c1135-239">**Status** – sista status för sammanlagda transaktionen.</span><span class="sxs-lookup"><span data-stu-id="c1135-239">**Status** – The last status of the aggregated transaction.</span></span>
- <span data-ttu-id="c1135-240">**Faktura-ID** – när försäljningsordern för sammanlagda transaktionen faktureras, försäljningsfaktura ID.</span><span class="sxs-lookup"><span data-stu-id="c1135-240">**Invoice ID** – When the sales order for the aggregated transaction is invoiced, the sales invoice ID.</span></span> <span data-ttu-id="c1135-241">Om fältet är tomt kommer har fakturan för försäljningsorder inte bokförts.</span><span class="sxs-lookup"><span data-stu-id="c1135-241">If this field is blank, the invoice for the sales order hasn't been posted.</span></span>

<span data-ttu-id="c1135-242">Fliken **transaktionsdetaljer** på en sammanlagd transaktion visar alla transaktioner som tagits emot i sammanlagda transaktionen.</span><span class="sxs-lookup"><span data-stu-id="c1135-242">The **Transaction details** tab of an aggregated transaction shows all the transactions that have been pulled into the aggregated transaction.</span></span> <span data-ttu-id="c1135-243">De sammanlagda raderna på den sammanlagda transaktionen visar alla sammanlagda posterna från transaktioner.</span><span class="sxs-lookup"><span data-stu-id="c1135-243">The aggregated lines on the aggregated transaction show all the aggregated records from the transactions.</span></span> <span data-ttu-id="c1135-244">De sammanlagda raderna visar också information om artikel, variant, kvantitet, pris, nettobelopp, enhet och lagerställe.</span><span class="sxs-lookup"><span data-stu-id="c1135-244">The aggregated lines also show details such as the item, variant, quantity, price, net amount, unit, and warehouse.</span></span> <span data-ttu-id="c1135-245">I princip motsvarar varje sammanlagd rad en försäljningsorderrad.</span><span class="sxs-lookup"><span data-stu-id="c1135-245">Basically, each aggregated line corresponds to one sales order line.</span></span>

<span data-ttu-id="c1135-246">Från sidan **sammanlagda transaktioner** kan du hämta XML för en viss sammanlagd transaktion med knappen **exportera försäljningsorder-XLM**.</span><span class="sxs-lookup"><span data-stu-id="c1135-246">From the **Aggregated transactions** page, you can download the XML for a specific aggregated transaction by using the **Export sales order XML** button.</span></span> <span data-ttu-id="c1135-247">Du kan använda XML för att felsöka problem som rör upprättande av försäljningsorder och bokföring.</span><span class="sxs-lookup"><span data-stu-id="c1135-247">You can use the XML to debug issues that involve sales order creation and posting.</span></span> <span data-ttu-id="c1135-248">Bara hämta XML, överför den till en testmiljö och felsök problem i testmiljön.</span><span class="sxs-lookup"><span data-stu-id="c1135-248">Just download the XML, upload it to a test environment, and debug the issue in the test environment.</span></span> <span data-ttu-id="c1135-249">Funktionen för att hämta XML för sammanlagda transaktioner är inte tillgänglig för utdrag som har bokförts.</span><span class="sxs-lookup"><span data-stu-id="c1135-249">The functionality for downloading the XML for aggregated transactions isn't available for statements that have been posted.</span></span>

<span data-ttu-id="c1135-250">Vyn sammanlagd transaktion ger följande fördelar:</span><span class="sxs-lookup"><span data-stu-id="c1135-250">The aggregated transaction view provides the following benefits:</span></span>

- <span data-ttu-id="c1135-251">Användaren har insyn i sammanlagda transaktioner som misslyckades vid upprättande av försäljningsorder och försäljningsorder som misslyckades vid fakturering.</span><span class="sxs-lookup"><span data-stu-id="c1135-251">The user has visibility into the aggregated transactions that failed during sales order creation and the sales orders that failed during invoicing.</span></span>
- <span data-ttu-id="c1135-252">Användaren har insyn i hur transaktioner slås samman.</span><span class="sxs-lookup"><span data-stu-id="c1135-252">The user has visibility into how transactions are aggregated.</span></span>
- <span data-ttu-id="c1135-253">Användaren har en fullständig redovisningsspårning från transaktioner, försäljningsorder till försäljningsfakturor.</span><span class="sxs-lookup"><span data-stu-id="c1135-253">The user has a complete audit trail, from transactions, to sales orders, to sales invoices.</span></span> <span data-ttu-id="c1135-254">Den här redovisningsspårningen är inte tillgänglig i funktionen för bokföring av äldre utdrag.</span><span class="sxs-lookup"><span data-stu-id="c1135-254">This audit trail wasn't available in the legacy statement posting feature.</span></span>
- <span data-ttu-id="c1135-255">Sammanlagd XML-filen gör det enklare att identifiera problem vid upprättande av försäljningsorder och fakturering.</span><span class="sxs-lookup"><span data-stu-id="c1135-255">Aggregated XML file make it easier to identify issues during sales order creation and invoicing.</span></span>

### <a name="journal-vouchers"></a><span data-ttu-id="c1135-256">Bokföringsorder</span><span class="sxs-lookup"><span data-stu-id="c1135-256">Journal vouchers</span></span>

<span data-ttu-id="c1135-257">Knappen **journalverifikationer** i gruppen **Information om körning** för utdraget visar alla de olika verifikationstransaktioner som skapas för ett utdrag och som rör rabatter, intäkter/kostnader-konton, presentkort kort, osv.</span><span class="sxs-lookup"><span data-stu-id="c1135-257">The **Journal vouchers** button in the **Execution details** group of the statement shows all the various voucher transactions that are created for a statement, and that are related to discounts, income/expense accounts, gift cards, and so on.</span></span>

<span data-ttu-id="c1135-258">Programmet visar för närvarande endast data för bokförda utdrag.</span><span class="sxs-lookup"><span data-stu-id="c1135-258">Currently, the program shows this data only for posted statements.</span></span>

### <a name="payment-journals"></a><span data-ttu-id="c1135-259">Betalningsjournaler</span><span class="sxs-lookup"><span data-stu-id="c1135-259">Payment journals</span></span>

<span data-ttu-id="c1135-260">Knappen **betalningsjournaler** i gruppen **Information om körning** för utdraget visar alla de olika betalningsjournaler som har skapats för ett utdrag.</span><span class="sxs-lookup"><span data-stu-id="c1135-260">The **Payment journals** button in the **Execution details** group of the statement shows all the various payment journals that are created for a statement.</span></span>

<span data-ttu-id="c1135-261">Programmet visar för närvarande endast data för bokförda utdrag.</span><span class="sxs-lookup"><span data-stu-id="c1135-261">Currently, the program shows this data only for posted statements.</span></span>

## <a name="other-improvements"></a><span data-ttu-id="c1135-262">Andra förbättringar</span><span class="sxs-lookup"><span data-stu-id="c1135-262">Other improvements</span></span>

<span data-ttu-id="c1135-263">Andra interna förbättringar som användarna kan se att de har gjorts till funktionen för bokföring av utdrag.</span><span class="sxs-lookup"><span data-stu-id="c1135-263">Other, back-end improvements that users can see have been made to the statement posting feature.</span></span> <span data-ttu-id="c1135-264">Nedan följer några exempel:</span><span class="sxs-lookup"><span data-stu-id="c1135-264">Here are some examples:</span></span>

- <span data-ttu-id="c1135-265">Sammansättning tar inte hänsyn till personal, terminal och skiftenheter.</span><span class="sxs-lookup"><span data-stu-id="c1135-265">The aggregation doesn't consider the staff, terminal, and shift entities.</span></span> <span data-ttu-id="c1135-266">Eftersom det finns färre sammanslagningsparametrar måste färre försäljningsorderrader bearbetas.</span><span class="sxs-lookup"><span data-stu-id="c1135-266">Because there are fewer aggregation parameters, fewer sales order lines must be processed.</span></span>
- <span data-ttu-id="c1135-267">Förekomst av dödläge i transaktionstabeller minskas genom att införa ytterligare tilläggstabeller och genom att göra detta sätta in åtgärder istället för att uppdatera åtgärder i transaktionstabellerna.</span><span class="sxs-lookup"><span data-stu-id="c1135-267">The occurrence of deadlock on transaction tables is reduced by introducing additional extension tables and by doing insert operations instead of update operations on the transaction tables.</span></span>
- <span data-ttu-id="c1135-268">Antal batchuppgifter som kör är parameterstyrda och begränsade.</span><span class="sxs-lookup"><span data-stu-id="c1135-268">The number of running batch tasks has been parameterized and limited.</span></span> <span data-ttu-id="c1135-269">Detta nummer kan därför vara anpassat till en kunds miljö.</span><span class="sxs-lookup"><span data-stu-id="c1135-269">Therefore, this number can be fine-tuned specifically to a customer's environment.</span></span> <span data-ttu-id="c1135-270">Ett obegränsat antal batchuppgifter skapades i funktionen för bokföring av äldre utdrag samtidigt.</span><span class="sxs-lookup"><span data-stu-id="c1135-270">In the legacy statement posting feature, an unlimited number of batch tasks was created at the same time.</span></span> <span data-ttu-id="c1135-271">Resultatet var svårhanterligt belastning, overhead och flaskhalsar i batchservern.</span><span class="sxs-lookup"><span data-stu-id="c1135-271">The results were unmanageable loads, overhead, and bottlenecks on the batch server.</span></span>
- <span data-ttu-id="c1135-272">Rapporterna köas effektivt för bearbetning genom att prioritera utdrag som har det maximala antalet transaktioner.</span><span class="sxs-lookup"><span data-stu-id="c1135-272">Statements are efficiently queued for processing by prioritizing the statements that have the maximum number of transactions.</span></span>
- <span data-ttu-id="c1135-273">Batchprocesser såsom **beräkna utdrag i batch** och **Bokför utdrag i batch** körs bara i batchläge.</span><span class="sxs-lookup"><span data-stu-id="c1135-273">Batch processes such as **Calculate statements in batch** and **Post statements in batch** are run only in batch mode.</span></span> <span data-ttu-id="c1135-274">I funktionen för bokföring av äldre utdrag kan du välja att dessa batchprocesser körs i interaktivt läge som är enkeltrådig till skillnad från batchprocesser som är flertrådade.</span><span class="sxs-lookup"><span data-stu-id="c1135-274">In the legacy statement posting feature, users could choose to run these batch processes in an interactive mode which is s single threaded operation unlike batch processes which are multi-threaded.</span></span>
- <span data-ttu-id="c1135-275">I funktionen för bokföring av äldre utdrag ger ett fel i en batchuppgift feltillstånd i hela batchjobbet.</span><span class="sxs-lookup"><span data-stu-id="c1135-275">In the legacy statement posting feature, any failure of a batch task put the whole batch job in an error state.</span></span> <span data-ttu-id="c1135-276">I den förbättrade funktionen gör inte ett fel i en batchuppgift att hela batchjobbet hamnar i feltillstånd om andra batchuppgifter har slutförts.</span><span class="sxs-lookup"><span data-stu-id="c1135-276">In the improved feature, batch task failures don't put the batch job in an error state if other batch tasks are successfully completed.</span></span> <span data-ttu-id="c1135-277">Du bör ta reda på bokföringsstatus för en batchkörning som körs med hjälp av sidan **Utdrag** där du kan visa alla utdrag som inte bokförts på grund av fel.</span><span class="sxs-lookup"><span data-stu-id="c1135-277">You should assess the posting status for a batch execution run by using the **Statements** page, where you can see any statements that weren't posted because of errors.</span></span>
- <span data-ttu-id="c1135-278">I funktionen för bokföring av äldre utdrag gör den första förekomsten av ett fel att hela batchen misslyckas.</span><span class="sxs-lookup"><span data-stu-id="c1135-278">In the legacy statement posting feature, the first occurrence of a statement failure causes the whole batch to fail.</span></span> <span data-ttu-id="c1135-279">De återstående utdragen bearbetas inte.</span><span class="sxs-lookup"><span data-stu-id="c1135-279">The remaining statements aren't processed.</span></span> <span data-ttu-id="c1135-280">I den förbättrade funktionen fortsätter batchprocessen att bearbeta alla utdrag, även om en del av utdraget misslyckas.</span><span class="sxs-lookup"><span data-stu-id="c1135-280">In the improved feature, the batch process continues to process all statements, even if some of the statements fail.</span></span> <span data-ttu-id="c1135-281">En fördel är att användare får insyn i hur många utdrag som innehåller fel.</span><span class="sxs-lookup"><span data-stu-id="c1135-281">One benefit is that users gain visibility into the exact number of statements that have errors.</span></span> <span data-ttu-id="c1135-282">Därför behöver användare inte fastna i en kontinuerlig slinga med att rätta till fel och köra processen för bokföring av utdrag tills alla utdrag bokförs.</span><span class="sxs-lookup"><span data-stu-id="c1135-282">Therefore, users don't have to be stuck in a continuous loop of fixing the errors and running the post statement process till all statements are posted.</span></span>

## <a name="general-guidance-about-the-statement-posting-process"></a><span data-ttu-id="c1135-283">Allmänna riktlinjer om utdragsbokföringsprocessen</span><span class="sxs-lookup"><span data-stu-id="c1135-283">General guidance about the statement posting process</span></span>

- <span data-ttu-id="c1135-284">Vi rekommenderar att du kör utdragsbokföringsprocessen i en batch eftersom batchen utnyttjar kapaciteten hos batchramverket i flertrådsteknik.</span><span class="sxs-lookup"><span data-stu-id="c1135-284">We recommend that you run the statement posting process in a batch, because batch runs take advantage of the power of the batch framework in terms of multithreading.</span></span> <span data-ttu-id="c1135-285">Flertrådsteknik krävs för att hantera stora mängder transaktioner som normalt visas i utdragsbokföring.</span><span class="sxs-lookup"><span data-stu-id="c1135-285">Multithreading is required in order to handle the huge volumes of transactions that are normally seen in statement postings.</span></span>
- <span data-ttu-id="c1135-286">Vi rekommenderar att du aktiverar negativt fysiskt lager i artikelmodellgrupp, så att du får en sömlös bokföring.</span><span class="sxs-lookup"><span data-stu-id="c1135-286">We recommend that you turn on negative physical inventory on the item model group, so that you have a seamless posting experience.</span></span> <span data-ttu-id="c1135-287">I vissa fall kan negativ utdrag inte bokföras om inte finns negativt fysiskt lager.</span><span class="sxs-lookup"><span data-stu-id="c1135-287">In some scenarios, negative statements might not be able to be posted unless there is negative physical inventory.</span></span> <span data-ttu-id="c1135-288">Exempelvis ska det i teorin om det bara finns en enhet av en artikel i lager och det har skett en försäljningstransaktion och en returtransaktion för artikeln, ska transaktionen kunna bokföras även om negativt lager inte är aktiverad.</span><span class="sxs-lookup"><span data-stu-id="c1135-288">For example, in theory, if there is only one unit of an item in inventory, and there have been a sales transaction and a return transaction for the item, the transaction should be able to be posted even if negative inventory isn't turned on.</span></span> <span data-ttu-id="c1135-289">Men eftersom utdragsbokföringsprocessen hämtar både försäljningstransaktionen och returtransaktionen i en enda kundorder, finns det ingen garanti för att försäljningsraden bokförs först, följt av returraden.</span><span class="sxs-lookup"><span data-stu-id="c1135-289">However, because the statement posting process pulls both the sales transaction and the return transaction in a single customer order, there is no guarantee that the sales line will be posted first, followed by the return line.</span></span> <span data-ttu-id="c1135-290">Därför kan det uppstå fel.</span><span class="sxs-lookup"><span data-stu-id="c1135-290">Therefore, errors can occur.</span></span> <span data-ttu-id="c1135-291">Om negativt lager är aktiverat i det här scenariot påverkas inte transaktionsbokföringen negativt och systemet avspeglar korrekt lagret.</span><span class="sxs-lookup"><span data-stu-id="c1135-291">If negative inventory is turned on in this scenario, the transaction posting isn't negatively affected, and the system will correctly reflect the inventory.</span></span>
- <span data-ttu-id="c1135-292">Vi rekommenderar att du använder sammanslagning när du beräknar och bokför utdrag.</span><span class="sxs-lookup"><span data-stu-id="c1135-292">We recommend that you use aggregation while you calculate and post statements.</span></span> <span data-ttu-id="c1135-293">Följande inställningar rekommenderas därför för vissa sammanslagningsparametrar.</span><span class="sxs-lookup"><span data-stu-id="c1135-293">Therefore, the following settings are recommended for some of the aggregation parameters:</span></span>

    - <span data-ttu-id="c1135-294">Öppna **Retail och Commerce** \> **Administrationsinställning** \> **Parametrar** \> **Commerce-parametrar**.</span><span class="sxs-lookup"><span data-stu-id="c1135-294">Go to **Retail and Commerce** \> **Headquarters setup** \> **Parameters** \> **Commerce parameters**.</span></span> <span data-ttu-id="c1135-295">Klicka sedan på fliken **bokföring** på snabbfliken **lageruppdatering** på fältet **Detaljnivå** och välj **sammanfattning**.</span><span class="sxs-lookup"><span data-stu-id="c1135-295">Then, on the **Posting** tab, on the **Inventory update** FastTab, in the **Detail level** field, select **Summary**.</span></span>
    - <span data-ttu-id="c1135-296">Öppna **Retail och Commerce** \> **Administrationsinställning** \> **Parametrar** \> **Commerce-parametrar**.</span><span class="sxs-lookup"><span data-stu-id="c1135-296">Go to **Retail and Commerce** \> **Headquarters setup** \> **Parameters** \> **Commerce parameters**.</span></span> <span data-ttu-id="c1135-297">Klicka sedan på fliken **bokföring** på snabbfliken **Sammanslagning** och ställ in alternativet **Verifikationstransaktioner** till **Ja**.</span><span class="sxs-lookup"><span data-stu-id="c1135-297">Then, on the **Posting** tab, on the **Aggregation** FastTab, set the **Voucher transactions** option to **Yes**.</span></span>

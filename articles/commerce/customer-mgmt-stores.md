---
title: Kundhantering i butiker
description: Det här avsnittet förklarar hur återförsäljare kan aktivera kundhanteringsfunktioner vid kassan (POS) i Microsoft Dynamics 365 Commerce.
author: josaw1
ms.date: 03/05/2021
ms.topic: article
ms.prod: ''
ms.service: dynamics-365-retail
ms.technology: ''
ms.search.form: RetailOperations
audience: Application User, IT Pro
ms.reviewer: v-chgri
ms.search.region: Global
ms.search.industry: retail
ms.author: shajain
ms.search.validFrom: 2021-01-31
ms.dyn365.ops.version: 10.0.14
ms.openlocfilehash: 46a18d36a389e8a52253c2c3a153e0eae95c0e57
ms.sourcegitcommit: 3cdc42346bb653c13ab33a7142dbb7969f1f6dda
ms.translationtype: HT
ms.contentlocale: sv-SE
ms.lasthandoff: 03/31/2021
ms.locfileid: "5799431"
---
# <a name="customer-management-in-stores"></a><span data-ttu-id="ee42b-103">Kundhantering i butiker</span><span class="sxs-lookup"><span data-stu-id="ee42b-103">Customer management in stores</span></span>

[!include [banner](includes/banner.md)]

<span data-ttu-id="ee42b-104">Det här avsnittet förklarar hur återförsäljare kan aktivera kundhanteringsfunktioner vid kassan (POS) i Microsoft Dynamics 365 Commerce.</span><span class="sxs-lookup"><span data-stu-id="ee42b-104">This topic explains how retailers can enable customer management capabilities at the point of sale (POS) in Microsoft Dynamics 365 Commerce.</span></span>

<span data-ttu-id="ee42b-105">Det är viktigt att butikspersonalen kan skapa och redigera kundposter i kassan.</span><span class="sxs-lookup"><span data-stu-id="ee42b-105">It's important that store associates can create and edit customer records at the POS.</span></span> <span data-ttu-id="ee42b-106">På så sätt kan de samla in uppdateringar av kundinformationen som t.ex. e-postadress, telefonnummer och adress.</span><span class="sxs-lookup"><span data-stu-id="ee42b-106">In that way, they can capture any updates to customer information such as the email address, phone number, and address.</span></span> <span data-ttu-id="ee42b-107">Den här informationen är användbar i andra system, till exempel marknadsföring, eftersom effektiviteten hos dessa system beror på hur korrekta kunddata är.</span><span class="sxs-lookup"><span data-stu-id="ee42b-107">This information is helpful in downstream systems such as marketing, because the effectiveness of those systems depends on the accuracy of their customer data.</span></span>

<span data-ttu-id="ee42b-108">Säljare kan utlösa arbetsflödet för kundskapande från två kassastartpunkter.</span><span class="sxs-lookup"><span data-stu-id="ee42b-108">Sales associates can trigger the customer creation workflow from two POS entry points.</span></span> <span data-ttu-id="ee42b-109">De kan välja en knapp som är mappad till operationen **Lägga till kund** och de kan välja **Skapa kund** i appfältet på sökresultatsidan.</span><span class="sxs-lookup"><span data-stu-id="ee42b-109">They can select a button that is mapped to the **Customer add** operation, or they can select **Create customer** on the app bar on the search results page.</span></span> <span data-ttu-id="ee42b-110">I båda fall visas dialogrutan **Ny kund** där säljföretag kan ange nödvändiga kunduppgifter, såsom kundens namn, e-postadress, telefonnummer, adress och all ytterligare information som är relevant för verksamheten.</span><span class="sxs-lookup"><span data-stu-id="ee42b-110">In both cases, the **New customer** dialog box appears, where sales associates can enter required customer details, such as the customer's name, email address, phone number, address, and any additional information that is relevant to the business.</span></span> <span data-ttu-id="ee42b-111">Att ytterligare information kan fångas in med hjälp av de kundattribut som är associerade med kunden.</span><span class="sxs-lookup"><span data-stu-id="ee42b-111">That additional information can be captured by using the customer attributes that are associated with the customer.</span></span> <span data-ttu-id="ee42b-112">Mer information om kundattribut finns i [Kundattribut](dev-itpro/customer-attributes.md).</span><span class="sxs-lookup"><span data-stu-id="ee42b-112">For more information about customer attributes, see [Customer attributes](dev-itpro/customer-attributes.md).</span></span>

<span data-ttu-id="ee42b-113">Säljare kan också samla in sekundära e-postadresser och telefonnummer.</span><span class="sxs-lookup"><span data-stu-id="ee42b-113">Sales associates can also capture secondary email addresses and phone numbers.</span></span> <span data-ttu-id="ee42b-114">De kan också fånga in kundens önskemål om att ta emot marknadsföringsinformation via någon av de sekundära e-postadresserna eller telefonnummer.</span><span class="sxs-lookup"><span data-stu-id="ee42b-114">Additionally, they can capture the customer's preference about receiving marketing information via any of those secondary email addresses or phone numbers.</span></span> <span data-ttu-id="ee42b-115">För att aktivera denna funktion måste återförsäljare aktivera funktionen **Samla in flera e-postmeddelanden och telefonnummer och godkännande för marknadsföring på dessa kontakter** i arbetsytan **Funktionshantering** i Commerce-administration (**Systemadministration \> Arbetsytor \> Funktionshantering**).</span><span class="sxs-lookup"><span data-stu-id="ee42b-115">To enable this capability, retailers must turn on the **Capture multiple emails and phone numbers and consent for marketing on these contacts** feature in the **Feature management** workspace in Commerce headquarters (**Systems administration \> Workspaces \> Feature management**).</span></span>

## <a name="default-customer-properties"></a><span data-ttu-id="ee42b-116">Standardkundegenskaper</span><span class="sxs-lookup"><span data-stu-id="ee42b-116">Default customer properties</span></span>

<span data-ttu-id="ee42b-117">Detaljhandlare kan använda sidan **Alla butiker** i Commerce-administration (**Retail och Commerce \> Kanaler \> Butiker**) för att associera en standardkund till varje butik.</span><span class="sxs-lookup"><span data-stu-id="ee42b-117">Retailers can use the **All stores** page in Commerce headquarters (**Retail and Commerce \> Channels \> Stores**) to associate a default customer with each store.</span></span> <span data-ttu-id="ee42b-118">I Commerce kopieras sedan de egenskaper som har definierats för standardkunden till alla nya kundposter som skapas.</span><span class="sxs-lookup"><span data-stu-id="ee42b-118">Commerce then copies the properties that are defined for the default customer to all new customer records that are created.</span></span> <span data-ttu-id="ee42b-119">Till exempel visar dialogrutan **Skapa kund** egenskaper som ärvs från standardkunden som är associerad med butiken.</span><span class="sxs-lookup"><span data-stu-id="ee42b-119">For example, the **Create customer** dialog box shows properties that are inherited from the default customer that is associated with the store.</span></span> <span data-ttu-id="ee42b-120">Dessa egenskaper omfattar kundtyp, kundgrupp, kvittoinställning, valuta och språk.</span><span class="sxs-lookup"><span data-stu-id="ee42b-120">Those properties include the customer type, customer group, receipt preference, currency, and language.</span></span> <span data-ttu-id="ee42b-121">Eventuella anknytningar (gruppering av kunder) ärvs också från standardkunden.</span><span class="sxs-lookup"><span data-stu-id="ee42b-121">Any affiliations (groupings of customers) are also inherited from the default customer.</span></span> <span data-ttu-id="ee42b-122">Ekonomiska dimensioner ärvs dock från den kundgrupp som associeras med standardkunden, inte från standardkunden.</span><span class="sxs-lookup"><span data-stu-id="ee42b-122">However, financial dimensions are inherited from the customer group that is associated with the default customer, not from the default customer itself.</span></span>

<span data-ttu-id="ee42b-123">Säljare kan fånga in flera adresser för en kund.</span><span class="sxs-lookup"><span data-stu-id="ee42b-123">Sales associates can capture multiple addresses for a customer.</span></span> <span data-ttu-id="ee42b-124">Kundens namn och telefonnummer ärvs från den kontaktinformation som är kopplad till varje adress.</span><span class="sxs-lookup"><span data-stu-id="ee42b-124">The customer's name and phone number are inherited from the contact information that is associated with each address.</span></span> <span data-ttu-id="ee42b-125">Snabbflikarna **Adresser** för en kundpost innehåller ett fält för **Syfte** som säljarna kan redigera.</span><span class="sxs-lookup"><span data-stu-id="ee42b-125">The **Addresses** FastTab of a customer record includes a **Purpose** field that sales associates can edit.</span></span> <span data-ttu-id="ee42b-126">Om kundtypen är **Person** är standardvärdet **Start**.</span><span class="sxs-lookup"><span data-stu-id="ee42b-126">If the customer type is **Person**, the default value is **Home**.</span></span> <span data-ttu-id="ee42b-127">Om kundtypen är **Organisation** är standardvärdet **Företag**.</span><span class="sxs-lookup"><span data-stu-id="ee42b-127">If the customer type is **Organization**, the default value is **Business**.</span></span> <span data-ttu-id="ee42b-128">Andra värden som det här fältet stöder **Start**, **Kontor** och **Brevlåda**.</span><span class="sxs-lookup"><span data-stu-id="ee42b-128">Other values that this field supports include **Home**, **Office**, and **Post box**.</span></span> <span data-ttu-id="ee42b-129">Värdet i fältet **Land** för en adress ärvs från den primära adressen som anges på sidan **Driftenhet** i Commerce-administration i **Organisationsadministration \> Organisationer \> Driftenheter**.</span><span class="sxs-lookup"><span data-stu-id="ee42b-129">The value of the **Country** field for an address is inherited from the primary address that is specified on the **Operating unit** page in Commerce headquarters at **Organization administration \> Organizations \> Operating units**.</span></span>

## <a name="sync-customers-and-async-customers"></a><span data-ttu-id="ee42b-130">Synkrona och asynkrona kunder</span><span class="sxs-lookup"><span data-stu-id="ee42b-130">Sync customers and Async customers</span></span>

<span data-ttu-id="ee42b-131">I Commerce finns det två sätt att skapa kunder: Synkron (eller Synk) och Asynkron (eller Asynk).</span><span class="sxs-lookup"><span data-stu-id="ee42b-131">In Commerce, there are two modes of customer creation: Synchronous (or Sync) and Asynchronous (or Async).</span></span> <span data-ttu-id="ee42b-132">Kunder skapas som standard synkront.</span><span class="sxs-lookup"><span data-stu-id="ee42b-132">By default, customers are created synchronously.</span></span> <span data-ttu-id="ee42b-133">Med andra ord skapas de i Commerce-administration i realtid.</span><span class="sxs-lookup"><span data-stu-id="ee42b-133">In other words, they are created in Commerce headquarters in real time.</span></span> <span data-ttu-id="ee42b-134">Synkroniseringsläget för kunder är fördelaktigt eftersom nya kunder kan sökas omedelbart över kanaler.</span><span class="sxs-lookup"><span data-stu-id="ee42b-134">The Sync customer creation mode is beneficial because new customers are immediately searchable across channels.</span></span> <span data-ttu-id="ee42b-135">Den har emellertid även ett problem.</span><span class="sxs-lookup"><span data-stu-id="ee42b-135">However, it also has a drawback.</span></span> <span data-ttu-id="ee42b-136">Eftersom det genererar [Commerce Data Exchange: realtidstjänst](dev-itpro/define-retail-channel-communications-cdx.md#realtime-service) anropar till Commerce-administration kan prestanda påverkas om många samtidiga kundsamtal görs.</span><span class="sxs-lookup"><span data-stu-id="ee42b-136">Because it generates [Commerce Data Exchange: Real-time Service](dev-itpro/define-retail-channel-communications-cdx.md#realtime-service) calls to Commerce headquarters, performance can be affected if many concurrent customer creation calls are made.</span></span>

<span data-ttu-id="ee42b-137">Om alternativet **Skapa kund i asynkront läge** anges till **Ja** i butikens funktionsprofil (**Retail och Commerce \> Kanalinställning \> Inställning av online-butik \> Funktionsprofiler**), realtidssamtal används inte för att skapa kundposter i kanaldatabasen.</span><span class="sxs-lookup"><span data-stu-id="ee42b-137">If the **Create customer in async mode** option is set to **Yes** in the store's functionality profile (**Retail and Commerce \> Channel setup \> Online store setup \> Functionality profiles**), Real-time Service calls aren't used to create customer records in the channel database.</span></span> <span data-ttu-id="ee42b-138">Asynkront kundgenereringsläge påverkar inte prestandan i Commerce-administration.</span><span class="sxs-lookup"><span data-stu-id="ee42b-138">The Async customer creation mode doesn't affect the performance of Commerce headquarters.</span></span> <span data-ttu-id="ee42b-139">En tillfällig, global unik identifierare (GUID) tilldelas varje ny asynkron kundpost och används som kundkonto-ID.</span><span class="sxs-lookup"><span data-stu-id="ee42b-139">A temporary globally unique identifier (GUID) is assigned to every new Async customer record and used as the customer account ID.</span></span> <span data-ttu-id="ee42b-140">Denna GUID inte visas för kassaanvändare.</span><span class="sxs-lookup"><span data-stu-id="ee42b-140">This GUID isn't shown to POS users.</span></span> <span data-ttu-id="ee42b-141">I stället visas **väntande synkronisering** som kundkonto-ID.</span><span class="sxs-lookup"><span data-stu-id="ee42b-141">Instead, those users will see **Pending sync** as the customer account ID.</span></span> <span data-ttu-id="ee42b-142">Även om denna konfiguration tvingar kunder att skapas asynkront, observera att redigeringar till kundposter alltid görs synkront.</span><span class="sxs-lookup"><span data-stu-id="ee42b-142">Although this configuration forces customers to be created asynchronously, note that edits to customer records are always done synchronously.</span></span>

### <a name="convert-async-customers-to-sync-customers"></a><span data-ttu-id="ee42b-143">Konvertera asynkrona kunder till synkrona kunder</span><span class="sxs-lookup"><span data-stu-id="ee42b-143">Convert Async customers to Sync customers</span></span>

<span data-ttu-id="ee42b-144">Om du vill konvertera asynkrona kunder till synkrona kunder måste du först köra P-jobbet för att skicka asynkrona kunderna till Commerce-administration.</span><span class="sxs-lookup"><span data-stu-id="ee42b-144">To convert Async customers to Sync customers, you must first run the P-job to send the Async customers to Commerce headquarters.</span></span> <span data-ttu-id="ee42b-145">Kör sedan jobbet **Synkronisera kunder och affärspartners från asynkrona läge** för att skapa kundkonto-ID.</span><span class="sxs-lookup"><span data-stu-id="ee42b-145">Then run the **Synchronize customers and business partners from async mode** job to create customer account IDs.</span></span> <span data-ttu-id="ee42b-146">Kör slutligen **1010** jobbet om du vill synkronisera de nya kundkonto-ID till kanalerna.</span><span class="sxs-lookup"><span data-stu-id="ee42b-146">Finally, run the **1010** job to sync the new customer account IDs to the channels.</span></span>

### <a name="async-customer-limitations"></a><span data-ttu-id="ee42b-147">Asynkrona kundbegränsningar</span><span class="sxs-lookup"><span data-stu-id="ee42b-147">Async customer limitations</span></span>

<span data-ttu-id="ee42b-148">Asynkrona kundfunktionen har för närvarande följande begränsningar:</span><span class="sxs-lookup"><span data-stu-id="ee42b-148">The Async customer functionality currently has the following limitations:</span></span>

- <span data-ttu-id="ee42b-149">Asynkrona kundposter kan inte redigeras om inte kunden har skapats i Commerce-administration och det nya kundkonto-ID:t har synkroniserats tillbaka till kanalen.</span><span class="sxs-lookup"><span data-stu-id="ee42b-149">Async customer records can't be edited unless the customer has been created in Commerce headquarters and the new customer account ID has been synced back to the channel.</span></span>
- <span data-ttu-id="ee42b-150">Anknytningar kan inte associeras med asynkrona kunder.</span><span class="sxs-lookup"><span data-stu-id="ee42b-150">Affiliations can't be associated with Async customers.</span></span> <span data-ttu-id="ee42b-151">Därför ärver inte nya asynkrona kunder anknytningar från standardkunden.</span><span class="sxs-lookup"><span data-stu-id="ee42b-151">Therefore, new Async customers don't inherit affiliations from the default customer.</span></span>
- <span data-ttu-id="ee42b-152">Förmånskort kan inte utfärdas till asynkrona kunder såvida inte det nya kundkonto-ID:t har synkroniserats tillbaka till kanalen.</span><span class="sxs-lookup"><span data-stu-id="ee42b-152">Loyalty cards can't be issued to Async customers unless the new customer account ID has been synced back to the channel.</span></span>
- <span data-ttu-id="ee42b-153">Sekundära e-postadresser och telefonnummer kan inte fångas in för asynkrona kunder.</span><span class="sxs-lookup"><span data-stu-id="ee42b-153">Secondary email addresses and phone numbers can't be captured for Async customers.</span></span>

### <a name="customer-creation-in-pos-offline-mode"></a><span data-ttu-id="ee42b-154">Kundskapa i kassa offlineläge</span><span class="sxs-lookup"><span data-stu-id="ee42b-154">Customer creation in POS offline mode</span></span>

<span data-ttu-id="ee42b-155">Om kassan är offline medan läget för asynkron kundgenerering är aktiverat, skapas nya kundposter asynkront.</span><span class="sxs-lookup"><span data-stu-id="ee42b-155">If the POS goes offline while the Async customer creation mode is enabled, new customer records are created asynchronously.</span></span> <span data-ttu-id="ee42b-156">Om kassan är offline medan läget för asynkron kundgenerering är inaktiverat, växlar systemet automatiskt till läget för asynkron kundgenerering.</span><span class="sxs-lookup"><span data-stu-id="ee42b-156">If the POS goes offline while the Async customer creation mode is disabled, the system automatically switches to the Async customer creation mode.</span></span> <span data-ttu-id="ee42b-157">Med andra ord kan kundposter skapas asynkront även om asynkront kundskapande är inaktiverat.</span><span class="sxs-lookup"><span data-stu-id="ee42b-157">In other words, customer records might be created asynchronously even if the Async customer creation mode is disabled.</span></span> <span data-ttu-id="ee42b-158">Därför måste kommersiella administratörer för Commerce-administration skapa och schemalägga ett återkommande batchjobb för P-jobbet, jobbet **Synkronisera kunder och affärspartners från asynkront läge** och jobbet **1010** så att eventuella asynkrona kunder konverteras till synkrona kunder i Commerce-administration.</span><span class="sxs-lookup"><span data-stu-id="ee42b-158">Therefore, Commerce headquarters administrators must create and schedule a recurring batch job for the P-job, the **Synchronize customers and business partners from async mode** job, and the **1010** job, so that any Async customers are converted to Sync customers in Commerce headquarters.</span></span>

> [!NOTE]
> <span data-ttu-id="ee42b-159">Om alternativet **Filtrera delade kunddatatabeller** anger **Ja** på sidan **Commerce kanalschema** (**Retail och Commerce \> administration inställning \> Commerce schemaläggare \> Kanaldatabasgrupp**), kundposter skapas inte i kassa offline-läge.</span><span class="sxs-lookup"><span data-stu-id="ee42b-159">If the **Filter shared customer data tables** option is set to **Yes** on the **Commerce channel schema** page (**Retail and Commerce \> Headquarters setup \> Commerce scheduler \> Channel database group**), customer records aren't created in POS offline mode.</span></span> <span data-ttu-id="ee42b-160">Mer information finns i [Offline uteslutande av data](dev-itpro/implementation-considerations-cdx.md#offline-data-exclusion).</span><span class="sxs-lookup"><span data-stu-id="ee42b-160">For more information, see [Offline data exclusion](dev-itpro/implementation-considerations-cdx.md#offline-data-exclusion).</span></span>

## <a name="additional-resources"></a><span data-ttu-id="ee42b-161">Ytterligare resurser</span><span class="sxs-lookup"><span data-stu-id="ee42b-161">Additional resources</span></span>

[<span data-ttu-id="ee42b-162">Kundattribut</span><span class="sxs-lookup"><span data-stu-id="ee42b-162">Customer attributes</span></span>](dev-itpro/customer-attributes.md)

[<span data-ttu-id="ee42b-163">Offline uteslutande av data</span><span class="sxs-lookup"><span data-stu-id="ee42b-163">Offline data exclusion</span></span>](dev-itpro/implementation-considerations-cdx.md#offline-data-exclusion)
